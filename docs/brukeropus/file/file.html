<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.7.0"/>
    <title>brukeropus.file.file API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../file.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;brukeropus.file</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#OPUSFile">OPUSFile</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OPUSFile.__init__">OPUSFile</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.filepath">filepath</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.is_opus">is_opus</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.data_keys">data_keys</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.series_keys">series_keys</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.all_data_keys">all_data_keys</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.unknown_blocks">unknown_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.special_blocks">special_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.unmatched_data_blocks">unmatched_data_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.unmatched_data_status_blocks">unmatched_data_status_blocks</a>
                        </li>
                        <li>
                                <a class="function" href="#OPUSFile.iter_data">iter_data</a>
                        </li>
                        <li>
                                <a class="function" href="#OPUSFile.iter_series">iter_series</a>
                        </li>
                        <li>
                                <a class="function" href="#OPUSFile.iter_all_data">iter_all_data</a>
                        </li>
                        <li>
                                <a class="function" href="#OPUSFile.print_parameters">print_parameters</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Parameters">Parameters</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Parameters.__init__">Parameters</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameters.blocks">blocks</a>
                        </li>
                        <li>
                                <a class="function" href="#Parameters.keys">keys</a>
                        </li>
                        <li>
                                <a class="function" href="#Parameters.values">values</a>
                        </li>
                        <li>
                                <a class="function" href="#Parameters.items">items</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameters.datetime">datetime</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Data">Data</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Data.__init__">Data</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.key">key</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.params">params</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.y">y</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.x">x</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.label">label</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.vel">vel</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.block">block</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.blocks">blocks</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#DataSeries">DataSeries</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#DataSeries.__init__">DataSeries</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.key">key</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.params">params</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.y">y</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.x">x</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.num_spectra">num_spectra</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.label">label</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.vel">vel</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.block">block</a>
                        </li>
                        <li>
                                <a class="variable" href="#DataSeries.blocks">blocks</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#read_opus">read_opus</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../brukeropus.html">brukeropus</a><wbr>.<a href="./../file.html">file</a><wbr>.file    </h1>

                
                        <input id="mod-file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-file-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">brukeropus.file.block</span><span class="w"> </span><span class="kn">import</span> <span class="n">pair_data_and_status_blocks</span><span class="p">,</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">FileDirectory</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">brukeropus.file.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_block_type_label</span><span class="p">,</span> <span class="n">get_param_label</span><span class="p">,</span> <span class="n">_print_block_header</span><span class="p">,</span> <span class="n">_print_cols</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">brukeropus.file.parse</span><span class="w"> </span><span class="kn">import</span> <span class="n">read_opus_file_bytes</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">The `OPUSFile` class attempts to abstract away some of the complexity and rigid organization structure of Bruker&#39;s OPUS</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">files while providing full access to the data contained in them.  This way, the user does not have to memorize the</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">organization structure of an OPUS file (e.g. which parameter block contains the beamsplitter parameter) to access the</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">information.</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="k">class</span><span class="w"> </span><span class="nc">OPUSFile</span><span class="p">:</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class that contains the data and metadata contained in a bruker OPUS file.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">    Args:</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">        filepath: full path to the OPUS file to be parsed. Can be a string or Path object and is required to initilize</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">            an `OPUSFile` object.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">    Attributes:</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">        is_opus: True if filepath points to an OPUS file, False otherwise. Also returned for dunder `__bool__()`</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">        filepath: full path pointing to the OPUS file</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">        params: class containing all general parameter metadata for the OPUS file. To save typing, the</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">            three char parameters from params also become attributes of the `OPUSFile` class (e.g. bms, apt, src)  </span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">        rf_params: class containing all reference parameter metadata for the OPUS file </span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">        data_keys: list of all `Data` attributes stored in the file (e.g. sm, rf, t, a, r, igsm, igrf, phsm, etc.).</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">            This only includes 1D data (i.e. omits `DataSeries`).</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">        series_keys: list of all `DataSeries` attributes stored in the file (e.g. sm, rf, t, a, igsm, phsm, etc.).</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">            This only includes data series (i.e. omits 1D `Data`).</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">        all_data_keys: list of all `Data` and `DataSeries` attributes stored in the file (1D and series comingled).</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">        datetime: Returns the most recent datetime of all the data blocks stored in the file (typically result spectra)</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">        directory: `FileDirectory` class containing information about all the various data blocks in the file.</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">        history: History (file-log) containing text about how the file was generated/edited (not always saved)</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">        unmatched_data_blocks: list of data `FileBlock` that were not uniquely matched to a data status block</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">        unmatched_data_status_blocks: list of data status `FileBlock` that were not uniquely matched to a data block</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">        unknown_blocks: list of `FileBlock` that were not parsed and/or assigned to attributes into the class</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">    Data Attributes:</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">        **sm:** Single-channel sample spectra</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">        **rf:** Single-channel reference spectra</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">        **igsm:** Sample interferogram</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">        **igrf:** Reference interferogram</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">        **phsm:** Sample phase</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">        **phrf:** Reference phase</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">        **a:** Absorbance</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">        **t:** Transmittance</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">        **r:** Reflectance</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">        **km:** Kubelka-Munk</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">        **tr:** Trace (Intensity over Time)</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">        **gcig:** gc File (Series of Interferograms)</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">        **gcsc:** gc File (Series of Spectra)</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">        **ra:** Raman</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">        **e:** Emission</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">        **pw:** Power</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">        **logr:** log(Reflectance)</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">        **atr:** ATR</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">        **pas:** Photoacoustic</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span><span class="p">:</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>            <span class="n">data_str</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">)</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>            <span class="k">return</span> <span class="s1">&#39;OPUS File: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">Spectra: &#39;</span> <span class="o">+</span> <span class="n">data_str</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>            <span class="k">return</span> <span class="s1">&#39;Not an OPUS file: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;blocks&#39;</span><span class="p">:</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Note: a list of `FileBlock` is initially loaded and parsed using the `FileDirectory` class.  This list is</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">        located in `OPUSFile.directory.blocks`. After parsing all the file blocks (performed by the `FileBlock` class),</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">        data from those blocks are saved to various attributes within the `OPUSFile` class.  Subsequently, the block is</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">        removed from `OPUSFile.directory.blocks` to eliminate redundant data and reduce memory footprint.&#39;&#39;&#39;</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">special_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_status_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>        <span class="n">filebytes</span> <span class="o">=</span> <span class="n">read_opus_file_bytes</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>        <span class="k">if</span> <span class="n">filebytes</span><span class="p">:</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">FileDirectory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_directory</span><span class="p">()</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_params</span><span class="p">(</span><span class="s1">&#39;rf_params&#39;</span><span class="p">,</span> <span class="s1">&#39;is_rf_param&#39;</span><span class="p">)</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_params</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;is_sm_param&#39;</span><span class="p">)</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_history</span><span class="p">()</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_data</span><span class="p">()</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span> <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span><span class="p">]</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="p">)</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Moves the directory `FileBlock` into the directory attribute.&#39;&#39;&#39;</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>        <span class="n">dir_block</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_directory</span><span class="p">()][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">dir_block</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">([</span><span class="n">dir_block</span><span class="p">])</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_param</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Sets `Parameter` attributes (`self.params`, `self.rf_params`) from directory blocks and removes them from</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">        the directory.&#39;&#39;&#39;</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>        <span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">is_param</span><span class="p">)()</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">blocks</span><span class="p">))</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Sets the history attribute to the parsed history (file_log) data and removes the block.&#39;&#39;&#39;</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>        <span class="n">hist_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_file_log</span><span class="p">()]</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hist_blocks</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">special_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">special_blocks</span> <span class="o">+</span> <span class="n">hist_blocks</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">b</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">hist_blocks</span><span class="p">])</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="n">hist_blocks</span><span class="p">)</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_unused_data_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">):</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a shorthand attribute key for the data_block type. If key already exists&#39;&#39;&#39;</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="n">key</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">:</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>                <span class="n">sub_key</span> <span class="o">=</span> <span class="n">key</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>                <span class="k">if</span> <span class="n">sub_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">:</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>                    <span class="n">key</span> <span class="o">=</span> <span class="n">sub_key</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>                    <span class="k">break</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>        <span class="k">return</span> <span class="n">key</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_data_vel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">):</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get the mirror velocity setting for the data `Fileblock` (based on whether it is reference or sample)&#39;&#39;&#39;</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>        <span class="k">if</span> <span class="n">data_block</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s1">&#39;vel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span><span class="o">.</span><span class="n">vel</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>        <span class="k">elif</span> <span class="n">data_block</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s1">&#39;vel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vel</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Pairs data and data_series `Fileblock`, sets all `Data` and `DataSeries` attributes, and removes the blocks</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">        from the directory. Unmatched blocks are moved to `unmached_data_blocks` or `unmatched_data_status_blocks`&#39;&#39;&#39;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>        <span class="n">matches</span> <span class="o">=</span> <span class="n">pair_data_and_status_blocks</span><span class="p">([</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span><span class="p">])</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>        <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unused_data_key</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>            <span class="n">vel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_vel</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>                <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>            <span class="k">elif</span> <span class="n">data</span><span class="o">.</span><span class="n">is_data_series</span><span class="p">():</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>                <span class="n">data_class</span> <span class="o">=</span> <span class="n">DataSeries</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data_class</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">vel</span><span class="o">=</span><span class="n">vel</span><span class="p">))</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">([</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">])</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_data</span><span class="p">()</span> <span class="ow">or</span> <span class="n">b</span><span class="o">.</span><span class="n">is_data_series</span><span class="p">()]</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_blocks</span><span class="p">)</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_status_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">()]</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_status_blocks</span><span class="p">)</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Removes blocks from the directory whose data has been stored elsewhere in class (e.g. params, data, etc.).&#39;&#39;&#39;</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>        <span class="n">starts</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">]</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">start</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">starts</span><span class="p">]</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various Data classes from the OPUSFile (excluding DataSeries)&#39;&#39;&#39;</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">:</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_series</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various DataSeries classes from the OPUSFile (excluding Data)&#39;&#39;&#39;</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span><span class="p">:</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields all the various Data and DataSeries classes from the OPUSFile&#39;&#39;&#39;</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">:</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>    
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">print_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">value_width</span><span class="o">=</span><span class="mi">53</span><span class="p">):</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Prints all the parameter metadata to the console (organized by block)&#39;&#39;&#39;</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>        <span class="n">width</span> <span class="o">=</span> <span class="n">key_width</span> <span class="o">+</span> <span class="n">label_width</span> <span class="o">+</span> <span class="n">value_width</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>        <span class="n">col_widths</span> <span class="o">=</span> <span class="p">(</span><span class="n">key_width</span><span class="p">,</span> <span class="n">label_width</span><span class="p">,</span> <span class="n">value_width</span><span class="p">)</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>        <span class="n">param_infos</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Sample/Result Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Reference Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;rf_params&#39;</span><span class="p">)]</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>        <span class="k">for</span> <span class="n">title</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">param_infos</span><span class="p">:</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>            <span class="n">_print_block_header</span><span class="p">(</span><span class="n">title</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">attr</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>            <span class="n">blocks</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span><span class="o">.</span><span class="n">blocks</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>            <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">:</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>                <span class="n">_print_block_header</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>                <span class="n">_print_cols</span><span class="p">((</span><span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>                    <span class="n">label</span> <span class="o">=</span> <span class="n">get_param_label</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">),</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>                    <span class="n">_print_cols</span><span class="p">((</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">label</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Parameters</span><span class="p">:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing parameter metadata of an OPUS file.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">    Parameters of an OPUS file are stored as key, val pairs, where the key is always three chars.  For example, the</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">    beamsplitter is stored in the `bms` attribute, source in `src` etc.  A list of known keys, with friendly label can</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">    be found in `brukeropus.file.constants.PARAM_LABELS`.  The keys in an OPUS file are not case sensitive, and stored</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">    in all CAPS (i.e. `BMS`, `SRC`, etc.) but this class uses lower case keys to follow python convention.  The class is</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">    initialized from a list of `FileBlock` parsed as parameters.  The key, val items in blocks of the list are combined</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">    into one parameter class, so care must be taken not to pass blocks that will overwrite each others keys.  Analagous</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">    to a dict, the keys, values, and (key, val) can be iterated over using the functions: `keys()`, `values()`, and</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">    `items()` respectively.</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">    Args:</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">        blocks: list of `FileBlock`; that has been parsed as parameters.</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">    Attributes:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">        xxx: parameter attributes are stored as three char keys. Which keys are generated depends on the list of</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">            `FileBlock` that is used to initialize the class. If input list contains a single data status</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">            `FileBlock`, attributes will include: `fxv`, `lxv`, `npt` (first x-val, last x-val, number of points),</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">            etc. Other blocks produce attributes such as: `bms`, `src`, `apt` (beamsplitter, source, aperture) etc. A</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">            full list of keys available in a given `Parameters` instance are given by the `keys()` method.</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">        datetime: if blocks contain the keys: `dat` (date) and `tim` (time), the `datetime` attribute of this class will</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">            be set to a python `datetime` object. Currently, only data status blocks are known to have these keys. If</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">            `dat` and `tim` are not present in the class, the `datetime` attribute will return `None`.</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">        blocks: list of `FileBlock` with data removed to save memory (keys saved for reference)</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_params&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;blocks&#39;</span><span class="p">)</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span> <span class="ow">is</span> <span class="n">FileBlock</span><span class="p">:</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>            <span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">blocks</span><span class="p">]</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">:</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>            <span class="n">block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">blocks</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_datetime</span><span class="p">()</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; not a valid attribute. For list of valid parameter keys, use: .keys()&#39;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_set_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>        <span class="k">if</span> <span class="s1">&#39;dat&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39;tim&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>                <span class="n">date_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dat</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>                <span class="n">time_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tim</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>                <span class="n">dt_str</span> <span class="o">=</span> <span class="n">date_str</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">time_str</span><span class="p">[:</span><span class="n">time_str</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39; (&#39;</span><span class="p">)]</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>                    <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>                    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>                <span class="k">except</span><span class="p">:</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>                        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%Y/%m/</span><span class="si">%d</span><span class="s1">-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>                        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>                    <span class="k">except</span><span class="p">:</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">dt</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_keys` class of all valid keys in the class (i.e. dict.keys())&#39;&#39;&#39;</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_values` class of all the values in the class (i.e. dict.values())&#39;&#39;&#39;</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_items` class of all the values in the class (i.e. dict.items())&#39;&#39;&#39;</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Data</span><span class="p">:</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing array data and associated parameter/metadata from an OPUS file.</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">    Args:</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">        data_block: parsed `FileBlock` instance of a data block</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">        data_status_block: `parsed FileBlock` instance of a data status block which contains metadata about the data</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a><span class="sd">        vel: mirror velocity setting for the measurement (from param or rf_param block as appropriate)</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">    Attributes:</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a><span class="sd">        params: `Parameter` class with metadata associated with the data block such as first x point: `fxp`, last x</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="sd">            point: `lxp`, number of points: `npt`, date: `dat`, time: `tim` etc.</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a><span class="sd">        y: 1D `numpy` array containing y values of data block</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a><span class="sd">        x: 1D `numpy` array containing x values of data block. Units of x array are given by `dxu` parameter.</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">        vel: mirror velocity setting for the measurement (used to calculate modulation frequency)</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">        block: data `FileBlock` used to generate the `Data` class</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">        blocks: [data, data_status] `FileBlock` used to generate the `Data` class</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm) units regardless of what units the x array was originally</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">            interferogram or phase blocks.</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">        **wl:** Returns the x array in wavelength (m) units regardless of what units the x array was originally</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a><span class="sd">            interferogram or phase blocks.</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="sd">        **f:** Returns the x array in modulation frequency units (Hz) regardless of what units the x array was</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="sd">            originally saved in. This is only valid for spectral data blocks such as sample, reference, transmission,</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a><span class="sd">            etc., not interferogram or phase blocks.</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">            block).  </span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        **xxx:** the various three char parameter keys from the `params` attribute can be directly called from the </span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="sd">            `Data` class for convenience. Common parameters include `dxu` (x units), `mxy` (max y value), `mny` (min y</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="sd">            value), etc.</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="s1">&#39;blocks&#39;</span><span class="p">)</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">data_status_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vel</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">data_status_block</span><span class="p">)</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">csf</span> <span class="o">*</span> <span class="n">y</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">vel</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>        <span class="n">data_block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">data_block</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">blocks</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span><span class="p">]</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wn&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wn</span><span class="p">()</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wl&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wl</span><span class="p">()</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_freq</span><span class="p">()</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;datetime&#39;</span><span class="p">:</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">datetime</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; is not a valid attribute for Data: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_wn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_wl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>            <span class="k">return</span> <span class="mi">10000</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_freq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>        <span class="n">vel</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7900</span>  <span class="c1"># cm/s</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>        <span class="k">return</span> <span class="n">vel</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">wn</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DataSeries</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing a data series (3D specra) and associated parameter/metadata from an OPUS file.</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a><span class="sd">    Args:</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd">        data_block: parsed `FileBlock` instance of a data block</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a><span class="sd">        data_status_block: `parsed FileBlock` instance of a data status block which contains metadata about the data</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">        vel: mirror velocity setting for measurement (from param or rf_param block as appropriate)</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">    Attributes:</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="sd">        params: `Parameter` class with metadata associated with the data block such as first x point: `fxp`, last x</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">            point: `lxp`, number of points: `npt`, date: `dat`, time: `tim` etc.</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="sd">        y: 2D numpy array containing y values of data block</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        x: 1D numpy array containing x values of data block. Units of x array are given by `.dxu` attribute.</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">        num_spectra: number of spectra in the series (i.e. length of y)</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">        vel: mirror velocity setting for measurement (used to calculate modulation frequency)</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">        block: data `FileBlock` used to generate the `DataSeries` class</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="sd">        blocks: [data, data_status] `FileBlock` used to generate the `DataSeries` class</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm) units regardless of what units the x array was originally saved</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="sd">        **wl:** Returns the x array in wavelength (m) units regardless of what units the x array was originally saved</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">            block).  </span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a><span class="sd">        **xxx:** the various three char parameter keys from the `params` attribute can be directly called from the data</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a><span class="sd">            class for convenience. Several of these parameters return arrays, rather than singular values because they</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">            are recorded for every spectra in the series, e.g. `npt`, `mny`, `mxy`, `srt`, &#39;ert&#39;, `nsn`.</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="s1">&#39;blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;num_spectra&#39;</span><span class="p">)</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">data_status_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vel</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">data_status_block</span><span class="p">)</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][:,</span> <span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_spectra</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_blocks&#39;</span><span class="p">]</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_size&#39;</span><span class="p">,</span> <span class="s1">&#39;info_size&#39;</span><span class="p">]:</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">vel</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>        <span class="n">data_block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">data_block</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">blocks</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span><span class="p">]</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_opus</span><span class="p">(</span><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OPUSFile</span><span class="p">:</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Return an `OPUSFile` object from an OPUS file filepath.</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">    The following produces identical results:</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">        ```python</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="sd">        data = read_opus(filepath)</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="sd">        data = OPUSFile(filepath)</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a><span class="sd">        ```</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a><span class="sd">    Args:</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a><span class="sd">        filepath (str or Path): filepath of an OPUS file (typically *.0)</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a><span class="sd">    Returns:</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a><span class="sd">        opus_file: an instance of the `OPUSFile` class containing all data/metadata extracted from the file.</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>    <span class="k">return</span> <span class="n">OPUSFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="OPUSFile">
                            <input id="OPUSFile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OPUSFile</span>:

                <label class="view-source-button" for="OPUSFile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile-19"><a href="#OPUSFile-19"><span class="linenos"> 19</span></a><span class="k">class</span><span class="w"> </span><span class="nc">OPUSFile</span><span class="p">:</span>
</span><span id="OPUSFile-20"><a href="#OPUSFile-20"><span class="linenos"> 20</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class that contains the data and metadata contained in a bruker OPUS file.</span>
</span><span id="OPUSFile-21"><a href="#OPUSFile-21"><span class="linenos"> 21</span></a>
</span><span id="OPUSFile-22"><a href="#OPUSFile-22"><span class="linenos"> 22</span></a><span class="sd">    Args:</span>
</span><span id="OPUSFile-23"><a href="#OPUSFile-23"><span class="linenos"> 23</span></a><span class="sd">        filepath: full path to the OPUS file to be parsed. Can be a string or Path object and is required to initilize</span>
</span><span id="OPUSFile-24"><a href="#OPUSFile-24"><span class="linenos"> 24</span></a><span class="sd">            an `OPUSFile` object.</span>
</span><span id="OPUSFile-25"><a href="#OPUSFile-25"><span class="linenos"> 25</span></a>
</span><span id="OPUSFile-26"><a href="#OPUSFile-26"><span class="linenos"> 26</span></a><span class="sd">    Attributes:</span>
</span><span id="OPUSFile-27"><a href="#OPUSFile-27"><span class="linenos"> 27</span></a><span class="sd">        is_opus: True if filepath points to an OPUS file, False otherwise. Also returned for dunder `__bool__()`</span>
</span><span id="OPUSFile-28"><a href="#OPUSFile-28"><span class="linenos"> 28</span></a><span class="sd">        filepath: full path pointing to the OPUS file</span>
</span><span id="OPUSFile-29"><a href="#OPUSFile-29"><span class="linenos"> 29</span></a><span class="sd">        params: class containing all general parameter metadata for the OPUS file. To save typing, the</span>
</span><span id="OPUSFile-30"><a href="#OPUSFile-30"><span class="linenos"> 30</span></a><span class="sd">            three char parameters from params also become attributes of the `OPUSFile` class (e.g. bms, apt, src)  </span>
</span><span id="OPUSFile-31"><a href="#OPUSFile-31"><span class="linenos"> 31</span></a><span class="sd">        rf_params: class containing all reference parameter metadata for the OPUS file </span>
</span><span id="OPUSFile-32"><a href="#OPUSFile-32"><span class="linenos"> 32</span></a><span class="sd">        data_keys: list of all `Data` attributes stored in the file (e.g. sm, rf, t, a, r, igsm, igrf, phsm, etc.).</span>
</span><span id="OPUSFile-33"><a href="#OPUSFile-33"><span class="linenos"> 33</span></a><span class="sd">            This only includes 1D data (i.e. omits `DataSeries`).</span>
</span><span id="OPUSFile-34"><a href="#OPUSFile-34"><span class="linenos"> 34</span></a><span class="sd">        series_keys: list of all `DataSeries` attributes stored in the file (e.g. sm, rf, t, a, igsm, phsm, etc.).</span>
</span><span id="OPUSFile-35"><a href="#OPUSFile-35"><span class="linenos"> 35</span></a><span class="sd">            This only includes data series (i.e. omits 1D `Data`).</span>
</span><span id="OPUSFile-36"><a href="#OPUSFile-36"><span class="linenos"> 36</span></a><span class="sd">        all_data_keys: list of all `Data` and `DataSeries` attributes stored in the file (1D and series comingled).</span>
</span><span id="OPUSFile-37"><a href="#OPUSFile-37"><span class="linenos"> 37</span></a><span class="sd">        datetime: Returns the most recent datetime of all the data blocks stored in the file (typically result spectra)</span>
</span><span id="OPUSFile-38"><a href="#OPUSFile-38"><span class="linenos"> 38</span></a><span class="sd">        directory: `FileDirectory` class containing information about all the various data blocks in the file.</span>
</span><span id="OPUSFile-39"><a href="#OPUSFile-39"><span class="linenos"> 39</span></a><span class="sd">        history: History (file-log) containing text about how the file was generated/edited (not always saved)</span>
</span><span id="OPUSFile-40"><a href="#OPUSFile-40"><span class="linenos"> 40</span></a><span class="sd">        unmatched_data_blocks: list of data `FileBlock` that were not uniquely matched to a data status block</span>
</span><span id="OPUSFile-41"><a href="#OPUSFile-41"><span class="linenos"> 41</span></a><span class="sd">        unmatched_data_status_blocks: list of data status `FileBlock` that were not uniquely matched to a data block</span>
</span><span id="OPUSFile-42"><a href="#OPUSFile-42"><span class="linenos"> 42</span></a><span class="sd">        unknown_blocks: list of `FileBlock` that were not parsed and/or assigned to attributes into the class</span>
</span><span id="OPUSFile-43"><a href="#OPUSFile-43"><span class="linenos"> 43</span></a>
</span><span id="OPUSFile-44"><a href="#OPUSFile-44"><span class="linenos"> 44</span></a><span class="sd">    Data Attributes:</span>
</span><span id="OPUSFile-45"><a href="#OPUSFile-45"><span class="linenos"> 45</span></a><span class="sd">        **sm:** Single-channel sample spectra</span>
</span><span id="OPUSFile-46"><a href="#OPUSFile-46"><span class="linenos"> 46</span></a><span class="sd">        **rf:** Single-channel reference spectra</span>
</span><span id="OPUSFile-47"><a href="#OPUSFile-47"><span class="linenos"> 47</span></a><span class="sd">        **igsm:** Sample interferogram</span>
</span><span id="OPUSFile-48"><a href="#OPUSFile-48"><span class="linenos"> 48</span></a><span class="sd">        **igrf:** Reference interferogram</span>
</span><span id="OPUSFile-49"><a href="#OPUSFile-49"><span class="linenos"> 49</span></a><span class="sd">        **phsm:** Sample phase</span>
</span><span id="OPUSFile-50"><a href="#OPUSFile-50"><span class="linenos"> 50</span></a><span class="sd">        **phrf:** Reference phase</span>
</span><span id="OPUSFile-51"><a href="#OPUSFile-51"><span class="linenos"> 51</span></a><span class="sd">        **a:** Absorbance</span>
</span><span id="OPUSFile-52"><a href="#OPUSFile-52"><span class="linenos"> 52</span></a><span class="sd">        **t:** Transmittance</span>
</span><span id="OPUSFile-53"><a href="#OPUSFile-53"><span class="linenos"> 53</span></a><span class="sd">        **r:** Reflectance</span>
</span><span id="OPUSFile-54"><a href="#OPUSFile-54"><span class="linenos"> 54</span></a><span class="sd">        **km:** Kubelka-Munk</span>
</span><span id="OPUSFile-55"><a href="#OPUSFile-55"><span class="linenos"> 55</span></a><span class="sd">        **tr:** Trace (Intensity over Time)</span>
</span><span id="OPUSFile-56"><a href="#OPUSFile-56"><span class="linenos"> 56</span></a><span class="sd">        **gcig:** gc File (Series of Interferograms)</span>
</span><span id="OPUSFile-57"><a href="#OPUSFile-57"><span class="linenos"> 57</span></a><span class="sd">        **gcsc:** gc File (Series of Spectra)</span>
</span><span id="OPUSFile-58"><a href="#OPUSFile-58"><span class="linenos"> 58</span></a><span class="sd">        **ra:** Raman</span>
</span><span id="OPUSFile-59"><a href="#OPUSFile-59"><span class="linenos"> 59</span></a><span class="sd">        **e:** Emission</span>
</span><span id="OPUSFile-60"><a href="#OPUSFile-60"><span class="linenos"> 60</span></a><span class="sd">        **pw:** Power</span>
</span><span id="OPUSFile-61"><a href="#OPUSFile-61"><span class="linenos"> 61</span></a><span class="sd">        **logr:** log(Reflectance)</span>
</span><span id="OPUSFile-62"><a href="#OPUSFile-62"><span class="linenos"> 62</span></a><span class="sd">        **atr:** ATR</span>
</span><span id="OPUSFile-63"><a href="#OPUSFile-63"><span class="linenos"> 63</span></a><span class="sd">        **pas:** Photoacoustic</span>
</span><span id="OPUSFile-64"><a href="#OPUSFile-64"><span class="linenos"> 64</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="OPUSFile-65"><a href="#OPUSFile-65"><span class="linenos"> 65</span></a>
</span><span id="OPUSFile-66"><a href="#OPUSFile-66"><span class="linenos"> 66</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-67"><a href="#OPUSFile-67"><span class="linenos"> 67</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span><span class="p">:</span>
</span><span id="OPUSFile-68"><a href="#OPUSFile-68"><span class="linenos"> 68</span></a>            <span class="n">data_str</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">)</span>
</span><span id="OPUSFile-69"><a href="#OPUSFile-69"><span class="linenos"> 69</span></a>            <span class="k">return</span> <span class="s1">&#39;OPUS File: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">Spectra: &#39;</span> <span class="o">+</span> <span class="n">data_str</span>
</span><span id="OPUSFile-70"><a href="#OPUSFile-70"><span class="linenos"> 70</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile-71"><a href="#OPUSFile-71"><span class="linenos"> 71</span></a>            <span class="k">return</span> <span class="s1">&#39;Not an OPUS file: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile-72"><a href="#OPUSFile-72"><span class="linenos"> 72</span></a>
</span><span id="OPUSFile-73"><a href="#OPUSFile-73"><span class="linenos"> 73</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-74"><a href="#OPUSFile-74"><span class="linenos"> 74</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span>
</span><span id="OPUSFile-75"><a href="#OPUSFile-75"><span class="linenos"> 75</span></a>
</span><span id="OPUSFile-76"><a href="#OPUSFile-76"><span class="linenos"> 76</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="OPUSFile-77"><a href="#OPUSFile-77"><span class="linenos"> 77</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;blocks&#39;</span><span class="p">:</span>
</span><span id="OPUSFile-78"><a href="#OPUSFile-78"><span class="linenos"> 78</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span>
</span><span id="OPUSFile-79"><a href="#OPUSFile-79"><span class="linenos"> 79</span></a>
</span><span id="OPUSFile-80"><a href="#OPUSFile-80"><span class="linenos"> 80</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="OPUSFile-81"><a href="#OPUSFile-81"><span class="linenos"> 81</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Note: a list of `FileBlock` is initially loaded and parsed using the `FileDirectory` class.  This list is</span>
</span><span id="OPUSFile-82"><a href="#OPUSFile-82"><span class="linenos"> 82</span></a><span class="sd">        located in `OPUSFile.directory.blocks`. After parsing all the file blocks (performed by the `FileBlock` class),</span>
</span><span id="OPUSFile-83"><a href="#OPUSFile-83"><span class="linenos"> 83</span></a><span class="sd">        data from those blocks are saved to various attributes within the `OPUSFile` class.  Subsequently, the block is</span>
</span><span id="OPUSFile-84"><a href="#OPUSFile-84"><span class="linenos"> 84</span></a><span class="sd">        removed from `OPUSFile.directory.blocks` to eliminate redundant data and reduce memory footprint.&#39;&#39;&#39;</span>
</span><span id="OPUSFile-85"><a href="#OPUSFile-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
</span><span id="OPUSFile-86"><a href="#OPUSFile-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="OPUSFile-87"><a href="#OPUSFile-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-88"><a href="#OPUSFile-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-89"><a href="#OPUSFile-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-90"><a href="#OPUSFile-90"><span class="linenos"> 90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-91"><a href="#OPUSFile-91"><span class="linenos"> 91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">special_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-92"><a href="#OPUSFile-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-93"><a href="#OPUSFile-93"><span class="linenos"> 93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_status_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-94"><a href="#OPUSFile-94"><span class="linenos"> 94</span></a>        <span class="n">filebytes</span> <span class="o">=</span> <span class="n">read_opus_file_bytes</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile-95"><a href="#OPUSFile-95"><span class="linenos"> 95</span></a>        <span class="k">if</span> <span class="n">filebytes</span><span class="p">:</span>
</span><span id="OPUSFile-96"><a href="#OPUSFile-96"><span class="linenos"> 96</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="OPUSFile-97"><a href="#OPUSFile-97"><span class="linenos"> 97</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">FileDirectory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="OPUSFile-98"><a href="#OPUSFile-98"><span class="linenos"> 98</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_directory</span><span class="p">()</span>
</span><span id="OPUSFile-99"><a href="#OPUSFile-99"><span class="linenos"> 99</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_params</span><span class="p">(</span><span class="s1">&#39;rf_params&#39;</span><span class="p">,</span> <span class="s1">&#39;is_rf_param&#39;</span><span class="p">)</span>
</span><span id="OPUSFile-100"><a href="#OPUSFile-100"><span class="linenos">100</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_params</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;is_sm_param&#39;</span><span class="p">)</span>
</span><span id="OPUSFile-101"><a href="#OPUSFile-101"><span class="linenos">101</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_history</span><span class="p">()</span>
</span><span id="OPUSFile-102"><a href="#OPUSFile-102"><span class="linenos">102</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_data</span><span class="p">()</span>
</span><span id="OPUSFile-103"><a href="#OPUSFile-103"><span class="linenos">103</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span> <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span><span class="p">]</span>
</span><span id="OPUSFile-104"><a href="#OPUSFile-104"><span class="linenos">104</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="p">)</span>
</span><span id="OPUSFile-105"><a href="#OPUSFile-105"><span class="linenos">105</span></a>
</span><span id="OPUSFile-106"><a href="#OPUSFile-106"><span class="linenos">106</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-107"><a href="#OPUSFile-107"><span class="linenos">107</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Moves the directory `FileBlock` into the directory attribute.&#39;&#39;&#39;</span>
</span><span id="OPUSFile-108"><a href="#OPUSFile-108"><span class="linenos">108</span></a>        <span class="n">dir_block</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_directory</span><span class="p">()][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="OPUSFile-109"><a href="#OPUSFile-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">dir_block</span>
</span><span id="OPUSFile-110"><a href="#OPUSFile-110"><span class="linenos">110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">([</span><span class="n">dir_block</span><span class="p">])</span>
</span><span id="OPUSFile-111"><a href="#OPUSFile-111"><span class="linenos">111</span></a>
</span><span id="OPUSFile-112"><a href="#OPUSFile-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_param</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="OPUSFile-113"><a href="#OPUSFile-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Sets `Parameter` attributes (`self.params`, `self.rf_params`) from directory blocks and removes them from</span>
</span><span id="OPUSFile-114"><a href="#OPUSFile-114"><span class="linenos">114</span></a><span class="sd">        the directory.&#39;&#39;&#39;</span>
</span><span id="OPUSFile-115"><a href="#OPUSFile-115"><span class="linenos">115</span></a>        <span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">is_param</span><span class="p">)()</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">]</span>
</span><span id="OPUSFile-116"><a href="#OPUSFile-116"><span class="linenos">116</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">blocks</span><span class="p">))</span>
</span><span id="OPUSFile-117"><a href="#OPUSFile-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span>
</span><span id="OPUSFile-118"><a href="#OPUSFile-118"><span class="linenos">118</span></a>
</span><span id="OPUSFile-119"><a href="#OPUSFile-119"><span class="linenos">119</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-120"><a href="#OPUSFile-120"><span class="linenos">120</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Sets the history attribute to the parsed history (file_log) data and removes the block.&#39;&#39;&#39;</span>
</span><span id="OPUSFile-121"><a href="#OPUSFile-121"><span class="linenos">121</span></a>        <span class="n">hist_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_file_log</span><span class="p">()]</span>
</span><span id="OPUSFile-122"><a href="#OPUSFile-122"><span class="linenos">122</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hist_blocks</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="OPUSFile-123"><a href="#OPUSFile-123"><span class="linenos">123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">special_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">special_blocks</span> <span class="o">+</span> <span class="n">hist_blocks</span>
</span><span id="OPUSFile-124"><a href="#OPUSFile-124"><span class="linenos">124</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">b</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">hist_blocks</span><span class="p">])</span>
</span><span id="OPUSFile-125"><a href="#OPUSFile-125"><span class="linenos">125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="n">hist_blocks</span><span class="p">)</span>
</span><span id="OPUSFile-126"><a href="#OPUSFile-126"><span class="linenos">126</span></a>
</span><span id="OPUSFile-127"><a href="#OPUSFile-127"><span class="linenos">127</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_unused_data_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">):</span>
</span><span id="OPUSFile-128"><a href="#OPUSFile-128"><span class="linenos">128</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a shorthand attribute key for the data_block type. If key already exists&#39;&#39;&#39;</span>
</span><span id="OPUSFile-129"><a href="#OPUSFile-129"><span class="linenos">129</span></a>        <span class="n">key</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="OPUSFile-130"><a href="#OPUSFile-130"><span class="linenos">130</span></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">:</span>
</span><span id="OPUSFile-131"><a href="#OPUSFile-131"><span class="linenos">131</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
</span><span id="OPUSFile-132"><a href="#OPUSFile-132"><span class="linenos">132</span></a>                <span class="n">sub_key</span> <span class="o">=</span> <span class="n">key</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="OPUSFile-133"><a href="#OPUSFile-133"><span class="linenos">133</span></a>                <span class="k">if</span> <span class="n">sub_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">:</span>
</span><span id="OPUSFile-134"><a href="#OPUSFile-134"><span class="linenos">134</span></a>                    <span class="n">key</span> <span class="o">=</span> <span class="n">sub_key</span>
</span><span id="OPUSFile-135"><a href="#OPUSFile-135"><span class="linenos">135</span></a>                    <span class="k">break</span>
</span><span id="OPUSFile-136"><a href="#OPUSFile-136"><span class="linenos">136</span></a>        <span class="k">return</span> <span class="n">key</span>
</span><span id="OPUSFile-137"><a href="#OPUSFile-137"><span class="linenos">137</span></a>
</span><span id="OPUSFile-138"><a href="#OPUSFile-138"><span class="linenos">138</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_data_vel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">):</span>
</span><span id="OPUSFile-139"><a href="#OPUSFile-139"><span class="linenos">139</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Get the mirror velocity setting for the data `Fileblock` (based on whether it is reference or sample)&#39;&#39;&#39;</span>
</span><span id="OPUSFile-140"><a href="#OPUSFile-140"><span class="linenos">140</span></a>        <span class="k">if</span> <span class="n">data_block</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s1">&#39;vel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="OPUSFile-141"><a href="#OPUSFile-141"><span class="linenos">141</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span><span class="o">.</span><span class="n">vel</span>
</span><span id="OPUSFile-142"><a href="#OPUSFile-142"><span class="linenos">142</span></a>        <span class="k">elif</span> <span class="n">data_block</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s1">&#39;vel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="OPUSFile-143"><a href="#OPUSFile-143"><span class="linenos">143</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vel</span>
</span><span id="OPUSFile-144"><a href="#OPUSFile-144"><span class="linenos">144</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile-145"><a href="#OPUSFile-145"><span class="linenos">145</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="OPUSFile-146"><a href="#OPUSFile-146"><span class="linenos">146</span></a>
</span><span id="OPUSFile-147"><a href="#OPUSFile-147"><span class="linenos">147</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-148"><a href="#OPUSFile-148"><span class="linenos">148</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Pairs data and data_series `Fileblock`, sets all `Data` and `DataSeries` attributes, and removes the blocks</span>
</span><span id="OPUSFile-149"><a href="#OPUSFile-149"><span class="linenos">149</span></a><span class="sd">        from the directory. Unmatched blocks are moved to `unmached_data_blocks` or `unmatched_data_status_blocks`&#39;&#39;&#39;</span>
</span><span id="OPUSFile-150"><a href="#OPUSFile-150"><span class="linenos">150</span></a>        <span class="n">matches</span> <span class="o">=</span> <span class="n">pair_data_and_status_blocks</span><span class="p">([</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span><span class="p">])</span>
</span><span id="OPUSFile-151"><a href="#OPUSFile-151"><span class="linenos">151</span></a>        <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
</span><span id="OPUSFile-152"><a href="#OPUSFile-152"><span class="linenos">152</span></a>            <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unused_data_key</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="OPUSFile-153"><a href="#OPUSFile-153"><span class="linenos">153</span></a>            <span class="n">vel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_vel</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="OPUSFile-154"><a href="#OPUSFile-154"><span class="linenos">154</span></a>            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="OPUSFile-155"><a href="#OPUSFile-155"><span class="linenos">155</span></a>                <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data</span>
</span><span id="OPUSFile-156"><a href="#OPUSFile-156"><span class="linenos">156</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-157"><a href="#OPUSFile-157"><span class="linenos">157</span></a>            <span class="k">elif</span> <span class="n">data</span><span class="o">.</span><span class="n">is_data_series</span><span class="p">():</span>
</span><span id="OPUSFile-158"><a href="#OPUSFile-158"><span class="linenos">158</span></a>                <span class="n">data_class</span> <span class="o">=</span> <span class="n">DataSeries</span>
</span><span id="OPUSFile-159"><a href="#OPUSFile-159"><span class="linenos">159</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-160"><a href="#OPUSFile-160"><span class="linenos">160</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data_class</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">vel</span><span class="o">=</span><span class="n">vel</span><span class="p">))</span>
</span><span id="OPUSFile-161"><a href="#OPUSFile-161"><span class="linenos">161</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-162"><a href="#OPUSFile-162"><span class="linenos">162</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">([</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">])</span>
</span><span id="OPUSFile-163"><a href="#OPUSFile-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_data</span><span class="p">()</span> <span class="ow">or</span> <span class="n">b</span><span class="o">.</span><span class="n">is_data_series</span><span class="p">()]</span>
</span><span id="OPUSFile-164"><a href="#OPUSFile-164"><span class="linenos">164</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_blocks</span><span class="p">)</span>
</span><span id="OPUSFile-165"><a href="#OPUSFile-165"><span class="linenos">165</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_status_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">()]</span>
</span><span id="OPUSFile-166"><a href="#OPUSFile-166"><span class="linenos">166</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_status_blocks</span><span class="p">)</span>
</span><span id="OPUSFile-167"><a href="#OPUSFile-167"><span class="linenos">167</span></a>
</span><span id="OPUSFile-168"><a href="#OPUSFile-168"><span class="linenos">168</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="OPUSFile-169"><a href="#OPUSFile-169"><span class="linenos">169</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Removes blocks from the directory whose data has been stored elsewhere in class (e.g. params, data, etc.).&#39;&#39;&#39;</span>
</span><span id="OPUSFile-170"><a href="#OPUSFile-170"><span class="linenos">170</span></a>        <span class="n">starts</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">]</span>
</span><span id="OPUSFile-171"><a href="#OPUSFile-171"><span class="linenos">171</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">start</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">starts</span><span class="p">]</span>
</span><span id="OPUSFile-172"><a href="#OPUSFile-172"><span class="linenos">172</span></a>
</span><span id="OPUSFile-173"><a href="#OPUSFile-173"><span class="linenos">173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-174"><a href="#OPUSFile-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various Data classes from the OPUSFile (excluding DataSeries)&#39;&#39;&#39;</span>
</span><span id="OPUSFile-175"><a href="#OPUSFile-175"><span class="linenos">175</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">:</span>
</span><span id="OPUSFile-176"><a href="#OPUSFile-176"><span class="linenos">176</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-177"><a href="#OPUSFile-177"><span class="linenos">177</span></a>
</span><span id="OPUSFile-178"><a href="#OPUSFile-178"><span class="linenos">178</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_series</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-179"><a href="#OPUSFile-179"><span class="linenos">179</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various DataSeries classes from the OPUSFile (excluding Data)&#39;&#39;&#39;</span>
</span><span id="OPUSFile-180"><a href="#OPUSFile-180"><span class="linenos">180</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span><span class="p">:</span>
</span><span id="OPUSFile-181"><a href="#OPUSFile-181"><span class="linenos">181</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-182"><a href="#OPUSFile-182"><span class="linenos">182</span></a>
</span><span id="OPUSFile-183"><a href="#OPUSFile-183"><span class="linenos">183</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-184"><a href="#OPUSFile-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields all the various Data and DataSeries classes from the OPUSFile&#39;&#39;&#39;</span>
</span><span id="OPUSFile-185"><a href="#OPUSFile-185"><span class="linenos">185</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">:</span>
</span><span id="OPUSFile-186"><a href="#OPUSFile-186"><span class="linenos">186</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-187"><a href="#OPUSFile-187"><span class="linenos">187</span></a>    
</span><span id="OPUSFile-188"><a href="#OPUSFile-188"><span class="linenos">188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">print_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">value_width</span><span class="o">=</span><span class="mi">53</span><span class="p">):</span>
</span><span id="OPUSFile-189"><a href="#OPUSFile-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Prints all the parameter metadata to the console (organized by block)&#39;&#39;&#39;</span>
</span><span id="OPUSFile-190"><a href="#OPUSFile-190"><span class="linenos">190</span></a>        <span class="n">width</span> <span class="o">=</span> <span class="n">key_width</span> <span class="o">+</span> <span class="n">label_width</span> <span class="o">+</span> <span class="n">value_width</span>
</span><span id="OPUSFile-191"><a href="#OPUSFile-191"><span class="linenos">191</span></a>        <span class="n">col_widths</span> <span class="o">=</span> <span class="p">(</span><span class="n">key_width</span><span class="p">,</span> <span class="n">label_width</span><span class="p">,</span> <span class="n">value_width</span><span class="p">)</span>
</span><span id="OPUSFile-192"><a href="#OPUSFile-192"><span class="linenos">192</span></a>        <span class="n">param_infos</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Sample/Result Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Reference Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;rf_params&#39;</span><span class="p">)]</span>
</span><span id="OPUSFile-193"><a href="#OPUSFile-193"><span class="linenos">193</span></a>        <span class="k">for</span> <span class="n">title</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">param_infos</span><span class="p">:</span>
</span><span id="OPUSFile-194"><a href="#OPUSFile-194"><span class="linenos">194</span></a>            <span class="n">_print_block_header</span><span class="p">(</span><span class="n">title</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">attr</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
</span><span id="OPUSFile-195"><a href="#OPUSFile-195"><span class="linenos">195</span></a>            <span class="n">blocks</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span><span class="o">.</span><span class="n">blocks</span>
</span><span id="OPUSFile-196"><a href="#OPUSFile-196"><span class="linenos">196</span></a>            <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">:</span>
</span><span id="OPUSFile-197"><a href="#OPUSFile-197"><span class="linenos">197</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="OPUSFile-198"><a href="#OPUSFile-198"><span class="linenos">198</span></a>                <span class="n">_print_block_header</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</span><span id="OPUSFile-199"><a href="#OPUSFile-199"><span class="linenos">199</span></a>                <span class="n">_print_cols</span><span class="p">((</span><span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="OPUSFile-200"><a href="#OPUSFile-200"><span class="linenos">200</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
</span><span id="OPUSFile-201"><a href="#OPUSFile-201"><span class="linenos">201</span></a>                    <span class="n">label</span> <span class="o">=</span> <span class="n">get_param_label</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-202"><a href="#OPUSFile-202"><span class="linenos">202</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">),</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-203"><a href="#OPUSFile-203"><span class="linenos">203</span></a>                    <span class="n">_print_cols</span><span class="p">((</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">label</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Class that contains the data and metadata contained in a bruker OPUS file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath:</strong>  full path to the OPUS file to be parsed. Can be a string or Path object and is required to initilize
an <code><a href="#OPUSFile">OPUSFile</a></code> object.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>is_opus:</strong>  True if filepath points to an OPUS file, False otherwise. Also returned for dunder <code>__bool__()</code></li>
<li><strong>filepath:</strong>  full path pointing to the OPUS file</li>
<li><strong>params:</strong>  class containing all general parameter metadata for the OPUS file. To save typing, the
three char parameters from params also become attributes of the <code><a href="#OPUSFile">OPUSFile</a></code> class (e.g. bms, apt, src)  </li>
<li><strong>rf_params:</strong>  class containing all reference parameter metadata for the OPUS file </li>
<li><strong>data_keys:</strong>  list of all <code><a href="#Data">Data</a></code> attributes stored in the file (e.g. sm, rf, t, a, r, igsm, igrf, phsm, etc.).
This only includes 1D data (i.e. omits <code><a href="#DataSeries">DataSeries</a></code>).</li>
<li><strong>series_keys:</strong>  list of all <code><a href="#DataSeries">DataSeries</a></code> attributes stored in the file (e.g. sm, rf, t, a, igsm, phsm, etc.).
This only includes data series (i.e. omits 1D <code><a href="#Data">Data</a></code>).</li>
<li><strong>all_data_keys:</strong>  list of all <code><a href="#Data">Data</a></code> and <code><a href="#DataSeries">DataSeries</a></code> attributes stored in the file (1D and series comingled).</li>
<li><strong>datetime:</strong>  Returns the most recent datetime of all the data blocks stored in the file (typically result spectra)</li>
<li><strong>directory:</strong>  <code>FileDirectory</code> class containing information about all the various data blocks in the file.</li>
<li><strong>history:</strong>  History (file-log) containing text about how the file was generated/edited (not always saved)</li>
<li><strong>unmatched_data_blocks:</strong>  list of data <code>FileBlock</code> that were not uniquely matched to a data status block</li>
<li><strong>unmatched_data_status_blocks:</strong>  list of data status <code>FileBlock</code> that were not uniquely matched to a data block</li>
<li><strong>unknown_blocks:</strong>  list of <code>FileBlock</code> that were not parsed and/or assigned to attributes into the class</li>
</ul>

<h6 id="data-attributes">Data Attributes:</h6>

<blockquote>
  <p><strong>sm:</strong> Single-channel sample spectra
  <strong>rf:</strong> Single-channel reference spectra
  <strong>igsm:</strong> Sample interferogram
  <strong>igrf:</strong> Reference interferogram
  <strong>phsm:</strong> Sample phase
  <strong>phrf:</strong> Reference phase
  <strong>a:</strong> Absorbance
  <strong>t:</strong> Transmittance
  <strong>r:</strong> Reflectance
  <strong>km:</strong> Kubelka-Munk
  <strong>tr:</strong> Trace (Intensity over Time)
  <strong>gcig:</strong> gc File (Series of Interferograms)
  <strong>gcsc:</strong> gc File (Series of Spectra)
  <strong>ra:</strong> Raman
  <strong>e:</strong> Emission
  <strong>pw:</strong> Power
  <strong>logr:</strong> log(Reflectance)
  <strong>atr:</strong> ATR
  <strong>pas:</strong> Photoacoustic</p>
</blockquote>
</div>


                            <div id="OPUSFile.__init__" class="classattr">
                                        <input id="OPUSFile.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">OPUSFile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filepath</span></span>)</span>

                <label class="view-source-button" for="OPUSFile.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.__init__-80"><a href="#OPUSFile.__init__-80"><span class="linenos"> 80</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
</span><span id="OPUSFile.__init__-81"><a href="#OPUSFile.__init__-81"><span class="linenos"> 81</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Note: a list of `FileBlock` is initially loaded and parsed using the `FileDirectory` class.  This list is</span>
</span><span id="OPUSFile.__init__-82"><a href="#OPUSFile.__init__-82"><span class="linenos"> 82</span></a><span class="sd">        located in `OPUSFile.directory.blocks`. After parsing all the file blocks (performed by the `FileBlock` class),</span>
</span><span id="OPUSFile.__init__-83"><a href="#OPUSFile.__init__-83"><span class="linenos"> 83</span></a><span class="sd">        data from those blocks are saved to various attributes within the `OPUSFile` class.  Subsequently, the block is</span>
</span><span id="OPUSFile.__init__-84"><a href="#OPUSFile.__init__-84"><span class="linenos"> 84</span></a><span class="sd">        removed from `OPUSFile.directory.blocks` to eliminate redundant data and reduce memory footprint.&#39;&#39;&#39;</span>
</span><span id="OPUSFile.__init__-85"><a href="#OPUSFile.__init__-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
</span><span id="OPUSFile.__init__-86"><a href="#OPUSFile.__init__-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="OPUSFile.__init__-87"><a href="#OPUSFile.__init__-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-88"><a href="#OPUSFile.__init__-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-89"><a href="#OPUSFile.__init__-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-90"><a href="#OPUSFile.__init__-90"><span class="linenos"> 90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-91"><a href="#OPUSFile.__init__-91"><span class="linenos"> 91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">special_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-92"><a href="#OPUSFile.__init__-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-93"><a href="#OPUSFile.__init__-93"><span class="linenos"> 93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unmatched_data_status_blocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-94"><a href="#OPUSFile.__init__-94"><span class="linenos"> 94</span></a>        <span class="n">filebytes</span> <span class="o">=</span> <span class="n">read_opus_file_bytes</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-95"><a href="#OPUSFile.__init__-95"><span class="linenos"> 95</span></a>        <span class="k">if</span> <span class="n">filebytes</span><span class="p">:</span>
</span><span id="OPUSFile.__init__-96"><a href="#OPUSFile.__init__-96"><span class="linenos"> 96</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="OPUSFile.__init__-97"><a href="#OPUSFile.__init__-97"><span class="linenos"> 97</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">FileDirectory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-98"><a href="#OPUSFile.__init__-98"><span class="linenos"> 98</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_directory</span><span class="p">()</span>
</span><span id="OPUSFile.__init__-99"><a href="#OPUSFile.__init__-99"><span class="linenos"> 99</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_params</span><span class="p">(</span><span class="s1">&#39;rf_params&#39;</span><span class="p">,</span> <span class="s1">&#39;is_rf_param&#39;</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-100"><a href="#OPUSFile.__init__-100"><span class="linenos">100</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_params</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;is_sm_param&#39;</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-101"><a href="#OPUSFile.__init__-101"><span class="linenos">101</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_history</span><span class="p">()</span>
</span><span id="OPUSFile.__init__-102"><a href="#OPUSFile.__init__-102"><span class="linenos">102</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init_data</span><span class="p">()</span>
</span><span id="OPUSFile.__init__-103"><a href="#OPUSFile.__init__-103"><span class="linenos">103</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span> <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">blocks</span><span class="p">]</span>
</span><span id="OPUSFile.__init__-104"><a href="#OPUSFile.__init__-104"><span class="linenos">104</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_remove_blocks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Note: a list of <code>FileBlock</code> is initially loaded and parsed using the <code>FileDirectory</code> class.  This list is
located in <code>OPUSFile.directory.blocks</code>. After parsing all the file blocks (performed by the <code>FileBlock</code> class),
data from those blocks are saved to various attributes within the <code><a href="#OPUSFile">OPUSFile</a></code> class.  Subsequently, the block is
removed from <code>OPUSFile.directory.blocks</code> to eliminate redundant data and reduce memory footprint.</p>
</div>


                            </div>
                            <div id="OPUSFile.filepath" class="classattr">
                                <div class="attr variable">
            <span class="name">filepath</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.filepath"></a>
    
    

                            </div>
                            <div id="OPUSFile.is_opus" class="classattr">
                                <div class="attr variable">
            <span class="name">is_opus</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.is_opus"></a>
    
    

                            </div>
                            <div id="OPUSFile.data_keys" class="classattr">
                                <div class="attr variable">
            <span class="name">data_keys</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.data_keys"></a>
    
    

                            </div>
                            <div id="OPUSFile.series_keys" class="classattr">
                                <div class="attr variable">
            <span class="name">series_keys</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.series_keys"></a>
    
    

                            </div>
                            <div id="OPUSFile.all_data_keys" class="classattr">
                                <div class="attr variable">
            <span class="name">all_data_keys</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.all_data_keys"></a>
    
    

                            </div>
                            <div id="OPUSFile.unknown_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">unknown_blocks</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.unknown_blocks"></a>
    
    

                            </div>
                            <div id="OPUSFile.special_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">special_blocks</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.special_blocks"></a>
    
    

                            </div>
                            <div id="OPUSFile.unmatched_data_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">unmatched_data_blocks</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.unmatched_data_blocks"></a>
    
    

                            </div>
                            <div id="OPUSFile.unmatched_data_status_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">unmatched_data_status_blocks</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.unmatched_data_status_blocks"></a>
    
    

                            </div>
                            <div id="OPUSFile.iter_data" class="classattr">
                                        <input id="OPUSFile.iter_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">iter_data</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OPUSFile.iter_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.iter_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.iter_data-173"><a href="#OPUSFile.iter_data-173"><span class="linenos">173</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile.iter_data-174"><a href="#OPUSFile.iter_data-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various Data classes from the OPUSFile (excluding DataSeries)&#39;&#39;&#39;</span>
</span><span id="OPUSFile.iter_data-175"><a href="#OPUSFile.iter_data-175"><span class="linenos">175</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">:</span>
</span><span id="OPUSFile.iter_data-176"><a href="#OPUSFile.iter_data-176"><span class="linenos">176</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generator that yields the various Data classes from the OPUSFile (excluding DataSeries)</p>
</div>


                            </div>
                            <div id="OPUSFile.iter_series" class="classattr">
                                        <input id="OPUSFile.iter_series-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">iter_series</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OPUSFile.iter_series-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.iter_series"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.iter_series-178"><a href="#OPUSFile.iter_series-178"><span class="linenos">178</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_series</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile.iter_series-179"><a href="#OPUSFile.iter_series-179"><span class="linenos">179</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various DataSeries classes from the OPUSFile (excluding Data)&#39;&#39;&#39;</span>
</span><span id="OPUSFile.iter_series-180"><a href="#OPUSFile.iter_series-180"><span class="linenos">180</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">series_keys</span><span class="p">:</span>
</span><span id="OPUSFile.iter_series-181"><a href="#OPUSFile.iter_series-181"><span class="linenos">181</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generator that yields the various DataSeries classes from the OPUSFile (excluding Data)</p>
</div>


                            </div>
                            <div id="OPUSFile.iter_all_data" class="classattr">
                                        <input id="OPUSFile.iter_all_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">iter_all_data</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OPUSFile.iter_all_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.iter_all_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.iter_all_data-183"><a href="#OPUSFile.iter_all_data-183"><span class="linenos">183</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">iter_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile.iter_all_data-184"><a href="#OPUSFile.iter_all_data-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields all the various Data and DataSeries classes from the OPUSFile&#39;&#39;&#39;</span>
</span><span id="OPUSFile.iter_all_data-185"><a href="#OPUSFile.iter_all_data-185"><span class="linenos">185</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_data_keys</span><span class="p">:</span>
</span><span id="OPUSFile.iter_all_data-186"><a href="#OPUSFile.iter_all_data-186"><span class="linenos">186</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generator that yields all the various Data and DataSeries classes from the OPUSFile</p>
</div>


                            </div>
                            <div id="OPUSFile.print_parameters" class="classattr">
                                        <input id="OPUSFile.print_parameters-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_parameters</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key_width</span><span class="o">=</span><span class="mi">7</span>, </span><span class="param"><span class="n">label_width</span><span class="o">=</span><span class="mi">40</span>, </span><span class="param"><span class="n">value_width</span><span class="o">=</span><span class="mi">53</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OPUSFile.print_parameters-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.print_parameters"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.print_parameters-188"><a href="#OPUSFile.print_parameters-188"><span class="linenos">188</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">print_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">value_width</span><span class="o">=</span><span class="mi">53</span><span class="p">):</span>
</span><span id="OPUSFile.print_parameters-189"><a href="#OPUSFile.print_parameters-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Prints all the parameter metadata to the console (organized by block)&#39;&#39;&#39;</span>
</span><span id="OPUSFile.print_parameters-190"><a href="#OPUSFile.print_parameters-190"><span class="linenos">190</span></a>        <span class="n">width</span> <span class="o">=</span> <span class="n">key_width</span> <span class="o">+</span> <span class="n">label_width</span> <span class="o">+</span> <span class="n">value_width</span>
</span><span id="OPUSFile.print_parameters-191"><a href="#OPUSFile.print_parameters-191"><span class="linenos">191</span></a>        <span class="n">col_widths</span> <span class="o">=</span> <span class="p">(</span><span class="n">key_width</span><span class="p">,</span> <span class="n">label_width</span><span class="p">,</span> <span class="n">value_width</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-192"><a href="#OPUSFile.print_parameters-192"><span class="linenos">192</span></a>        <span class="n">param_infos</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Sample/Result Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Reference Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;rf_params&#39;</span><span class="p">)]</span>
</span><span id="OPUSFile.print_parameters-193"><a href="#OPUSFile.print_parameters-193"><span class="linenos">193</span></a>        <span class="k">for</span> <span class="n">title</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">param_infos</span><span class="p">:</span>
</span><span id="OPUSFile.print_parameters-194"><a href="#OPUSFile.print_parameters-194"><span class="linenos">194</span></a>            <span class="n">_print_block_header</span><span class="p">(</span><span class="n">title</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">attr</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-195"><a href="#OPUSFile.print_parameters-195"><span class="linenos">195</span></a>            <span class="n">blocks</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span><span class="o">.</span><span class="n">blocks</span>
</span><span id="OPUSFile.print_parameters-196"><a href="#OPUSFile.print_parameters-196"><span class="linenos">196</span></a>            <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">:</span>
</span><span id="OPUSFile.print_parameters-197"><a href="#OPUSFile.print_parameters-197"><span class="linenos">197</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-198"><a href="#OPUSFile.print_parameters-198"><span class="linenos">198</span></a>                <span class="n">_print_block_header</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-199"><a href="#OPUSFile.print_parameters-199"><span class="linenos">199</span></a>                <span class="n">_print_cols</span><span class="p">((</span><span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-200"><a href="#OPUSFile.print_parameters-200"><span class="linenos">200</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
</span><span id="OPUSFile.print_parameters-201"><a href="#OPUSFile.print_parameters-201"><span class="linenos">201</span></a>                    <span class="n">label</span> <span class="o">=</span> <span class="n">get_param_label</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-202"><a href="#OPUSFile.print_parameters-202"><span class="linenos">202</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">),</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-203"><a href="#OPUSFile.print_parameters-203"><span class="linenos">203</span></a>                    <span class="n">_print_cols</span><span class="p">((</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">label</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Prints all the parameter metadata to the console (organized by block)</p>
</div>


                            </div>
                </section>
                <section id="Parameters">
                            <input id="Parameters-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Parameters</span>:

                <label class="view-source-button" for="Parameters-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters-206"><a href="#Parameters-206"><span class="linenos">206</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Parameters</span><span class="p">:</span>
</span><span id="Parameters-207"><a href="#Parameters-207"><span class="linenos">207</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing parameter metadata of an OPUS file.</span>
</span><span id="Parameters-208"><a href="#Parameters-208"><span class="linenos">208</span></a>
</span><span id="Parameters-209"><a href="#Parameters-209"><span class="linenos">209</span></a><span class="sd">    Parameters of an OPUS file are stored as key, val pairs, where the key is always three chars.  For example, the</span>
</span><span id="Parameters-210"><a href="#Parameters-210"><span class="linenos">210</span></a><span class="sd">    beamsplitter is stored in the `bms` attribute, source in `src` etc.  A list of known keys, with friendly label can</span>
</span><span id="Parameters-211"><a href="#Parameters-211"><span class="linenos">211</span></a><span class="sd">    be found in `brukeropus.file.constants.PARAM_LABELS`.  The keys in an OPUS file are not case sensitive, and stored</span>
</span><span id="Parameters-212"><a href="#Parameters-212"><span class="linenos">212</span></a><span class="sd">    in all CAPS (i.e. `BMS`, `SRC`, etc.) but this class uses lower case keys to follow python convention.  The class is</span>
</span><span id="Parameters-213"><a href="#Parameters-213"><span class="linenos">213</span></a><span class="sd">    initialized from a list of `FileBlock` parsed as parameters.  The key, val items in blocks of the list are combined</span>
</span><span id="Parameters-214"><a href="#Parameters-214"><span class="linenos">214</span></a><span class="sd">    into one parameter class, so care must be taken not to pass blocks that will overwrite each others keys.  Analagous</span>
</span><span id="Parameters-215"><a href="#Parameters-215"><span class="linenos">215</span></a><span class="sd">    to a dict, the keys, values, and (key, val) can be iterated over using the functions: `keys()`, `values()`, and</span>
</span><span id="Parameters-216"><a href="#Parameters-216"><span class="linenos">216</span></a><span class="sd">    `items()` respectively.</span>
</span><span id="Parameters-217"><a href="#Parameters-217"><span class="linenos">217</span></a>
</span><span id="Parameters-218"><a href="#Parameters-218"><span class="linenos">218</span></a><span class="sd">    Args:</span>
</span><span id="Parameters-219"><a href="#Parameters-219"><span class="linenos">219</span></a><span class="sd">        blocks: list of `FileBlock`; that has been parsed as parameters.</span>
</span><span id="Parameters-220"><a href="#Parameters-220"><span class="linenos">220</span></a>
</span><span id="Parameters-221"><a href="#Parameters-221"><span class="linenos">221</span></a><span class="sd">    Attributes:</span>
</span><span id="Parameters-222"><a href="#Parameters-222"><span class="linenos">222</span></a><span class="sd">        xxx: parameter attributes are stored as three char keys. Which keys are generated depends on the list of</span>
</span><span id="Parameters-223"><a href="#Parameters-223"><span class="linenos">223</span></a><span class="sd">            `FileBlock` that is used to initialize the class. If input list contains a single data status</span>
</span><span id="Parameters-224"><a href="#Parameters-224"><span class="linenos">224</span></a><span class="sd">            `FileBlock`, attributes will include: `fxv`, `lxv`, `npt` (first x-val, last x-val, number of points),</span>
</span><span id="Parameters-225"><a href="#Parameters-225"><span class="linenos">225</span></a><span class="sd">            etc. Other blocks produce attributes such as: `bms`, `src`, `apt` (beamsplitter, source, aperture) etc. A</span>
</span><span id="Parameters-226"><a href="#Parameters-226"><span class="linenos">226</span></a><span class="sd">            full list of keys available in a given `Parameters` instance are given by the `keys()` method.</span>
</span><span id="Parameters-227"><a href="#Parameters-227"><span class="linenos">227</span></a><span class="sd">        datetime: if blocks contain the keys: `dat` (date) and `tim` (time), the `datetime` attribute of this class will</span>
</span><span id="Parameters-228"><a href="#Parameters-228"><span class="linenos">228</span></a><span class="sd">            be set to a python `datetime` object. Currently, only data status blocks are known to have these keys. If</span>
</span><span id="Parameters-229"><a href="#Parameters-229"><span class="linenos">229</span></a><span class="sd">            `dat` and `tim` are not present in the class, the `datetime` attribute will return `None`.</span>
</span><span id="Parameters-230"><a href="#Parameters-230"><span class="linenos">230</span></a><span class="sd">        blocks: list of `FileBlock` with data removed to save memory (keys saved for reference)</span>
</span><span id="Parameters-231"><a href="#Parameters-231"><span class="linenos">231</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="Parameters-232"><a href="#Parameters-232"><span class="linenos">232</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_params&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="s1">&#39;blocks&#39;</span><span class="p">)</span>
</span><span id="Parameters-233"><a href="#Parameters-233"><span class="linenos">233</span></a>
</span><span id="Parameters-234"><a href="#Parameters-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Parameters-235"><a href="#Parameters-235"><span class="linenos">235</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="Parameters-236"><a href="#Parameters-236"><span class="linenos">236</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span> <span class="ow">is</span> <span class="n">FileBlock</span><span class="p">:</span>
</span><span id="Parameters-237"><a href="#Parameters-237"><span class="linenos">237</span></a>            <span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">blocks</span><span class="p">]</span>
</span><span id="Parameters-238"><a href="#Parameters-238"><span class="linenos">238</span></a>        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">:</span>
</span><span id="Parameters-239"><a href="#Parameters-239"><span class="linenos">239</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="Parameters-240"><a href="#Parameters-240"><span class="linenos">240</span></a>            <span class="n">block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters-241"><a href="#Parameters-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">blocks</span>
</span><span id="Parameters-242"><a href="#Parameters-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_datetime</span><span class="p">()</span>
</span><span id="Parameters-243"><a href="#Parameters-243"><span class="linenos">243</span></a>
</span><span id="Parameters-244"><a href="#Parameters-244"><span class="linenos">244</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Parameters-245"><a href="#Parameters-245"><span class="linenos">245</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Parameters-246"><a href="#Parameters-246"><span class="linenos">246</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
</span><span id="Parameters-247"><a href="#Parameters-247"><span class="linenos">247</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parameters-248"><a href="#Parameters-248"><span class="linenos">248</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; not a valid attribute. For list of valid parameter keys, use: .keys()&#39;</span>
</span><span id="Parameters-249"><a href="#Parameters-249"><span class="linenos">249</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="Parameters-250"><a href="#Parameters-250"><span class="linenos">250</span></a>
</span><span id="Parameters-251"><a href="#Parameters-251"><span class="linenos">251</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span id="Parameters-252"><a href="#Parameters-252"><span class="linenos">252</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="Parameters-253"><a href="#Parameters-253"><span class="linenos">253</span></a>
</span><span id="Parameters-254"><a href="#Parameters-254"><span class="linenos">254</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_set_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-255"><a href="#Parameters-255"><span class="linenos">255</span></a>        <span class="k">if</span> <span class="s1">&#39;dat&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39;tim&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Parameters-256"><a href="#Parameters-256"><span class="linenos">256</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Parameters-257"><a href="#Parameters-257"><span class="linenos">257</span></a>                <span class="n">date_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dat</span>
</span><span id="Parameters-258"><a href="#Parameters-258"><span class="linenos">258</span></a>                <span class="n">time_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tim</span>
</span><span id="Parameters-259"><a href="#Parameters-259"><span class="linenos">259</span></a>                <span class="n">dt_str</span> <span class="o">=</span> <span class="n">date_str</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">time_str</span><span class="p">[:</span><span class="n">time_str</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39; (&#39;</span><span class="p">)]</span>
</span><span id="Parameters-260"><a href="#Parameters-260"><span class="linenos">260</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Parameters-261"><a href="#Parameters-261"><span class="linenos">261</span></a>                    <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="Parameters-262"><a href="#Parameters-262"><span class="linenos">262</span></a>                    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="Parameters-263"><a href="#Parameters-263"><span class="linenos">263</span></a>                <span class="k">except</span><span class="p">:</span>
</span><span id="Parameters-264"><a href="#Parameters-264"><span class="linenos">264</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="Parameters-265"><a href="#Parameters-265"><span class="linenos">265</span></a>                        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%Y/%m/</span><span class="si">%d</span><span class="s1">-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="Parameters-266"><a href="#Parameters-266"><span class="linenos">266</span></a>                        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="Parameters-267"><a href="#Parameters-267"><span class="linenos">267</span></a>                    <span class="k">except</span><span class="p">:</span>
</span><span id="Parameters-268"><a href="#Parameters-268"><span class="linenos">268</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters-269"><a href="#Parameters-269"><span class="linenos">269</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">dt</span>
</span><span id="Parameters-270"><a href="#Parameters-270"><span class="linenos">270</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="Parameters-271"><a href="#Parameters-271"><span class="linenos">271</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters-272"><a href="#Parameters-272"><span class="linenos">272</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parameters-273"><a href="#Parameters-273"><span class="linenos">273</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters-274"><a href="#Parameters-274"><span class="linenos">274</span></a>
</span><span id="Parameters-275"><a href="#Parameters-275"><span class="linenos">275</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-276"><a href="#Parameters-276"><span class="linenos">276</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_keys` class of all valid keys in the class (i.e. dict.keys())&#39;&#39;&#39;</span>
</span><span id="Parameters-277"><a href="#Parameters-277"><span class="linenos">277</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="Parameters-278"><a href="#Parameters-278"><span class="linenos">278</span></a>
</span><span id="Parameters-279"><a href="#Parameters-279"><span class="linenos">279</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-280"><a href="#Parameters-280"><span class="linenos">280</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_values` class of all the values in the class (i.e. dict.values())&#39;&#39;&#39;</span>
</span><span id="Parameters-281"><a href="#Parameters-281"><span class="linenos">281</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="Parameters-282"><a href="#Parameters-282"><span class="linenos">282</span></a>
</span><span id="Parameters-283"><a href="#Parameters-283"><span class="linenos">283</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-284"><a href="#Parameters-284"><span class="linenos">284</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_items` class of all the values in the class (i.e. dict.items())&#39;&#39;&#39;</span>
</span><span id="Parameters-285"><a href="#Parameters-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Class containing parameter metadata of an OPUS file.</p>

<p>Parameters of an OPUS file are stored as key, val pairs, where the key is always three chars.  For example, the
beamsplitter is stored in the <code>bms</code> attribute, source in <code>src</code> etc.  A list of known keys, with friendly label can
be found in <code><a href="constants.html#PARAM_LABELS">brukeropus.file.constants.PARAM_LABELS</a></code>.  The keys in an OPUS file are not case sensitive, and stored
in all CAPS (i.e. <code>BMS</code>, <code>SRC</code>, etc.) but this class uses lower case keys to follow python convention.  The class is
initialized from a list of <code>FileBlock</code> parsed as parameters.  The key, val items in blocks of the list are combined
into one parameter class, so care must be taken not to pass blocks that will overwrite each others keys.  Analagous
to a dict, the keys, values, and (key, val) can be iterated over using the functions: <code><a href="#Parameters.keys">keys()</a></code>, <code><a href="#Parameters.values">values()</a></code>, and
<code><a href="#Parameters.items">items()</a></code> respectively.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>blocks:</strong>  list of <code>FileBlock</code>; that has been parsed as parameters.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>xxx:</strong>  parameter attributes are stored as three char keys. Which keys are generated depends on the list of
<code>FileBlock</code> that is used to initialize the class. If input list contains a single data status
<code>FileBlock</code>, attributes will include: <code>fxv</code>, <code>lxv</code>, <code>npt</code> (first x-val, last x-val, number of points),
etc. Other blocks produce attributes such as: <code>bms</code>, <code>src</code>, <code>apt</code> (beamsplitter, source, aperture) etc. A
full list of keys available in a given <code><a href="#Parameters">Parameters</a></code> instance are given by the <code><a href="#Parameters.keys">keys()</a></code> method.</li>
<li><strong>datetime:</strong>  if blocks contain the keys: <code>dat</code> (date) and <code>tim</code> (time), the <code><a href="#Parameters.datetime">datetime</a></code> attribute of this class will
be set to a python <code><a href="#Parameters.datetime">datetime</a></code> object. Currently, only data status blocks are known to have these keys. If
<code>dat</code> and <code>tim</code> are not present in the class, the <code><a href="#Parameters.datetime">datetime</a></code> attribute will return <code>None</code>.</li>
<li><strong>blocks:</strong>  list of <code>FileBlock</code> with data removed to save memory (keys saved for reference)</li>
</ul>
</div>


                            <div id="Parameters.__init__" class="classattr">
                                        <input id="Parameters.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Parameters</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">blocks</span><span class="p">:</span> <span class="nb">list</span></span>)</span>

                <label class="view-source-button" for="Parameters.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.__init__-234"><a href="#Parameters.__init__-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Parameters.__init__-235"><a href="#Parameters.__init__-235"><span class="linenos">235</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="Parameters.__init__-236"><a href="#Parameters.__init__-236"><span class="linenos">236</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">blocks</span><span class="p">)</span> <span class="ow">is</span> <span class="n">FileBlock</span><span class="p">:</span>
</span><span id="Parameters.__init__-237"><a href="#Parameters.__init__-237"><span class="linenos">237</span></a>            <span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">blocks</span><span class="p">]</span>
</span><span id="Parameters.__init__-238"><a href="#Parameters.__init__-238"><span class="linenos">238</span></a>        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">blocks</span><span class="p">:</span>
</span><span id="Parameters.__init__-239"><a href="#Parameters.__init__-239"><span class="linenos">239</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="Parameters.__init__-240"><a href="#Parameters.__init__-240"><span class="linenos">240</span></a>            <span class="n">block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters.__init__-241"><a href="#Parameters.__init__-241"><span class="linenos">241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">blocks</span>
</span><span id="Parameters.__init__-242"><a href="#Parameters.__init__-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_datetime</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Parameters.blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">blocks</span>

        
    </div>
    <a class="headerlink" href="#Parameters.blocks"></a>
    
    

                            </div>
                            <div id="Parameters.keys" class="classattr">
                                        <input id="Parameters.keys-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">keys</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parameters.keys-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.keys"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.keys-275"><a href="#Parameters.keys-275"><span class="linenos">275</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters.keys-276"><a href="#Parameters.keys-276"><span class="linenos">276</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_keys` class of all valid keys in the class (i.e. dict.keys())&#39;&#39;&#39;</span>
</span><span id="Parameters.keys-277"><a href="#Parameters.keys-277"><span class="linenos">277</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns a <code>dict_keys</code> class of all valid keys in the class (i.e. dict.keys())</p>
</div>


                            </div>
                            <div id="Parameters.values" class="classattr">
                                        <input id="Parameters.values-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">values</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parameters.values-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.values"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.values-279"><a href="#Parameters.values-279"><span class="linenos">279</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters.values-280"><a href="#Parameters.values-280"><span class="linenos">280</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_values` class of all the values in the class (i.e. dict.values())&#39;&#39;&#39;</span>
</span><span id="Parameters.values-281"><a href="#Parameters.values-281"><span class="linenos">281</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns a <code>dict_values</code> class of all the values in the class (i.e. dict.values())</p>
</div>


                            </div>
                            <div id="Parameters.items" class="classattr">
                                        <input id="Parameters.items-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">items</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parameters.items-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.items"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.items-283"><a href="#Parameters.items-283"><span class="linenos">283</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters.items-284"><a href="#Parameters.items-284"><span class="linenos">284</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_items` class of all the values in the class (i.e. dict.items())&#39;&#39;&#39;</span>
</span><span id="Parameters.items-285"><a href="#Parameters.items-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns a <code>dict_items</code> class of all the values in the class (i.e. dict.items())</p>
</div>


                            </div>
                            <div id="Parameters.datetime" class="classattr">
                                <div class="attr variable">
            <span class="name">datetime</span>

        
    </div>
    <a class="headerlink" href="#Parameters.datetime"></a>
    
    

                            </div>
                </section>
                <section id="Data">
                            <input id="Data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Data</span>:

                <label class="view-source-button" for="Data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Data-288"><a href="#Data-288"><span class="linenos">288</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Data</span><span class="p">:</span>
</span><span id="Data-289"><a href="#Data-289"><span class="linenos">289</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing array data and associated parameter/metadata from an OPUS file.</span>
</span><span id="Data-290"><a href="#Data-290"><span class="linenos">290</span></a>
</span><span id="Data-291"><a href="#Data-291"><span class="linenos">291</span></a><span class="sd">    Args:</span>
</span><span id="Data-292"><a href="#Data-292"><span class="linenos">292</span></a><span class="sd">        data_block: parsed `FileBlock` instance of a data block</span>
</span><span id="Data-293"><a href="#Data-293"><span class="linenos">293</span></a><span class="sd">        data_status_block: `parsed FileBlock` instance of a data status block which contains metadata about the data</span>
</span><span id="Data-294"><a href="#Data-294"><span class="linenos">294</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="Data-295"><a href="#Data-295"><span class="linenos">295</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="Data-296"><a href="#Data-296"><span class="linenos">296</span></a><span class="sd">        vel: mirror velocity setting for the measurement (from param or rf_param block as appropriate)</span>
</span><span id="Data-297"><a href="#Data-297"><span class="linenos">297</span></a>
</span><span id="Data-298"><a href="#Data-298"><span class="linenos">298</span></a><span class="sd">    Attributes:</span>
</span><span id="Data-299"><a href="#Data-299"><span class="linenos">299</span></a><span class="sd">        params: `Parameter` class with metadata associated with the data block such as first x point: `fxp`, last x</span>
</span><span id="Data-300"><a href="#Data-300"><span class="linenos">300</span></a><span class="sd">            point: `lxp`, number of points: `npt`, date: `dat`, time: `tim` etc.</span>
</span><span id="Data-301"><a href="#Data-301"><span class="linenos">301</span></a><span class="sd">        y: 1D `numpy` array containing y values of data block</span>
</span><span id="Data-302"><a href="#Data-302"><span class="linenos">302</span></a><span class="sd">        x: 1D `numpy` array containing x values of data block. Units of x array are given by `dxu` parameter.</span>
</span><span id="Data-303"><a href="#Data-303"><span class="linenos">303</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="Data-304"><a href="#Data-304"><span class="linenos">304</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="Data-305"><a href="#Data-305"><span class="linenos">305</span></a><span class="sd">        vel: mirror velocity setting for the measurement (used to calculate modulation frequency)</span>
</span><span id="Data-306"><a href="#Data-306"><span class="linenos">306</span></a><span class="sd">        block: data `FileBlock` used to generate the `Data` class</span>
</span><span id="Data-307"><a href="#Data-307"><span class="linenos">307</span></a><span class="sd">        blocks: [data, data_status] `FileBlock` used to generate the `Data` class</span>
</span><span id="Data-308"><a href="#Data-308"><span class="linenos">308</span></a>
</span><span id="Data-309"><a href="#Data-309"><span class="linenos">309</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="Data-310"><a href="#Data-310"><span class="linenos">310</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm) units regardless of what units the x array was originally</span>
</span><span id="Data-311"><a href="#Data-311"><span class="linenos">311</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="Data-312"><a href="#Data-312"><span class="linenos">312</span></a><span class="sd">            interferogram or phase blocks.</span>
</span><span id="Data-313"><a href="#Data-313"><span class="linenos">313</span></a><span class="sd">        **wl:** Returns the x array in wavelength (m) units regardless of what units the x array was originally</span>
</span><span id="Data-314"><a href="#Data-314"><span class="linenos">314</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="Data-315"><a href="#Data-315"><span class="linenos">315</span></a><span class="sd">            interferogram or phase blocks.</span>
</span><span id="Data-316"><a href="#Data-316"><span class="linenos">316</span></a><span class="sd">        **f:** Returns the x array in modulation frequency units (Hz) regardless of what units the x array was</span>
</span><span id="Data-317"><a href="#Data-317"><span class="linenos">317</span></a><span class="sd">            originally saved in. This is only valid for spectral data blocks such as sample, reference, transmission,</span>
</span><span id="Data-318"><a href="#Data-318"><span class="linenos">318</span></a><span class="sd">            etc., not interferogram or phase blocks.</span>
</span><span id="Data-319"><a href="#Data-319"><span class="linenos">319</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter</span>
</span><span id="Data-320"><a href="#Data-320"><span class="linenos">320</span></a><span class="sd">            block).  </span>
</span><span id="Data-321"><a href="#Data-321"><span class="linenos">321</span></a><span class="sd">        **xxx:** the various three char parameter keys from the `params` attribute can be directly called from the </span>
</span><span id="Data-322"><a href="#Data-322"><span class="linenos">322</span></a><span class="sd">            `Data` class for convenience. Common parameters include `dxu` (x units), `mxy` (max y value), `mny` (min y</span>
</span><span id="Data-323"><a href="#Data-323"><span class="linenos">323</span></a><span class="sd">            value), etc.</span>
</span><span id="Data-324"><a href="#Data-324"><span class="linenos">324</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="Data-325"><a href="#Data-325"><span class="linenos">325</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="s1">&#39;blocks&#39;</span><span class="p">)</span>
</span><span id="Data-326"><a href="#Data-326"><span class="linenos">326</span></a>
</span><span id="Data-327"><a href="#Data-327"><span class="linenos">327</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">data_status_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vel</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Data-328"><a href="#Data-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="Data-329"><a href="#Data-329"><span class="linenos">329</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">data_status_block</span><span class="p">)</span>
</span><span id="Data-330"><a href="#Data-330"><span class="linenos">330</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">data</span>
</span><span id="Data-331"><a href="#Data-331"><span class="linenos">331</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">csf</span> <span class="o">*</span> <span class="n">y</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="Data-332"><a href="#Data-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="Data-333"><a href="#Data-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="Data-334"><a href="#Data-334"><span class="linenos">334</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">vel</span>
</span><span id="Data-335"><a href="#Data-335"><span class="linenos">335</span></a>        <span class="n">data_block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Data-336"><a href="#Data-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">data_block</span>
</span><span id="Data-337"><a href="#Data-337"><span class="linenos">337</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">blocks</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span><span class="p">]</span>
</span><span id="Data-338"><a href="#Data-338"><span class="linenos">338</span></a>
</span><span id="Data-339"><a href="#Data-339"><span class="linenos">339</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Data-340"><a href="#Data-340"><span class="linenos">340</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wn&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="Data-341"><a href="#Data-341"><span class="linenos">341</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wn</span><span class="p">()</span>
</span><span id="Data-342"><a href="#Data-342"><span class="linenos">342</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wl&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="Data-343"><a href="#Data-343"><span class="linenos">343</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wl</span><span class="p">()</span>
</span><span id="Data-344"><a href="#Data-344"><span class="linenos">344</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="Data-345"><a href="#Data-345"><span class="linenos">345</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_freq</span><span class="p">()</span>
</span><span id="Data-346"><a href="#Data-346"><span class="linenos">346</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Data-347"><a href="#Data-347"><span class="linenos">347</span></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="Data-348"><a href="#Data-348"><span class="linenos">348</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;datetime&#39;</span><span class="p">:</span>
</span><span id="Data-349"><a href="#Data-349"><span class="linenos">349</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">datetime</span>
</span><span id="Data-350"><a href="#Data-350"><span class="linenos">350</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Data-351"><a href="#Data-351"><span class="linenos">351</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; is not a valid attribute for Data: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</span><span id="Data-352"><a href="#Data-352"><span class="linenos">352</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="Data-353"><a href="#Data-353"><span class="linenos">353</span></a>
</span><span id="Data-354"><a href="#Data-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_wn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Data-355"><a href="#Data-355"><span class="linenos">355</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="Data-356"><a href="#Data-356"><span class="linenos">356</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-357"><a href="#Data-357"><span class="linenos">357</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="Data-358"><a href="#Data-358"><span class="linenos">358</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-359"><a href="#Data-359"><span class="linenos">359</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="Data-360"><a href="#Data-360"><span class="linenos">360</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="Data-361"><a href="#Data-361"><span class="linenos">361</span></a>
</span><span id="Data-362"><a href="#Data-362"><span class="linenos">362</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_wl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Data-363"><a href="#Data-363"><span class="linenos">363</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="Data-364"><a href="#Data-364"><span class="linenos">364</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-365"><a href="#Data-365"><span class="linenos">365</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="Data-366"><a href="#Data-366"><span class="linenos">366</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-367"><a href="#Data-367"><span class="linenos">367</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="Data-368"><a href="#Data-368"><span class="linenos">368</span></a>            <span class="k">return</span> <span class="mi">10000</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="Data-369"><a href="#Data-369"><span class="linenos">369</span></a>
</span><span id="Data-370"><a href="#Data-370"><span class="linenos">370</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_freq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Data-371"><a href="#Data-371"><span class="linenos">371</span></a>        <span class="n">vel</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7900</span>  <span class="c1"># cm/s</span>
</span><span id="Data-372"><a href="#Data-372"><span class="linenos">372</span></a>        <span class="k">return</span> <span class="n">vel</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">wn</span>
</span></pre></div>


            <div class="docstring"><p>Class containing array data and associated parameter/metadata from an OPUS file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>data_block:</strong>  parsed <code>FileBlock</code> instance of a data block</li>
<li><strong>data_status_block:</strong>  <code>parsed FileBlock</code> instance of a data status block which contains metadata about the data
block. This block is a parameter block.</li>
<li><strong>key:</strong>  attribute name (string) assigned to the data</li>
<li><strong>vel:</strong>  mirror velocity setting for the measurement (from param or rf_param block as appropriate)</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>params:</strong>  <code>Parameter</code> class with metadata associated with the data block such as first x point: <code>fxp</code>, last x
point: <code>lxp</code>, number of points: <code>npt</code>, date: <code>dat</code>, time: <code>tim</code> etc.</li>
<li><strong>y:</strong>  1D <code>numpy</code> array containing y values of data block</li>
<li><strong>x:</strong>  1D <code>numpy</code> array containing x values of data block. Units of x array are given by <code>dxu</code> parameter.</li>
<li><strong>label:</strong>  human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</li>
<li><strong>key:</strong>  attribute name (string) assigned to the data</li>
<li><strong>vel:</strong>  mirror velocity setting for the measurement (used to calculate modulation frequency)</li>
<li><strong>block:</strong>  data <code>FileBlock</code> used to generate the <code><a href="#Data">Data</a></code> class</li>
<li><strong>blocks:</strong>  [data, data_status] <code>FileBlock</code> used to generate the <code><a href="#Data">Data</a></code> class</li>
</ul>

<h6 id="extended-attributes">Extended Attributes:</h6>

<blockquote>
  <p><strong>wn:</strong> Returns the x array in wavenumber (cm) units regardless of what units the x array was originally
      saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks.
  <strong>wl:</strong> Returns the x array in wavelength (m) units regardless of what units the x array was originally
      saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks.
  <strong>f:</strong> Returns the x array in modulation frequency units (Hz) regardless of what units the x array was
      originally saved in. This is only valid for spectral data blocks such as sample, reference, transmission,
      etc., not interferogram or phase blocks.
  <strong>datetime:</strong> Returns a <code>datetime</code> class of when the data was taken (extracted from data status parameter
      block).<br />
  <strong>xxx:</strong> the various three char parameter keys from the <code><a href="#Data.params">params</a></code> attribute can be directly called from the 
      <code><a href="#Data">Data</a></code> class for convenience. Common parameters include <code>dxu</code> (x units), <code>mxy</code> (max y value), <code>mny</code> (min y
      value), etc.</p>
</blockquote>
</div>


                            <div id="Data.__init__" class="classattr">
                                        <input id="Data.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Data</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">data_block</span><span class="p">:</span> <span class="n"><a href="block.html#FileBlock">brukeropus.file.block.FileBlock</a></span>,</span><span class="param">	<span class="n">data_status_block</span><span class="p">:</span> <span class="n"><a href="block.html#FileBlock">brukeropus.file.block.FileBlock</a></span>,</span><span class="param">	<span class="n">key</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">vel</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="Data.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Data.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Data.__init__-327"><a href="#Data.__init__-327"><span class="linenos">327</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">data_status_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vel</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Data.__init__-328"><a href="#Data.__init__-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="Data.__init__-329"><a href="#Data.__init__-329"><span class="linenos">329</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">data_status_block</span><span class="p">)</span>
</span><span id="Data.__init__-330"><a href="#Data.__init__-330"><span class="linenos">330</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">data</span>
</span><span id="Data.__init__-331"><a href="#Data.__init__-331"><span class="linenos">331</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">csf</span> <span class="o">*</span> <span class="n">y</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="Data.__init__-332"><a href="#Data.__init__-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="Data.__init__-333"><a href="#Data.__init__-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="Data.__init__-334"><a href="#Data.__init__-334"><span class="linenos">334</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">vel</span>
</span><span id="Data.__init__-335"><a href="#Data.__init__-335"><span class="linenos">335</span></a>        <span class="n">data_block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Data.__init__-336"><a href="#Data.__init__-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">data_block</span>
</span><span id="Data.__init__-337"><a href="#Data.__init__-337"><span class="linenos">337</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">blocks</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="Data.key" class="classattr">
                                <div class="attr variable">
            <span class="name">key</span>

        
    </div>
    <a class="headerlink" href="#Data.key"></a>
    
    

                            </div>
                            <div id="Data.params" class="classattr">
                                <div class="attr variable">
            <span class="name">params</span>

        
    </div>
    <a class="headerlink" href="#Data.params"></a>
    
    

                            </div>
                            <div id="Data.y" class="classattr">
                                <div class="attr variable">
            <span class="name">y</span>

        
    </div>
    <a class="headerlink" href="#Data.y"></a>
    
    

                            </div>
                            <div id="Data.x" class="classattr">
                                <div class="attr variable">
            <span class="name">x</span>

        
    </div>
    <a class="headerlink" href="#Data.x"></a>
    
    

                            </div>
                            <div id="Data.label" class="classattr">
                                <div class="attr variable">
            <span class="name">label</span>

        
    </div>
    <a class="headerlink" href="#Data.label"></a>
    
    

                            </div>
                            <div id="Data.vel" class="classattr">
                                <div class="attr variable">
            <span class="name">vel</span>

        
    </div>
    <a class="headerlink" href="#Data.vel"></a>
    
    

                            </div>
                            <div id="Data.block" class="classattr">
                                <div class="attr variable">
            <span class="name">block</span>

        
    </div>
    <a class="headerlink" href="#Data.block"></a>
    
    

                            </div>
                            <div id="Data.blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">blocks</span>

        
    </div>
    <a class="headerlink" href="#Data.blocks"></a>
    
    

                            </div>
                </section>
                <section id="DataSeries">
                            <input id="DataSeries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DataSeries</span><wbr>(<span class="base"><a href="#Data">Data</a></span>):

                <label class="view-source-button" for="DataSeries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DataSeries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DataSeries-375"><a href="#DataSeries-375"><span class="linenos">375</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DataSeries</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
</span><span id="DataSeries-376"><a href="#DataSeries-376"><span class="linenos">376</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing a data series (3D specra) and associated parameter/metadata from an OPUS file.</span>
</span><span id="DataSeries-377"><a href="#DataSeries-377"><span class="linenos">377</span></a>
</span><span id="DataSeries-378"><a href="#DataSeries-378"><span class="linenos">378</span></a><span class="sd">    Args:</span>
</span><span id="DataSeries-379"><a href="#DataSeries-379"><span class="linenos">379</span></a><span class="sd">        data_block: parsed `FileBlock` instance of a data block</span>
</span><span id="DataSeries-380"><a href="#DataSeries-380"><span class="linenos">380</span></a><span class="sd">        data_status_block: `parsed FileBlock` instance of a data status block which contains metadata about the data</span>
</span><span id="DataSeries-381"><a href="#DataSeries-381"><span class="linenos">381</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="DataSeries-382"><a href="#DataSeries-382"><span class="linenos">382</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="DataSeries-383"><a href="#DataSeries-383"><span class="linenos">383</span></a><span class="sd">        vel: mirror velocity setting for measurement (from param or rf_param block as appropriate)</span>
</span><span id="DataSeries-384"><a href="#DataSeries-384"><span class="linenos">384</span></a>
</span><span id="DataSeries-385"><a href="#DataSeries-385"><span class="linenos">385</span></a><span class="sd">    Attributes:</span>
</span><span id="DataSeries-386"><a href="#DataSeries-386"><span class="linenos">386</span></a><span class="sd">        params: `Parameter` class with metadata associated with the data block such as first x point: `fxp`, last x</span>
</span><span id="DataSeries-387"><a href="#DataSeries-387"><span class="linenos">387</span></a><span class="sd">            point: `lxp`, number of points: `npt`, date: `dat`, time: `tim` etc.</span>
</span><span id="DataSeries-388"><a href="#DataSeries-388"><span class="linenos">388</span></a><span class="sd">        y: 2D numpy array containing y values of data block</span>
</span><span id="DataSeries-389"><a href="#DataSeries-389"><span class="linenos">389</span></a><span class="sd">        x: 1D numpy array containing x values of data block. Units of x array are given by `.dxu` attribute.</span>
</span><span id="DataSeries-390"><a href="#DataSeries-390"><span class="linenos">390</span></a><span class="sd">        num_spectra: number of spectra in the series (i.e. length of y)</span>
</span><span id="DataSeries-391"><a href="#DataSeries-391"><span class="linenos">391</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="DataSeries-392"><a href="#DataSeries-392"><span class="linenos">392</span></a><span class="sd">        key: attribute name (string) assigned to the data</span>
</span><span id="DataSeries-393"><a href="#DataSeries-393"><span class="linenos">393</span></a><span class="sd">        vel: mirror velocity setting for measurement (used to calculate modulation frequency)</span>
</span><span id="DataSeries-394"><a href="#DataSeries-394"><span class="linenos">394</span></a><span class="sd">        block: data `FileBlock` used to generate the `DataSeries` class</span>
</span><span id="DataSeries-395"><a href="#DataSeries-395"><span class="linenos">395</span></a><span class="sd">        blocks: [data, data_status] `FileBlock` used to generate the `DataSeries` class</span>
</span><span id="DataSeries-396"><a href="#DataSeries-396"><span class="linenos">396</span></a>
</span><span id="DataSeries-397"><a href="#DataSeries-397"><span class="linenos">397</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="DataSeries-398"><a href="#DataSeries-398"><span class="linenos">398</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm) units regardless of what units the x array was originally saved</span>
</span><span id="DataSeries-399"><a href="#DataSeries-399"><span class="linenos">399</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="DataSeries-400"><a href="#DataSeries-400"><span class="linenos">400</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="DataSeries-401"><a href="#DataSeries-401"><span class="linenos">401</span></a><span class="sd">        **wl:** Returns the x array in wavelength (m) units regardless of what units the x array was originally saved</span>
</span><span id="DataSeries-402"><a href="#DataSeries-402"><span class="linenos">402</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="DataSeries-403"><a href="#DataSeries-403"><span class="linenos">403</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="DataSeries-404"><a href="#DataSeries-404"><span class="linenos">404</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter</span>
</span><span id="DataSeries-405"><a href="#DataSeries-405"><span class="linenos">405</span></a><span class="sd">            block).  </span>
</span><span id="DataSeries-406"><a href="#DataSeries-406"><span class="linenos">406</span></a><span class="sd">        **xxx:** the various three char parameter keys from the `params` attribute can be directly called from the data</span>
</span><span id="DataSeries-407"><a href="#DataSeries-407"><span class="linenos">407</span></a><span class="sd">            class for convenience. Several of these parameters return arrays, rather than singular values because they</span>
</span><span id="DataSeries-408"><a href="#DataSeries-408"><span class="linenos">408</span></a><span class="sd">            are recorded for every spectra in the series, e.g. `npt`, `mny`, `mxy`, `srt`, &#39;ert&#39;, `nsn`.</span>
</span><span id="DataSeries-409"><a href="#DataSeries-409"><span class="linenos">409</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="DataSeries-410"><a href="#DataSeries-410"><span class="linenos">410</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="s1">&#39;blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;num_spectra&#39;</span><span class="p">)</span>
</span><span id="DataSeries-411"><a href="#DataSeries-411"><span class="linenos">411</span></a>
</span><span id="DataSeries-412"><a href="#DataSeries-412"><span class="linenos">412</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">data_status_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vel</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="DataSeries-413"><a href="#DataSeries-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="DataSeries-414"><a href="#DataSeries-414"><span class="linenos">414</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">data_status_block</span><span class="p">)</span>
</span><span id="DataSeries-415"><a href="#DataSeries-415"><span class="linenos">415</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">data</span>
</span><span id="DataSeries-416"><a href="#DataSeries-416"><span class="linenos">416</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][:,</span> <span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="DataSeries-417"><a href="#DataSeries-417"><span class="linenos">417</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="DataSeries-418"><a href="#DataSeries-418"><span class="linenos">418</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_spectra</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_blocks&#39;</span><span class="p">]</span>
</span><span id="DataSeries-419"><a href="#DataSeries-419"><span class="linenos">419</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="DataSeries-420"><a href="#DataSeries-420"><span class="linenos">420</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_size&#39;</span><span class="p">,</span> <span class="s1">&#39;info_size&#39;</span><span class="p">]:</span>
</span><span id="DataSeries-421"><a href="#DataSeries-421"><span class="linenos">421</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</span><span id="DataSeries-422"><a href="#DataSeries-422"><span class="linenos">422</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="DataSeries-423"><a href="#DataSeries-423"><span class="linenos">423</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">vel</span>
</span><span id="DataSeries-424"><a href="#DataSeries-424"><span class="linenos">424</span></a>        <span class="n">data_block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DataSeries-425"><a href="#DataSeries-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">data_block</span>
</span><span id="DataSeries-426"><a href="#DataSeries-426"><span class="linenos">426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">blocks</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Class containing a data series (3D specra) and associated parameter/metadata from an OPUS file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>data_block:</strong>  parsed <code>FileBlock</code> instance of a data block</li>
<li><strong>data_status_block:</strong>  <code>parsed FileBlock</code> instance of a data status block which contains metadata about the data
block. This block is a parameter block.</li>
<li><strong>key:</strong>  attribute name (string) assigned to the data</li>
<li><strong>vel:</strong>  mirror velocity setting for measurement (from param or rf_param block as appropriate)</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>params:</strong>  <code>Parameter</code> class with metadata associated with the data block such as first x point: <code>fxp</code>, last x
point: <code>lxp</code>, number of points: <code>npt</code>, date: <code>dat</code>, time: <code>tim</code> etc.</li>
<li><strong>y:</strong>  2D numpy array containing y values of data block</li>
<li><strong>x:</strong>  1D numpy array containing x values of data block. Units of x array are given by <code>.dxu</code> attribute.</li>
<li><strong>num_spectra:</strong>  number of spectra in the series (i.e. length of y)</li>
<li><strong>label:</strong>  human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</li>
<li><strong>key:</strong>  attribute name (string) assigned to the data</li>
<li><strong>vel:</strong>  mirror velocity setting for measurement (used to calculate modulation frequency)</li>
<li><strong>block:</strong>  data <code>FileBlock</code> used to generate the <code><a href="#DataSeries">DataSeries</a></code> class</li>
<li><strong>blocks:</strong>  [data, data_status] <code>FileBlock</code> used to generate the <code><a href="#DataSeries">DataSeries</a></code> class</li>
</ul>

<h6 id="extended-attributes">Extended Attributes:</h6>

<blockquote>
  <p><strong>wn:</strong> Returns the x array in wavenumber (cm) units regardless of what units the x array was originally saved
      in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks.<br />
  <strong>wl:</strong> Returns the x array in wavelength (m) units regardless of what units the x array was originally saved
      in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks.<br />
  <strong>datetime:</strong> Returns a <code>datetime</code> class of when the data was taken (extracted from data status parameter
      block).<br />
  <strong>xxx:</strong> the various three char parameter keys from the <code><a href="#DataSeries.params">params</a></code> attribute can be directly called from the data
      class for convenience. Several of these parameters return arrays, rather than singular values because they
      are recorded for every spectra in the series, e.g. <code>npt</code>, <code>mny</code>, <code>mxy</code>, <code>srt</code>, 'ert', <code>nsn</code>.</p>
</blockquote>
</div>


                            <div id="DataSeries.__init__" class="classattr">
                                        <input id="DataSeries.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">DataSeries</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">data_block</span><span class="p">:</span> <span class="n"><a href="block.html#FileBlock">brukeropus.file.block.FileBlock</a></span>,</span><span class="param">	<span class="n">data_status_block</span><span class="p">:</span> <span class="n"><a href="block.html#FileBlock">brukeropus.file.block.FileBlock</a></span>,</span><span class="param">	<span class="n">key</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">vel</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="DataSeries.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DataSeries.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DataSeries.__init__-412"><a href="#DataSeries.__init__-412"><span class="linenos">412</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">data_status_block</span><span class="p">:</span> <span class="n">FileBlock</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vel</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="DataSeries.__init__-413"><a href="#DataSeries.__init__-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="DataSeries.__init__-414"><a href="#DataSeries.__init__-414"><span class="linenos">414</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">data_status_block</span><span class="p">)</span>
</span><span id="DataSeries.__init__-415"><a href="#DataSeries.__init__-415"><span class="linenos">415</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">data</span>
</span><span id="DataSeries.__init__-416"><a href="#DataSeries.__init__-416"><span class="linenos">416</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][:,</span> <span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="DataSeries.__init__-417"><a href="#DataSeries.__init__-417"><span class="linenos">417</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="DataSeries.__init__-418"><a href="#DataSeries.__init__-418"><span class="linenos">418</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_spectra</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_blocks&#39;</span><span class="p">]</span>
</span><span id="DataSeries.__init__-419"><a href="#DataSeries.__init__-419"><span class="linenos">419</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="DataSeries.__init__-420"><a href="#DataSeries.__init__-420"><span class="linenos">420</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_size&#39;</span><span class="p">,</span> <span class="s1">&#39;info_size&#39;</span><span class="p">]:</span>
</span><span id="DataSeries.__init__-421"><a href="#DataSeries.__init__-421"><span class="linenos">421</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</span><span id="DataSeries.__init__-422"><a href="#DataSeries.__init__-422"><span class="linenos">422</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_block</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="DataSeries.__init__-423"><a href="#DataSeries.__init__-423"><span class="linenos">423</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">vel</span>
</span><span id="DataSeries.__init__-424"><a href="#DataSeries.__init__-424"><span class="linenos">424</span></a>        <span class="n">data_block</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="DataSeries.__init__-425"><a href="#DataSeries.__init__-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">data_block</span>
</span><span id="DataSeries.__init__-426"><a href="#DataSeries.__init__-426"><span class="linenos">426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">blocks</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">block</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="DataSeries.key" class="classattr">
                                <div class="attr variable">
            <span class="name">key</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.key"></a>
    
    

                            </div>
                            <div id="DataSeries.params" class="classattr">
                                <div class="attr variable">
            <span class="name">params</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.params"></a>
    
    

                            </div>
                            <div id="DataSeries.y" class="classattr">
                                <div class="attr variable">
            <span class="name">y</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.y"></a>
    
    

                            </div>
                            <div id="DataSeries.x" class="classattr">
                                <div class="attr variable">
            <span class="name">x</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.x"></a>
    
    

                            </div>
                            <div id="DataSeries.num_spectra" class="classattr">
                                <div class="attr variable">
            <span class="name">num_spectra</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.num_spectra"></a>
    
    

                            </div>
                            <div id="DataSeries.label" class="classattr">
                                <div class="attr variable">
            <span class="name">label</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.label"></a>
    
    

                            </div>
                            <div id="DataSeries.vel" class="classattr">
                                <div class="attr variable">
            <span class="name">vel</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.vel"></a>
    
    

                            </div>
                            <div id="DataSeries.block" class="classattr">
                                <div class="attr variable">
            <span class="name">block</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.block"></a>
    
    

                            </div>
                            <div id="DataSeries.blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">blocks</span>

        
    </div>
    <a class="headerlink" href="#DataSeries.blocks"></a>
    
    

                            </div>
                </section>
                <section id="read_opus">
                            <input id="read_opus-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">read_opus</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n"><a href="#OPUSFile">OPUSFile</a></span>:</span></span>

                <label class="view-source-button" for="read_opus-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#read_opus"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="read_opus-429"><a href="#read_opus-429"><span class="linenos">429</span></a><span class="k">def</span><span class="w"> </span><span class="nf">read_opus</span><span class="p">(</span><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OPUSFile</span><span class="p">:</span>
</span><span id="read_opus-430"><a href="#read_opus-430"><span class="linenos">430</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Return an `OPUSFile` object from an OPUS file filepath.</span>
</span><span id="read_opus-431"><a href="#read_opus-431"><span class="linenos">431</span></a>
</span><span id="read_opus-432"><a href="#read_opus-432"><span class="linenos">432</span></a><span class="sd">    The following produces identical results:</span>
</span><span id="read_opus-433"><a href="#read_opus-433"><span class="linenos">433</span></a><span class="sd">        ```python</span>
</span><span id="read_opus-434"><a href="#read_opus-434"><span class="linenos">434</span></a><span class="sd">        data = read_opus(filepath)</span>
</span><span id="read_opus-435"><a href="#read_opus-435"><span class="linenos">435</span></a><span class="sd">        data = OPUSFile(filepath)</span>
</span><span id="read_opus-436"><a href="#read_opus-436"><span class="linenos">436</span></a><span class="sd">        ```</span>
</span><span id="read_opus-437"><a href="#read_opus-437"><span class="linenos">437</span></a><span class="sd">    Args:</span>
</span><span id="read_opus-438"><a href="#read_opus-438"><span class="linenos">438</span></a><span class="sd">        filepath (str or Path): filepath of an OPUS file (typically *.0)</span>
</span><span id="read_opus-439"><a href="#read_opus-439"><span class="linenos">439</span></a>
</span><span id="read_opus-440"><a href="#read_opus-440"><span class="linenos">440</span></a><span class="sd">    Returns:</span>
</span><span id="read_opus-441"><a href="#read_opus-441"><span class="linenos">441</span></a><span class="sd">        opus_file: an instance of the `OPUSFile` class containing all data/metadata extracted from the file.</span>
</span><span id="read_opus-442"><a href="#read_opus-442"><span class="linenos">442</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="read_opus-443"><a href="#read_opus-443"><span class="linenos">443</span></a>    <span class="k">return</span> <span class="n">OPUSFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return an <code><a href="#OPUSFile">OPUSFile</a></code> object from an OPUS file filepath.</p>

<h6 id="the-following-produces-identical-results">The following produces identical results:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="n">read_opus</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">OPUSFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</code></pre>
  </div>
</blockquote>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str or Path):</strong>  filepath of an OPUS file (typically *.0)</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>opus_file: an instance of the <code><a href="#OPUSFile">OPUSFile</a></code> class containing all data/metadata extracted from the file.</p>
</blockquote>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>