<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.4.0"/>
    <title>brukeropus.file.file API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../file.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;brukeropus.file</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#read_opus">read_opus</a>
            </li>
            <li>
                    <a class="class" href="#OPUSFile">OPUSFile</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OPUSFile.__init__">OPUSFile</a>
                        </li>
                        <li>
                                <a class="variable" href="#OPUSFile.filepath">filepath</a>
                        </li>
                        <li>
                                <a class="function" href="#OPUSFile.print_parameters">print_parameters</a>
                        </li>
                        <li>
                                <a class="function" href="#OPUSFile.iter_data">iter_data</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FileBlockInfo">FileBlockInfo</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FileBlockInfo.__init__">FileBlockInfo</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileBlockInfo.keys">keys</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileBlockInfo.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileBlockInfo.size">size</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileBlockInfo.start">start</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_data_status">is_data_status</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_rf_param">is_rf_param</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_param">is_param</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_directory">is_directory</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_file_log">is_file_log</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_data">is_data</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_3d_data">is_3d_data</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.is_data_status_match">is_data_status_match</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.get_label">get_label</a>
                        </li>
                        <li>
                                <a class="function" href="#FileBlockInfo.get_data_key">get_data_key</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileBlockInfo.bytes">bytes</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Data">Data</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Data.__init__">Data</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.params">params</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.y">y</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.x">x</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.label">label</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data.vel">vel</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Data3D">Data3D</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Data3D.__init__">Data3D</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data3D.params">params</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data3D.y">y</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data3D.x">x</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data3D.num_spectra">num_spectra</a>
                        </li>
                        <li>
                                <a class="variable" href="#Data3D.label">label</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Parameters">Parameters</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Parameters.__init__">Parameters</a>
                        </li>
                        <li>
                                <a class="function" href="#Parameters.keys">keys</a>
                        </li>
                        <li>
                                <a class="function" href="#Parameters.values">values</a>
                        </li>
                        <li>
                                <a class="function" href="#Parameters.items">items</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameters.datetime">datetime</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FileDirectory">FileDirectory</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FileDirectory.__init__">FileDirectory</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.data_blocks">data_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.data_status_blocks">data_status_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.param_blocks">param_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.rf_param_blocks">rf_param_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.directory_block">directory_block</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.file_log_block">file_log_block</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.unknown_blocks">unknown_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.data_and_status_block_pairs">data_and_status_block_pairs</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.max_blocks">max_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.num_blocks">num_blocks</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.start">start</a>
                        </li>
                        <li>
                                <a class="variable" href="#FileDirectory.version">version</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../brukeropus.html">brukeropus</a><wbr>.<a href="./../file.html">file</a><wbr>.file    </h1>

                
                        <input id="mod-file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-file-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="kn">import</span> <span class="nn">datetime</span><span class="o">,</span> <span class="nn">warnings</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="kn">from</span> <span class="nn">brukeropus.file.utils</span> <span class="kn">import</span> <span class="n">get_block_type_label</span><span class="p">,</span> <span class="n">get_data_key</span><span class="p">,</span> <span class="n">get_param_label</span><span class="p">,</span> <span class="n">_print_block_header</span><span class="p">,</span> <span class="n">_print_cols</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span> <span class="nn">brukeropus.file.parser</span> <span class="kn">import</span> <span class="p">(</span><span class="n">read_opus_file_bytes</span><span class="p">,</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a>                                    <span class="n">parse_header</span><span class="p">,</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a>                                    <span class="n">parse_directory</span><span class="p">,</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>                                    <span class="n">parse_data_block</span><span class="p">,</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>                                    <span class="n">parse_3d_data_block</span><span class="p">,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a>                                    <span class="n">parse_param_block</span><span class="p">,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>                                    <span class="n">parse_file_log</span><span class="p">)</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;google&quot;</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="k">def</span> <span class="nf">read_opus</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Return an `OPUSFile` object from an OPUS file filepath.</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">    The following produces identical results:</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">        ```python</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">        data = read_opus(filepath)</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">        data = OPUSFile(filepath)</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">        ```</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">    Args:</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">        filepath (str or Path): filepath of an OPUS file (typically *.0)</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">    Returns:</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">        opus_file (`OPUSFile`): an instance of the `OPUSFile` class containing all data/metadata extracted from the</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">        file.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>    <span class="k">return</span> <span class="n">OPUSFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="k">class</span> <span class="nc">OPUSFile</span><span class="p">:</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class that contains the data and metadata contained in a bruker OPUS file.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">    Args:</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">        filepath: full path to the OPUS file to be parsed. Can be a string or Path object and is required to initilize</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">            an `OPUSFile` object.</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">    Attributes:</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">        is_opus (`bool`): True if filepath points to an OPUS file, False otherwise. Also returned for dunder </span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">            `__bool__()`  </span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">        params (`Parameters`): class containing all general parameter metadata for the OPUS file. To save typing, the</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">            three char parameters from params also become attributes of the `OPUSFile` class (e.g. bms, apt, src)  </span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">        rf_params (`Parameters`): class containing all reference parameter metadata for the OPUS file.  </span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">        data_keys (list): list of all data block keys stored in the file (i.e. sm, rf, t, a, r, igsm, igrf, phsm, etc.).</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">            These keys become data attributes of the class which return an instance of `Data` or `Data3D`.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">        datetime (`datetime`): Returns the most recent datetime of all the data blocks stored in the file (typically</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">            result spectra)</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">        directory (`FileDirectory`):  class containing information about all the various data blocks in the file.</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">        file_log (str): File log containing text about how the file was generated/edited (not always saved)</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">    Data Attributes:</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">        **sm:** Single-channel sample spectra  </span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">        **rf:** Single-channel reference spectra  </span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">        **igsm:** Sample interferogram  </span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">        **igrf:** Reference interferogram  </span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">        **phsm:** Sample phase  </span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">        **phrf:** Reference phase  </span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">        **a:** Absorbance  </span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">        **t:** Transmittance  </span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">        **r:** Reflectance  </span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">        **km:** Kubelka-Munk  </span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">        **tr:** Trace (Intensity over Time)  </span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">        **gcig:** gc File (Series of Interferograms)  </span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">        **gcsc:** gc File (Series of Spectra)  </span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">        **ra:** Raman  </span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">        **e:** Emission  </span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">        **dir:** Directory  </span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">        **p:** Power  </span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">        **logr:** log(Reflectance)  </span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">        **atr:** ATR  </span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">        **pas:** Photoacoustic  </span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        <span class="n">filebytes</span> <span class="o">=</span> <span class="n">read_opus_file_bytes</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>        <span class="k">if</span> <span class="n">filebytes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">FileDirectory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">param_blocks</span><span class="p">)</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="p">)</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;file_log_block&#39;</span><span class="p">):</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">file_log</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parse_file_log</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>                                                            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">file_log_block</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>                                                            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">file_log_block</span><span class="o">.</span><span class="n">start</span><span class="p">))</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>            <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span><span class="p">:</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>                <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">is_3d_data</span><span class="p">():</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>                    <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data3D</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>                    <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_class</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">data_class</span><span class="o">.</span><span class="n">npt</span><span class="p">:</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>                        <span class="k">break</span>  <span class="c1"># Don&#39;t add data blocks with missing points (rare but observed)</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>                <span class="k">if</span> <span class="s1">&#39;vel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>                    <span class="n">data_class</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vel</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data_class</span><span class="p">)</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span><span class="p">:</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>            <span class="n">data_str</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">)</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>            <span class="k">return</span> <span class="s1">&#39;OPUS File: spectra: &#39;</span> <span class="o">+</span> <span class="n">data_str</span> <span class="o">+</span> <span class="s1">&#39;   path: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>            <span class="k">return</span> <span class="s1">&#39;Not an OPUS file: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;datetime&#39;</span><span class="p">:</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">datetime</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">()</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">datetime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; is not a valid attribute for OPUSFile: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>    <span class="k">def</span> <span class="nf">print_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">value_width</span><span class="o">=</span><span class="mi">53</span><span class="p">):</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Prints all the parameter metadata to the console (organized by block)&#39;&#39;&#39;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>        <span class="n">width</span> <span class="o">=</span> <span class="n">key_width</span> <span class="o">+</span> <span class="n">label_width</span> <span class="o">+</span> <span class="n">value_width</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>        <span class="n">col_widths</span> <span class="o">=</span> <span class="p">(</span><span class="n">key_width</span><span class="p">,</span> <span class="n">label_width</span><span class="p">,</span> <span class="n">value_width</span><span class="p">)</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="n">param_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">param_blocks</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">rf_param_blocks</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">param_blocks</span><span class="p">:</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>            <span class="n">_print_block_header</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>            <span class="n">_print_cols</span><span class="p">((</span><span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">get_param_label</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_rf_param</span><span class="p">():</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>                <span class="n">_print_cols</span><span class="p">((</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">label</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>    <span class="k">def</span> <span class="nf">iter_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various Data classes from the OPUSFile&#39;&#39;&#39;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="k">class</span> <span class="nc">FileBlockInfo</span><span class="p">:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Contains type, size and location information about an OPUS file block.</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="sd">    This information is parsed from the directory block of an OPUS file and provides the information needed to parse the</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="sd">    block.</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="sd">    Args:</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="sd">        block_type: six integer tuple that describes the type of data in the file block</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">        size: size of block in number of bytes</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">        start: pointer to start location of the block within the file.</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">    Attributes:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="sd">        type: six integer tuple that describes the type of data in the file block</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">        size: size of block in number of bytes</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">        start: pointer to start location of the block within the file</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="sd">        keys: tuple of three char keys contained in parameter blocks. This attribute is set by the OPUSFile class only</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="sd">            when the block is parameter block. This enables grouping parameters by block if desired.</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="sd">        bytes: raw bytes of file block (currently only set for unknown blocks)</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;keys&#39;</span><span class="p">,</span> <span class="s1">&#39;bytes&#39;</span><span class="p">)</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>    <span class="n">keys</span><span class="p">:</span> <span class="nb">tuple</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_type</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">block_type</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>        <span class="k">return</span> <span class="s1">&#39;Block Info: &#39;</span> <span class="o">+</span> <span class="n">label</span> <span class="o">+</span> <span class="s1">&#39; (size: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; bytes; start: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">is_data_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data status parameter block&#39;&#39;&#39;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>    <span class="k">def</span> <span class="nf">is_rf_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a parameter block associated with the reference measurement&#39;&#39;&#39;</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">is_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a parameter block&#39;&#39;&#39;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>    <span class="k">def</span> <span class="nf">is_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is the directory block&#39;&#39;&#39;</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>    <span class="k">def</span> <span class="nf">is_file_log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is the file log block&#39;&#39;&#39;</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">is_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data block or 3D data block&#39;&#39;&#39;</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>    <span class="k">def</span> <span class="nf">is_3d_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a 3D data block (i.e. data series)&#39;&#39;&#39;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>    <span class="k">def</span> <span class="nf">is_data_status_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block_info</span><span class="p">):</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data status block and a match to the data_block_info argument.</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">        This function is used to match a data status block (contains metadata for data block) with its associated data</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">        block (contains array data).</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">        Args:</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">            data_block_info (FileBlockInfo):  data block being tested as a match.</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">        Returns:</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">            is_match (bool): True if FileBlockInfo is data status block and input argument is matching data block&#39;&#39;&#39;</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">():</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>            <span class="k">return</span> <span class="n">data_block_info</span><span class="o">.</span><span class="n">type</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="n">data_block_info</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>    <span class="k">def</span> <span class="nf">get_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a friendly string label that describes the block type&#39;&#39;&#39;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>        <span class="k">return</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>    <span class="k">def</span> <span class="nf">get_data_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;If block is a data block, this function will return an shorthand key to reference that data.</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">        e.g. t: transmission, a: absorption, sm: sample, rf: reference, smph: sample phase etc. If the block is not</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">        a data block, it will return None.&#39;&#39;&#39;</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>            <span class="k">return</span> <span class="n">get_data_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a><span class="k">class</span> <span class="nc">Data</span><span class="p">:</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing array data and associated parameter/metadata from an OPUS file.</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">    Args:</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: `read_opus_file_bytes`</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">        data_info: `FileBlockInfo` instance of a data block</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        data_status_info: `FileBlockInfo` instance of a data status block which contains metadata about the data_info</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="sd">    Attributes:</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="sd">        params: `Parameter` class with metadata associated with the data block such as first x point: `fxp`, last x</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">            point: `lxp`, number of points: `npt`, date: `dat`, time: `tim` etc.</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">        y: 1D `numpy` array containing y values of data block</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="sd">        x: 1D `numpy` array containing x values of data block. Units of x array are given by `dxu` parameter.</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm⁻¹) units regardless of what units the x array was originally</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">        **wl:** Returns the x array in wavelength (µm) units regardless of what units the x array was originally</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="sd">        **f:** Returns the x array in modulation frequency units (Hz) regardless of what units the x array was</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">            originally saved in. This is only valid for spectral data blocks such as sample, reference, transmission,</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">            etc., not interferogram or phase blocks.  </span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter block).  </span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="sd">        **xxx:** the various three char parameter keys from the `params` attribute can be directly called from the </span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="sd">            `Data` class for convenience. Common parameters include `dxu` (x units), `mxy` (max y value), `mny` (min y</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="sd">            value), etc.  </span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">data_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">,</span> <span class="n">data_status_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">):</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="p">[</span><span class="n">data_status_info</span><span class="p">])</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">parse_data_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dpf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dpf</span><span class="p">)</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wn&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wn</span><span class="p">()</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wl&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wl</span><span class="p">()</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_freq</span><span class="p">()</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;datetime&#39;</span><span class="p">:</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">datetime</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; is not a valid attribute for Data: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">)</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>    <span class="k">def</span> <span class="nf">_get_wn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="nf">_get_wl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>            <span class="k">return</span> <span class="mi">10000</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>    
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>    <span class="k">def</span> <span class="nf">_get_freq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>        <span class="n">vel</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7900</span>  <span class="c1"># cm/s</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>        <span class="k">return</span> <span class="n">vel</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">wn</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="k">class</span> <span class="nc">Data3D</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing 3D array data (series of spectra) and associated parameter/metadata from an OPUS file.</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">    Args:</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: read_opus_file_bytes</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        data_info: FileBlockInfo instance of a 3D data block</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="sd">        data_status_info: FileBlockInfo instance of a data status block which contains metadata about the data_info</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">    Attributes:</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="sd">        params: Parameter class with metadata associated with the data block such as first x point (fxp), last x point</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a><span class="sd">            (lxp), number of points (npt), date (dat), time (tim) etc.</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a><span class="sd">        y: 2D numpy array containing y values of data block</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a><span class="sd">        x: 1D numpy array containing x values of data block. Units of x array are given by .dxu attribute.</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="sd">        num_spectra: number of spectra in the series (i.e. length of y)</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm⁻¹) units regardless of what units the x array was originally saved</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a><span class="sd">        **wl:** Returns the x array in wavelength (µm) units regardless of what units the x array was originally saved</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="sd">            block).  </span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        **xxx:** the various three char parameter keys from the &quot;params&quot; attribute can be directly called from the data</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">            class for convenience. Several of these parameters return arrays, rather than singular values because they</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">            are recorded for every spectra in the series, e.g. `npt`, `mny`, `mxy`, `tim`, `nsn`.  </span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;num_spectra&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">)</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">data_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">,</span> <span class="n">data_status_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">):</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="p">[</span><span class="n">data_status_info</span><span class="p">])</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">parse_3d_data_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dpf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dpf</span><span class="p">)</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][:,</span> <span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_spectra</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_blocks&#39;</span><span class="p">]</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_size&#39;</span><span class="p">,</span> <span class="s1">&#39;info_size&#39;</span><span class="p">]:</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing parameter metadata of an OPUS file.</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">    Parameters of an OPUS file are stored as key, val pairs, where the key is always three chars.  For example, the</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">    beamsplitter is stored in the &quot;bms&quot; attribute, source in &quot;src&quot; etc.  A list of known keys, with friendly label can</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">    be found in `brukeropus.file.constants.PARAM_LABELS`.  The keys in an OPUS file are not case sensitive, and stored</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a><span class="sd">    in all CAPS (i.e. `BMS`, `SRC`, etc.) but this class uses lower case keys to follow python convention.  The class is</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="sd">    initialized from a list of parameter `FileBlockInfo`.  The key, val items in blocks of the list are combined into</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a><span class="sd">    one parameter class, so care must be taken not to pass blocks that will overwrite each others keys.  Analagous to a</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a><span class="sd">    dict, the keys, values, and (key, val) can be iterated over using the functions: `keys()`, `values()`, and `items()`</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a><span class="sd">    respectively.</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a><span class="sd">    Args:</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: `brukeropus.file.parser.read_opus_file_bytes`</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">        param_blocks: list of `FileBlockInfo`; every block in the list should be classified as a parameter block.</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a><span class="sd">    Attributes:</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a><span class="sd">        xxx: parameter attributes are stored as three char keys. Which keys are generated depends on the list of</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd">            `FileBlockInfo` that is used to initialize the class. If input list contains a single data status</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a><span class="sd">            `FileBlockInfo`, attributes will include: `fxv`, `lxv`, `npt` (first x-val, last x-val, number of points),</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">            etc. Other blocks produce attributes such as: `bms`, `src`, `apt` (beamsplitter, source, aperture) etc. A</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">            full list of keys available in a given Parameters instance are given by the `keys()` method.</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">        datetime: if blocks contain the keys: `dat` (date) and `tim` (time), the `datetime` attribute of this class will</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">            be set to a python `datetime` object. Currently, only data status blocks are known to have these keys. If</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">            `dat` and `tim` are not present in the class, the `datetime` attribute will return `None`.</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_params&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">param_blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>        <span class="k">for</span> <span class="n">block_info</span> <span class="ow">in</span> <span class="n">param_blocks</span><span class="p">:</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">parse_param_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">block_info</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">block_info</span><span class="o">.</span><span class="n">start</span><span class="p">)}</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>            <span class="n">block_info</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_datetime</span><span class="p">()</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; not a valid attribute. For list of valid parameter keys, use: .keys()&#39;</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>    <span class="k">def</span> <span class="nf">_set_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>        <span class="k">if</span> <span class="s1">&#39;dat&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39;tim&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>                <span class="n">date_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dat</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>                <span class="n">time_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tim</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>                <span class="n">dt_str</span> <span class="o">=</span> <span class="n">date_str</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">time_str</span><span class="p">[:</span><span class="n">time_str</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39; (&#39;</span><span class="p">)]</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>                    <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>                    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>                <span class="k">except</span><span class="p">:</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>                        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%Y/%m/</span><span class="si">%d</span><span class="s1">-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>                        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>                    <span class="k">except</span><span class="p">:</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">dt</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_keys` class of all valid keys in the class (i.e. dict.keys())&#39;&#39;&#39;</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_values` class of all the values in the class (i.e. dict.values())&#39;&#39;&#39;</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_items` class of all the values in the class (i.e. dict.items())&#39;&#39;&#39;</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a><span class="k">class</span> <span class="nc">FileDirectory</span><span class="p">:</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Contains type and pointer information for all blocks of data in an OPUS file.</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="sd">    `FileDirectory` information is decoded from the raw file bytes of an OPUS file. First the header is read which</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a><span class="sd">    provides the start location of the directory block, number of blocks in file, and maximum number of blocks the file</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a><span class="sd">    supports. Then it decodes the block pointer information from each entry of the file&#39;s directory block. Rather than</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a><span class="sd">    store all file blocks in a single list (as it is done in the OPUS file directory), this class sorts the blocks into</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a><span class="sd">    categories: `data`, `data_status`, `params`, `rf_params`, `directory`, and `file_log`.  It also pairs the data</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a><span class="sd">    blocks with their corresponding `data_status` block to simplify grouping y data with the parameters that are used to</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a><span class="sd">    generate x data and other data block specific metadata.</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">    Args:</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: `brukeropus.file.parser.read_opus_file_bytes`</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a><span class="sd">    Attributes:</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="sd">        start: pointer to start location of the directory block</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="sd">        max_blocks: maximum number of blocks supported by file</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">        num_blocks: total number of blocks in the file</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">        data_blocks: list of `FileBlockInfo` that contain array data (e.g. sample, reference, phase)</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="sd">        data_status_blocks: list of `FileBlockInfo` that contain metadata specific to a data block (units, etc.)</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="sd">        param_blocks: list of `FileBlockInfo` that contain metadata about the measurement sample</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        rf_param_blocks: list of `FileBlockInfo` that contain metatdata about the reference measurement</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a><span class="sd">        directory_block: `FileBlockInfo` for directory block that contains all the block info in the file</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a><span class="sd">        file_log_block: `FileBlockInfo` of the file log (changes, etc.)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a><span class="sd">        data_and_status_block_pairs: (data: `FileBlockInfo`, data_status: `FileBlockInfo`) which pairs the data status</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a><span class="sd">            parameter block (time, x units, y units, etc.) with the data block it informs</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a><span class="sd">        unknown_blocks: list of `FileBlockInfo` with an unrecognized type (i.e. not sure how to parse)</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;max_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_status_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;param_blocks&#39;</span><span class="p">,</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>                 <span class="s1">&#39;rf_param_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;directory_block&#39;</span><span class="p">,</span> <span class="s1">&#39;file_log_block&#39;</span><span class="p">,</span> <span class="s1">&#39;data_and_status_block_pairs&#39;</span><span class="p">,</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>                 <span class="s1">&#39;unknown_blocks&#39;</span><span class="p">)</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_blocks</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span> <span class="o">=</span> <span class="n">parse_header</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">directory_block</span><span class="p">:</span> <span class="n">FileBlockInfo</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">file_log_block</span><span class="p">:</span> <span class="n">FileBlockInfo</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>        <span class="k">for</span> <span class="n">block_type</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">start</span> <span class="ow">in</span> <span class="n">parse_directory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span><span class="p">):</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>            <span class="n">block</span> <span class="o">=</span> <span class="n">FileBlockInfo</span><span class="p">(</span><span class="n">block_type</span><span class="o">=</span><span class="n">block_type</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>            <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">():</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_rf_param</span><span class="p">():</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_param</span><span class="p">():</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">param_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_directory</span><span class="p">():</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">directory_block</span> <span class="o">=</span> <span class="n">block</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_file_log</span><span class="p">():</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">file_log_block</span> <span class="o">=</span> <span class="n">block</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>                <span class="n">block</span><span class="o">.</span><span class="n">bytes</span> <span class="o">=</span> <span class="n">filebytes</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">start</span><span class="p">:</span><span class="n">block</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">block</span><span class="o">.</span><span class="n">size</span><span class="p">]</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pair_data_and_status_blocks</span><span class="p">()</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>        <span class="n">data_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="p">]</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>        <span class="n">data_str</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_keys</span><span class="p">)</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>        <span class="k">return</span> <span class="s1">&#39;File Directory: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; total blocks; data blocks: (&#39;</span> <span class="o">+</span> <span class="n">data_str</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>    <span class="k">def</span> <span class="nf">_pair_data_and_status_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>        <span class="k">for</span> <span class="n">data_block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="p">:</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>            <span class="n">status_matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span> <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span> <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data_status_match</span><span class="p">(</span><span class="n">data_block</span><span class="p">)]</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">status_matches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>                <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Warning: No data status block match for data block: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">data_block</span><span class="p">)</span> \
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>                    <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">data block will be ignored.&#39;</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">status_matches</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>                <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Warning: Multiple data status block matches for data block: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">data_block</span><span class="p">)</span> \
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>                    <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">Matches:&#39;</span> <span class="o">+</span> <span class="s1">&#39;; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">match</span><span class="p">)</span> <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">status_matches</span><span class="p">])</span> \
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>                    <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">data block will be ignored.&#39;</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">data_block</span><span class="p">,</span> <span class="n">status_matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span></pre></div>


            </section>
                <section id="read_opus">
                            <input id="read_opus-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">read_opus</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filepath</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="read_opus-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#read_opus"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="read_opus-17"><a href="#read_opus-17"><span class="linenos">17</span></a><span class="k">def</span> <span class="nf">read_opus</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
</span><span id="read_opus-18"><a href="#read_opus-18"><span class="linenos">18</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Return an `OPUSFile` object from an OPUS file filepath.</span>
</span><span id="read_opus-19"><a href="#read_opus-19"><span class="linenos">19</span></a>
</span><span id="read_opus-20"><a href="#read_opus-20"><span class="linenos">20</span></a><span class="sd">    The following produces identical results:</span>
</span><span id="read_opus-21"><a href="#read_opus-21"><span class="linenos">21</span></a><span class="sd">        ```python</span>
</span><span id="read_opus-22"><a href="#read_opus-22"><span class="linenos">22</span></a><span class="sd">        data = read_opus(filepath)</span>
</span><span id="read_opus-23"><a href="#read_opus-23"><span class="linenos">23</span></a><span class="sd">        data = OPUSFile(filepath)</span>
</span><span id="read_opus-24"><a href="#read_opus-24"><span class="linenos">24</span></a><span class="sd">        ```</span>
</span><span id="read_opus-25"><a href="#read_opus-25"><span class="linenos">25</span></a><span class="sd">    Args:</span>
</span><span id="read_opus-26"><a href="#read_opus-26"><span class="linenos">26</span></a><span class="sd">        filepath (str or Path): filepath of an OPUS file (typically *.0)</span>
</span><span id="read_opus-27"><a href="#read_opus-27"><span class="linenos">27</span></a>
</span><span id="read_opus-28"><a href="#read_opus-28"><span class="linenos">28</span></a><span class="sd">    Returns:</span>
</span><span id="read_opus-29"><a href="#read_opus-29"><span class="linenos">29</span></a><span class="sd">        opus_file (`OPUSFile`): an instance of the `OPUSFile` class containing all data/metadata extracted from the</span>
</span><span id="read_opus-30"><a href="#read_opus-30"><span class="linenos">30</span></a><span class="sd">        file.</span>
</span><span id="read_opus-31"><a href="#read_opus-31"><span class="linenos">31</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="read_opus-32"><a href="#read_opus-32"><span class="linenos">32</span></a>    <span class="k">return</span> <span class="n">OPUSFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return an <code><a href="#OPUSFile">OPUSFile</a></code> object from an OPUS file filepath.</p>

<h6 id="the-following-produces-identical-results">The following produces identical results:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="n">read_opus</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">OPUSFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</code></pre>
  </div>
</blockquote>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath (str or Path):</strong>  filepath of an OPUS file (typically *.0)</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>opus_file (<code><a href="#OPUSFile">OPUSFile</a></code>): an instance of the <code><a href="#OPUSFile">OPUSFile</a></code> class containing all data/metadata extracted from the
  file.</p>
</blockquote>
</div>


                </section>
                <section id="OPUSFile">
                            <input id="OPUSFile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OPUSFile</span>:

                <label class="view-source-button" for="OPUSFile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile-35"><a href="#OPUSFile-35"><span class="linenos"> 35</span></a><span class="k">class</span> <span class="nc">OPUSFile</span><span class="p">:</span>
</span><span id="OPUSFile-36"><a href="#OPUSFile-36"><span class="linenos"> 36</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class that contains the data and metadata contained in a bruker OPUS file.</span>
</span><span id="OPUSFile-37"><a href="#OPUSFile-37"><span class="linenos"> 37</span></a>
</span><span id="OPUSFile-38"><a href="#OPUSFile-38"><span class="linenos"> 38</span></a><span class="sd">    Args:</span>
</span><span id="OPUSFile-39"><a href="#OPUSFile-39"><span class="linenos"> 39</span></a><span class="sd">        filepath: full path to the OPUS file to be parsed. Can be a string or Path object and is required to initilize</span>
</span><span id="OPUSFile-40"><a href="#OPUSFile-40"><span class="linenos"> 40</span></a><span class="sd">            an `OPUSFile` object.</span>
</span><span id="OPUSFile-41"><a href="#OPUSFile-41"><span class="linenos"> 41</span></a>
</span><span id="OPUSFile-42"><a href="#OPUSFile-42"><span class="linenos"> 42</span></a><span class="sd">    Attributes:</span>
</span><span id="OPUSFile-43"><a href="#OPUSFile-43"><span class="linenos"> 43</span></a><span class="sd">        is_opus (`bool`): True if filepath points to an OPUS file, False otherwise. Also returned for dunder </span>
</span><span id="OPUSFile-44"><a href="#OPUSFile-44"><span class="linenos"> 44</span></a><span class="sd">            `__bool__()`  </span>
</span><span id="OPUSFile-45"><a href="#OPUSFile-45"><span class="linenos"> 45</span></a><span class="sd">        params (`Parameters`): class containing all general parameter metadata for the OPUS file. To save typing, the</span>
</span><span id="OPUSFile-46"><a href="#OPUSFile-46"><span class="linenos"> 46</span></a><span class="sd">            three char parameters from params also become attributes of the `OPUSFile` class (e.g. bms, apt, src)  </span>
</span><span id="OPUSFile-47"><a href="#OPUSFile-47"><span class="linenos"> 47</span></a><span class="sd">        rf_params (`Parameters`): class containing all reference parameter metadata for the OPUS file.  </span>
</span><span id="OPUSFile-48"><a href="#OPUSFile-48"><span class="linenos"> 48</span></a><span class="sd">        data_keys (list): list of all data block keys stored in the file (i.e. sm, rf, t, a, r, igsm, igrf, phsm, etc.).</span>
</span><span id="OPUSFile-49"><a href="#OPUSFile-49"><span class="linenos"> 49</span></a><span class="sd">            These keys become data attributes of the class which return an instance of `Data` or `Data3D`.</span>
</span><span id="OPUSFile-50"><a href="#OPUSFile-50"><span class="linenos"> 50</span></a><span class="sd">        datetime (`datetime`): Returns the most recent datetime of all the data blocks stored in the file (typically</span>
</span><span id="OPUSFile-51"><a href="#OPUSFile-51"><span class="linenos"> 51</span></a><span class="sd">            result spectra)</span>
</span><span id="OPUSFile-52"><a href="#OPUSFile-52"><span class="linenos"> 52</span></a><span class="sd">        directory (`FileDirectory`):  class containing information about all the various data blocks in the file.</span>
</span><span id="OPUSFile-53"><a href="#OPUSFile-53"><span class="linenos"> 53</span></a><span class="sd">        file_log (str): File log containing text about how the file was generated/edited (not always saved)</span>
</span><span id="OPUSFile-54"><a href="#OPUSFile-54"><span class="linenos"> 54</span></a>
</span><span id="OPUSFile-55"><a href="#OPUSFile-55"><span class="linenos"> 55</span></a><span class="sd">    Data Attributes:</span>
</span><span id="OPUSFile-56"><a href="#OPUSFile-56"><span class="linenos"> 56</span></a><span class="sd">        **sm:** Single-channel sample spectra  </span>
</span><span id="OPUSFile-57"><a href="#OPUSFile-57"><span class="linenos"> 57</span></a><span class="sd">        **rf:** Single-channel reference spectra  </span>
</span><span id="OPUSFile-58"><a href="#OPUSFile-58"><span class="linenos"> 58</span></a><span class="sd">        **igsm:** Sample interferogram  </span>
</span><span id="OPUSFile-59"><a href="#OPUSFile-59"><span class="linenos"> 59</span></a><span class="sd">        **igrf:** Reference interferogram  </span>
</span><span id="OPUSFile-60"><a href="#OPUSFile-60"><span class="linenos"> 60</span></a><span class="sd">        **phsm:** Sample phase  </span>
</span><span id="OPUSFile-61"><a href="#OPUSFile-61"><span class="linenos"> 61</span></a><span class="sd">        **phrf:** Reference phase  </span>
</span><span id="OPUSFile-62"><a href="#OPUSFile-62"><span class="linenos"> 62</span></a><span class="sd">        **a:** Absorbance  </span>
</span><span id="OPUSFile-63"><a href="#OPUSFile-63"><span class="linenos"> 63</span></a><span class="sd">        **t:** Transmittance  </span>
</span><span id="OPUSFile-64"><a href="#OPUSFile-64"><span class="linenos"> 64</span></a><span class="sd">        **r:** Reflectance  </span>
</span><span id="OPUSFile-65"><a href="#OPUSFile-65"><span class="linenos"> 65</span></a><span class="sd">        **km:** Kubelka-Munk  </span>
</span><span id="OPUSFile-66"><a href="#OPUSFile-66"><span class="linenos"> 66</span></a><span class="sd">        **tr:** Trace (Intensity over Time)  </span>
</span><span id="OPUSFile-67"><a href="#OPUSFile-67"><span class="linenos"> 67</span></a><span class="sd">        **gcig:** gc File (Series of Interferograms)  </span>
</span><span id="OPUSFile-68"><a href="#OPUSFile-68"><span class="linenos"> 68</span></a><span class="sd">        **gcsc:** gc File (Series of Spectra)  </span>
</span><span id="OPUSFile-69"><a href="#OPUSFile-69"><span class="linenos"> 69</span></a><span class="sd">        **ra:** Raman  </span>
</span><span id="OPUSFile-70"><a href="#OPUSFile-70"><span class="linenos"> 70</span></a><span class="sd">        **e:** Emission  </span>
</span><span id="OPUSFile-71"><a href="#OPUSFile-71"><span class="linenos"> 71</span></a><span class="sd">        **dir:** Directory  </span>
</span><span id="OPUSFile-72"><a href="#OPUSFile-72"><span class="linenos"> 72</span></a><span class="sd">        **p:** Power  </span>
</span><span id="OPUSFile-73"><a href="#OPUSFile-73"><span class="linenos"> 73</span></a><span class="sd">        **logr:** log(Reflectance)  </span>
</span><span id="OPUSFile-74"><a href="#OPUSFile-74"><span class="linenos"> 74</span></a><span class="sd">        **atr:** ATR  </span>
</span><span id="OPUSFile-75"><a href="#OPUSFile-75"><span class="linenos"> 75</span></a><span class="sd">        **pas:** Photoacoustic  </span>
</span><span id="OPUSFile-76"><a href="#OPUSFile-76"><span class="linenos"> 76</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="OPUSFile-77"><a href="#OPUSFile-77"><span class="linenos"> 77</span></a>
</span><span id="OPUSFile-78"><a href="#OPUSFile-78"><span class="linenos"> 78</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="OPUSFile-79"><a href="#OPUSFile-79"><span class="linenos"> 79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
</span><span id="OPUSFile-80"><a href="#OPUSFile-80"><span class="linenos"> 80</span></a>        <span class="n">filebytes</span> <span class="o">=</span> <span class="n">read_opus_file_bytes</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile-81"><a href="#OPUSFile-81"><span class="linenos"> 81</span></a>        <span class="k">if</span> <span class="n">filebytes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OPUSFile-82"><a href="#OPUSFile-82"><span class="linenos"> 82</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="OPUSFile-83"><a href="#OPUSFile-83"><span class="linenos"> 83</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile-84"><a href="#OPUSFile-84"><span class="linenos"> 84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="OPUSFile-85"><a href="#OPUSFile-85"><span class="linenos"> 85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">FileDirectory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="OPUSFile-86"><a href="#OPUSFile-86"><span class="linenos"> 86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">param_blocks</span><span class="p">)</span>
</span><span id="OPUSFile-87"><a href="#OPUSFile-87"><span class="linenos"> 87</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="p">)</span>
</span><span id="OPUSFile-88"><a href="#OPUSFile-88"><span class="linenos"> 88</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;file_log_block&#39;</span><span class="p">):</span>
</span><span id="OPUSFile-89"><a href="#OPUSFile-89"><span class="linenos"> 89</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">file_log</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parse_file_log</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span>
</span><span id="OPUSFile-90"><a href="#OPUSFile-90"><span class="linenos"> 90</span></a>                                                            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">file_log_block</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
</span><span id="OPUSFile-91"><a href="#OPUSFile-91"><span class="linenos"> 91</span></a>                                                            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">file_log_block</span><span class="o">.</span><span class="n">start</span><span class="p">))</span>
</span><span id="OPUSFile-92"><a href="#OPUSFile-92"><span class="linenos"> 92</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile-93"><a href="#OPUSFile-93"><span class="linenos"> 93</span></a>            <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span><span class="p">:</span>
</span><span id="OPUSFile-94"><a href="#OPUSFile-94"><span class="linenos"> 94</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="OPUSFile-95"><a href="#OPUSFile-95"><span class="linenos"> 95</span></a>                <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">is_3d_data</span><span class="p">():</span>
</span><span id="OPUSFile-96"><a href="#OPUSFile-96"><span class="linenos"> 96</span></a>                    <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data3D</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</span><span id="OPUSFile-97"><a href="#OPUSFile-97"><span class="linenos"> 97</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile-98"><a href="#OPUSFile-98"><span class="linenos"> 98</span></a>                    <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</span><span id="OPUSFile-99"><a href="#OPUSFile-99"><span class="linenos"> 99</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_class</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">data_class</span><span class="o">.</span><span class="n">npt</span><span class="p">:</span>
</span><span id="OPUSFile-100"><a href="#OPUSFile-100"><span class="linenos">100</span></a>                        <span class="k">break</span>  <span class="c1"># Don&#39;t add data blocks with missing points (rare but observed)</span>
</span><span id="OPUSFile-101"><a href="#OPUSFile-101"><span class="linenos">101</span></a>                <span class="k">if</span> <span class="s1">&#39;vel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="OPUSFile-102"><a href="#OPUSFile-102"><span class="linenos">102</span></a>                    <span class="n">data_class</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vel</span>
</span><span id="OPUSFile-103"><a href="#OPUSFile-103"><span class="linenos">103</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data_class</span><span class="p">)</span>
</span><span id="OPUSFile-104"><a href="#OPUSFile-104"><span class="linenos">104</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-105"><a href="#OPUSFile-105"><span class="linenos">105</span></a>
</span><span id="OPUSFile-106"><a href="#OPUSFile-106"><span class="linenos">106</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-107"><a href="#OPUSFile-107"><span class="linenos">107</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span><span class="p">:</span>
</span><span id="OPUSFile-108"><a href="#OPUSFile-108"><span class="linenos">108</span></a>            <span class="n">data_str</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">)</span>
</span><span id="OPUSFile-109"><a href="#OPUSFile-109"><span class="linenos">109</span></a>            <span class="k">return</span> <span class="s1">&#39;OPUS File: spectra: &#39;</span> <span class="o">+</span> <span class="n">data_str</span> <span class="o">+</span> <span class="s1">&#39;   path: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile-110"><a href="#OPUSFile-110"><span class="linenos">110</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile-111"><a href="#OPUSFile-111"><span class="linenos">111</span></a>            <span class="k">return</span> <span class="s1">&#39;Not an OPUS file: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile-112"><a href="#OPUSFile-112"><span class="linenos">112</span></a>
</span><span id="OPUSFile-113"><a href="#OPUSFile-113"><span class="linenos">113</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-114"><a href="#OPUSFile-114"><span class="linenos">114</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span>
</span><span id="OPUSFile-115"><a href="#OPUSFile-115"><span class="linenos">115</span></a>
</span><span id="OPUSFile-116"><a href="#OPUSFile-116"><span class="linenos">116</span></a>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="OPUSFile-117"><a href="#OPUSFile-117"><span class="linenos">117</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="OPUSFile-118"><a href="#OPUSFile-118"><span class="linenos">118</span></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="OPUSFile-119"><a href="#OPUSFile-119"><span class="linenos">119</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;datetime&#39;</span><span class="p">:</span>
</span><span id="OPUSFile-120"><a href="#OPUSFile-120"><span class="linenos">120</span></a>            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">datetime</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_data</span><span class="p">()</span> <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">datetime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="OPUSFile-121"><a href="#OPUSFile-121"><span class="linenos">121</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile-122"><a href="#OPUSFile-122"><span class="linenos">122</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; is not a valid attribute for OPUSFile: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile-123"><a href="#OPUSFile-123"><span class="linenos">123</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="OPUSFile-124"><a href="#OPUSFile-124"><span class="linenos">124</span></a>
</span><span id="OPUSFile-125"><a href="#OPUSFile-125"><span class="linenos">125</span></a>    <span class="k">def</span> <span class="nf">print_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">value_width</span><span class="o">=</span><span class="mi">53</span><span class="p">):</span>
</span><span id="OPUSFile-126"><a href="#OPUSFile-126"><span class="linenos">126</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Prints all the parameter metadata to the console (organized by block)&#39;&#39;&#39;</span>
</span><span id="OPUSFile-127"><a href="#OPUSFile-127"><span class="linenos">127</span></a>        <span class="n">width</span> <span class="o">=</span> <span class="n">key_width</span> <span class="o">+</span> <span class="n">label_width</span> <span class="o">+</span> <span class="n">value_width</span>
</span><span id="OPUSFile-128"><a href="#OPUSFile-128"><span class="linenos">128</span></a>        <span class="n">col_widths</span> <span class="o">=</span> <span class="p">(</span><span class="n">key_width</span><span class="p">,</span> <span class="n">label_width</span><span class="p">,</span> <span class="n">value_width</span><span class="p">)</span>
</span><span id="OPUSFile-129"><a href="#OPUSFile-129"><span class="linenos">129</span></a>        <span class="n">param_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">param_blocks</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">rf_param_blocks</span>
</span><span id="OPUSFile-130"><a href="#OPUSFile-130"><span class="linenos">130</span></a>        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">param_blocks</span><span class="p">:</span>
</span><span id="OPUSFile-131"><a href="#OPUSFile-131"><span class="linenos">131</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="OPUSFile-132"><a href="#OPUSFile-132"><span class="linenos">132</span></a>            <span class="n">_print_block_header</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="OPUSFile-133"><a href="#OPUSFile-133"><span class="linenos">133</span></a>            <span class="n">_print_cols</span><span class="p">((</span><span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="OPUSFile-134"><a href="#OPUSFile-134"><span class="linenos">134</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
</span><span id="OPUSFile-135"><a href="#OPUSFile-135"><span class="linenos">135</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">get_param_label</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-136"><a href="#OPUSFile-136"><span class="linenos">136</span></a>                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_rf_param</span><span class="p">():</span>
</span><span id="OPUSFile-137"><a href="#OPUSFile-137"><span class="linenos">137</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-138"><a href="#OPUSFile-138"><span class="linenos">138</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile-139"><a href="#OPUSFile-139"><span class="linenos">139</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile-140"><a href="#OPUSFile-140"><span class="linenos">140</span></a>                <span class="n">_print_cols</span><span class="p">((</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">label</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="OPUSFile-141"><a href="#OPUSFile-141"><span class="linenos">141</span></a>
</span><span id="OPUSFile-142"><a href="#OPUSFile-142"><span class="linenos">142</span></a>    <span class="k">def</span> <span class="nf">iter_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile-143"><a href="#OPUSFile-143"><span class="linenos">143</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various Data classes from the OPUSFile&#39;&#39;&#39;</span>
</span><span id="OPUSFile-144"><a href="#OPUSFile-144"><span class="linenos">144</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">:</span>
</span><span id="OPUSFile-145"><a href="#OPUSFile-145"><span class="linenos">145</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Class that contains the data and metadata contained in a bruker OPUS file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filepath:</strong>  full path to the OPUS file to be parsed. Can be a string or Path object and is required to initilize
an <code><a href="#OPUSFile">OPUSFile</a></code> object.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>is_opus (<code>bool</code>):</strong>  True if filepath points to an OPUS file, False otherwise. Also returned for dunder 
<code>__bool__()</code>  </li>
<li><strong>params (<code><a href="#Parameters">Parameters</a></code>):</strong>  class containing all general parameter metadata for the OPUS file. To save typing, the
three char parameters from params also become attributes of the <code><a href="#OPUSFile">OPUSFile</a></code> class (e.g. bms, apt, src)  </li>
<li><strong>rf_params (<code><a href="#Parameters">Parameters</a></code>):</strong>  class containing all reference parameter metadata for the OPUS file.  </li>
<li><strong>data_keys (list):</strong>  list of all data block keys stored in the file (i.e. sm, rf, t, a, r, igsm, igrf, phsm, etc.).
These keys become data attributes of the class which return an instance of <code><a href="#Data">Data</a></code> or <code><a href="#Data3D">Data3D</a></code>.</li>
<li><strong>datetime (<code>datetime</code>):</strong>  Returns the most recent datetime of all the data blocks stored in the file (typically
result spectra)</li>
<li><strong>directory (<code><a href="#FileDirectory">FileDirectory</a></code>):</strong>   class containing information about all the various data blocks in the file.</li>
<li><strong>file_log (str):</strong>  File log containing text about how the file was generated/edited (not always saved)</li>
</ul>

<h6 id="data-attributes">Data Attributes:</h6>

<blockquote>
  <p><strong>sm:</strong> Single-channel sample spectra <br />
  <strong>rf:</strong> Single-channel reference spectra <br />
  <strong>igsm:</strong> Sample interferogram <br />
  <strong>igrf:</strong> Reference interferogram <br />
  <strong>phsm:</strong> Sample phase <br />
  <strong>phrf:</strong> Reference phase <br />
  <strong>a:</strong> Absorbance <br />
  <strong>t:</strong> Transmittance <br />
  <strong>r:</strong> Reflectance <br />
  <strong>km:</strong> Kubelka-Munk <br />
  <strong>tr:</strong> Trace (Intensity over Time) <br />
  <strong>gcig:</strong> gc File (Series of Interferograms) <br />
  <strong>gcsc:</strong> gc File (Series of Spectra) <br />
  <strong>ra:</strong> Raman <br />
  <strong>e:</strong> Emission <br />
  <strong>dir:</strong> Directory <br />
  <strong>p:</strong> Power <br />
  <strong>logr:</strong> log(Reflectance) <br />
  <strong>atr:</strong> ATR <br />
  <strong>pas:</strong> Photoacoustic</p>
</blockquote>
</div>


                            <div id="OPUSFile.__init__" class="classattr">
                                        <input id="OPUSFile.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">OPUSFile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

                <label class="view-source-button" for="OPUSFile.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.__init__-78"><a href="#OPUSFile.__init__-78"><span class="linenos"> 78</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="OPUSFile.__init__-79"><a href="#OPUSFile.__init__-79"><span class="linenos"> 79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
</span><span id="OPUSFile.__init__-80"><a href="#OPUSFile.__init__-80"><span class="linenos"> 80</span></a>        <span class="n">filebytes</span> <span class="o">=</span> <span class="n">read_opus_file_bytes</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-81"><a href="#OPUSFile.__init__-81"><span class="linenos"> 81</span></a>        <span class="k">if</span> <span class="n">filebytes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OPUSFile.__init__-82"><a href="#OPUSFile.__init__-82"><span class="linenos"> 82</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="OPUSFile.__init__-83"><a href="#OPUSFile.__init__-83"><span class="linenos"> 83</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile.__init__-84"><a href="#OPUSFile.__init__-84"><span class="linenos"> 84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">is_opus</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="OPUSFile.__init__-85"><a href="#OPUSFile.__init__-85"><span class="linenos"> 85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">FileDirectory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-86"><a href="#OPUSFile.__init__-86"><span class="linenos"> 86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">param_blocks</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-87"><a href="#OPUSFile.__init__-87"><span class="linenos"> 87</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-88"><a href="#OPUSFile.__init__-88"><span class="linenos"> 88</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="s1">&#39;file_log_block&#39;</span><span class="p">):</span>
</span><span id="OPUSFile.__init__-89"><a href="#OPUSFile.__init__-89"><span class="linenos"> 89</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">file_log</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parse_file_log</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span>
</span><span id="OPUSFile.__init__-90"><a href="#OPUSFile.__init__-90"><span class="linenos"> 90</span></a>                                                            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">file_log_block</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
</span><span id="OPUSFile.__init__-91"><a href="#OPUSFile.__init__-91"><span class="linenos"> 91</span></a>                                                            <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">file_log_block</span><span class="o">.</span><span class="n">start</span><span class="p">))</span>
</span><span id="OPUSFile.__init__-92"><a href="#OPUSFile.__init__-92"><span class="linenos"> 92</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="OPUSFile.__init__-93"><a href="#OPUSFile.__init__-93"><span class="linenos"> 93</span></a>            <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span><span class="p">:</span>
</span><span id="OPUSFile.__init__-94"><a href="#OPUSFile.__init__-94"><span class="linenos"> 94</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="OPUSFile.__init__-95"><a href="#OPUSFile.__init__-95"><span class="linenos"> 95</span></a>                <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">is_3d_data</span><span class="p">():</span>
</span><span id="OPUSFile.__init__-96"><a href="#OPUSFile.__init__-96"><span class="linenos"> 96</span></a>                    <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data3D</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-97"><a href="#OPUSFile.__init__-97"><span class="linenos"> 97</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile.__init__-98"><a href="#OPUSFile.__init__-98"><span class="linenos"> 98</span></a>                    <span class="n">data_class</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-99"><a href="#OPUSFile.__init__-99"><span class="linenos"> 99</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_class</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">data_class</span><span class="o">.</span><span class="n">npt</span><span class="p">:</span>
</span><span id="OPUSFile.__init__-100"><a href="#OPUSFile.__init__-100"><span class="linenos">100</span></a>                        <span class="k">break</span>  <span class="c1"># Don&#39;t add data blocks with missing points (rare but observed)</span>
</span><span id="OPUSFile.__init__-101"><a href="#OPUSFile.__init__-101"><span class="linenos">101</span></a>                <span class="k">if</span> <span class="s1">&#39;vel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="OPUSFile.__init__-102"><a href="#OPUSFile.__init__-102"><span class="linenos">102</span></a>                    <span class="n">data_class</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">vel</span>
</span><span id="OPUSFile.__init__-103"><a href="#OPUSFile.__init__-103"><span class="linenos">103</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data_class</span><span class="p">)</span>
</span><span id="OPUSFile.__init__-104"><a href="#OPUSFile.__init__-104"><span class="linenos">104</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="OPUSFile.filepath" class="classattr">
                                <div class="attr variable">
            <span class="name">filepath</span>

        
    </div>
    <a class="headerlink" href="#OPUSFile.filepath"></a>
    
    

                            </div>
                            <div id="OPUSFile.print_parameters" class="classattr">
                                        <input id="OPUSFile.print_parameters-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_parameters</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key_width</span><span class="o">=</span><span class="mi">7</span>, </span><span class="param"><span class="n">label_width</span><span class="o">=</span><span class="mi">40</span>, </span><span class="param"><span class="n">value_width</span><span class="o">=</span><span class="mi">53</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OPUSFile.print_parameters-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.print_parameters"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.print_parameters-125"><a href="#OPUSFile.print_parameters-125"><span class="linenos">125</span></a>    <span class="k">def</span> <span class="nf">print_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">label_width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">value_width</span><span class="o">=</span><span class="mi">53</span><span class="p">):</span>
</span><span id="OPUSFile.print_parameters-126"><a href="#OPUSFile.print_parameters-126"><span class="linenos">126</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Prints all the parameter metadata to the console (organized by block)&#39;&#39;&#39;</span>
</span><span id="OPUSFile.print_parameters-127"><a href="#OPUSFile.print_parameters-127"><span class="linenos">127</span></a>        <span class="n">width</span> <span class="o">=</span> <span class="n">key_width</span> <span class="o">+</span> <span class="n">label_width</span> <span class="o">+</span> <span class="n">value_width</span>
</span><span id="OPUSFile.print_parameters-128"><a href="#OPUSFile.print_parameters-128"><span class="linenos">128</span></a>        <span class="n">col_widths</span> <span class="o">=</span> <span class="p">(</span><span class="n">key_width</span><span class="p">,</span> <span class="n">label_width</span><span class="p">,</span> <span class="n">value_width</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-129"><a href="#OPUSFile.print_parameters-129"><span class="linenos">129</span></a>        <span class="n">param_blocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">param_blocks</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="o">.</span><span class="n">rf_param_blocks</span>
</span><span id="OPUSFile.print_parameters-130"><a href="#OPUSFile.print_parameters-130"><span class="linenos">130</span></a>        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">param_blocks</span><span class="p">:</span>
</span><span id="OPUSFile.print_parameters-131"><a href="#OPUSFile.print_parameters-131"><span class="linenos">131</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-132"><a href="#OPUSFile.print_parameters-132"><span class="linenos">132</span></a>            <span class="n">_print_block_header</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-133"><a href="#OPUSFile.print_parameters-133"><span class="linenos">133</span></a>            <span class="n">_print_cols</span><span class="p">((</span><span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-134"><a href="#OPUSFile.print_parameters-134"><span class="linenos">134</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
</span><span id="OPUSFile.print_parameters-135"><a href="#OPUSFile.print_parameters-135"><span class="linenos">135</span></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">get_param_label</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-136"><a href="#OPUSFile.print_parameters-136"><span class="linenos">136</span></a>                <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_rf_param</span><span class="p">():</span>
</span><span id="OPUSFile.print_parameters-137"><a href="#OPUSFile.print_parameters-137"><span class="linenos">137</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rf_params</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-138"><a href="#OPUSFile.print_parameters-138"><span class="linenos">138</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="OPUSFile.print_parameters-139"><a href="#OPUSFile.print_parameters-139"><span class="linenos">139</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="OPUSFile.print_parameters-140"><a href="#OPUSFile.print_parameters-140"><span class="linenos">140</span></a>                <span class="n">_print_cols</span><span class="p">((</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">label</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">col_widths</span><span class="o">=</span><span class="n">col_widths</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Prints all the parameter metadata to the console (organized by block)</p>
</div>


                            </div>
                            <div id="OPUSFile.iter_data" class="classattr">
                                        <input id="OPUSFile.iter_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">iter_data</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OPUSFile.iter_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OPUSFile.iter_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OPUSFile.iter_data-142"><a href="#OPUSFile.iter_data-142"><span class="linenos">142</span></a>    <span class="k">def</span> <span class="nf">iter_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="OPUSFile.iter_data-143"><a href="#OPUSFile.iter_data-143"><span class="linenos">143</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Generator that yields the various Data classes from the OPUSFile&#39;&#39;&#39;</span>
</span><span id="OPUSFile.iter_data-144"><a href="#OPUSFile.iter_data-144"><span class="linenos">144</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_keys</span><span class="p">:</span>
</span><span id="OPUSFile.iter_data-145"><a href="#OPUSFile.iter_data-145"><span class="linenos">145</span></a>            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generator that yields the various Data classes from the OPUSFile</p>
</div>


                            </div>
                </section>
                <section id="FileBlockInfo">
                            <input id="FileBlockInfo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FileBlockInfo</span>:

                <label class="view-source-button" for="FileBlockInfo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo-148"><a href="#FileBlockInfo-148"><span class="linenos">148</span></a><span class="k">class</span> <span class="nc">FileBlockInfo</span><span class="p">:</span>
</span><span id="FileBlockInfo-149"><a href="#FileBlockInfo-149"><span class="linenos">149</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Contains type, size and location information about an OPUS file block.</span>
</span><span id="FileBlockInfo-150"><a href="#FileBlockInfo-150"><span class="linenos">150</span></a>
</span><span id="FileBlockInfo-151"><a href="#FileBlockInfo-151"><span class="linenos">151</span></a><span class="sd">    This information is parsed from the directory block of an OPUS file and provides the information needed to parse the</span>
</span><span id="FileBlockInfo-152"><a href="#FileBlockInfo-152"><span class="linenos">152</span></a><span class="sd">    block.</span>
</span><span id="FileBlockInfo-153"><a href="#FileBlockInfo-153"><span class="linenos">153</span></a>
</span><span id="FileBlockInfo-154"><a href="#FileBlockInfo-154"><span class="linenos">154</span></a><span class="sd">    Args:</span>
</span><span id="FileBlockInfo-155"><a href="#FileBlockInfo-155"><span class="linenos">155</span></a><span class="sd">        block_type: six integer tuple that describes the type of data in the file block</span>
</span><span id="FileBlockInfo-156"><a href="#FileBlockInfo-156"><span class="linenos">156</span></a><span class="sd">        size: size of block in number of bytes</span>
</span><span id="FileBlockInfo-157"><a href="#FileBlockInfo-157"><span class="linenos">157</span></a><span class="sd">        start: pointer to start location of the block within the file.</span>
</span><span id="FileBlockInfo-158"><a href="#FileBlockInfo-158"><span class="linenos">158</span></a>
</span><span id="FileBlockInfo-159"><a href="#FileBlockInfo-159"><span class="linenos">159</span></a><span class="sd">    Attributes:</span>
</span><span id="FileBlockInfo-160"><a href="#FileBlockInfo-160"><span class="linenos">160</span></a><span class="sd">        type: six integer tuple that describes the type of data in the file block</span>
</span><span id="FileBlockInfo-161"><a href="#FileBlockInfo-161"><span class="linenos">161</span></a><span class="sd">        size: size of block in number of bytes</span>
</span><span id="FileBlockInfo-162"><a href="#FileBlockInfo-162"><span class="linenos">162</span></a><span class="sd">        start: pointer to start location of the block within the file</span>
</span><span id="FileBlockInfo-163"><a href="#FileBlockInfo-163"><span class="linenos">163</span></a><span class="sd">        keys: tuple of three char keys contained in parameter blocks. This attribute is set by the OPUSFile class only</span>
</span><span id="FileBlockInfo-164"><a href="#FileBlockInfo-164"><span class="linenos">164</span></a><span class="sd">            when the block is parameter block. This enables grouping parameters by block if desired.</span>
</span><span id="FileBlockInfo-165"><a href="#FileBlockInfo-165"><span class="linenos">165</span></a><span class="sd">        bytes: raw bytes of file block (currently only set for unknown blocks)</span>
</span><span id="FileBlockInfo-166"><a href="#FileBlockInfo-166"><span class="linenos">166</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-167"><a href="#FileBlockInfo-167"><span class="linenos">167</span></a>
</span><span id="FileBlockInfo-168"><a href="#FileBlockInfo-168"><span class="linenos">168</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;keys&#39;</span><span class="p">,</span> <span class="s1">&#39;bytes&#39;</span><span class="p">)</span>
</span><span id="FileBlockInfo-169"><a href="#FileBlockInfo-169"><span class="linenos">169</span></a>
</span><span id="FileBlockInfo-170"><a href="#FileBlockInfo-170"><span class="linenos">170</span></a>    <span class="n">keys</span><span class="p">:</span> <span class="nb">tuple</span>
</span><span id="FileBlockInfo-171"><a href="#FileBlockInfo-171"><span class="linenos">171</span></a>
</span><span id="FileBlockInfo-172"><a href="#FileBlockInfo-172"><span class="linenos">172</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_type</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="FileBlockInfo-173"><a href="#FileBlockInfo-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">block_type</span>
</span><span id="FileBlockInfo-174"><a href="#FileBlockInfo-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="FileBlockInfo-175"><a href="#FileBlockInfo-175"><span class="linenos">175</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="FileBlockInfo-176"><a href="#FileBlockInfo-176"><span class="linenos">176</span></a>
</span><span id="FileBlockInfo-177"><a href="#FileBlockInfo-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-178"><a href="#FileBlockInfo-178"><span class="linenos">178</span></a>        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="FileBlockInfo-179"><a href="#FileBlockInfo-179"><span class="linenos">179</span></a>        <span class="k">return</span> <span class="s1">&#39;Block Info: &#39;</span> <span class="o">+</span> <span class="n">label</span> <span class="o">+</span> <span class="s1">&#39; (size: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; bytes; start: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="FileBlockInfo-180"><a href="#FileBlockInfo-180"><span class="linenos">180</span></a>
</span><span id="FileBlockInfo-181"><a href="#FileBlockInfo-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">is_data_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-182"><a href="#FileBlockInfo-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data status parameter block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-183"><a href="#FileBlockInfo-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="FileBlockInfo-184"><a href="#FileBlockInfo-184"><span class="linenos">184</span></a>
</span><span id="FileBlockInfo-185"><a href="#FileBlockInfo-185"><span class="linenos">185</span></a>    <span class="k">def</span> <span class="nf">is_rf_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-186"><a href="#FileBlockInfo-186"><span class="linenos">186</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a parameter block associated with the reference measurement&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-187"><a href="#FileBlockInfo-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="FileBlockInfo-188"><a href="#FileBlockInfo-188"><span class="linenos">188</span></a>
</span><span id="FileBlockInfo-189"><a href="#FileBlockInfo-189"><span class="linenos">189</span></a>    <span class="k">def</span> <span class="nf">is_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-190"><a href="#FileBlockInfo-190"><span class="linenos">190</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a parameter block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-191"><a href="#FileBlockInfo-191"><span class="linenos">191</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="FileBlockInfo-192"><a href="#FileBlockInfo-192"><span class="linenos">192</span></a>
</span><span id="FileBlockInfo-193"><a href="#FileBlockInfo-193"><span class="linenos">193</span></a>    <span class="k">def</span> <span class="nf">is_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-194"><a href="#FileBlockInfo-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is the directory block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-195"><a href="#FileBlockInfo-195"><span class="linenos">195</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="FileBlockInfo-196"><a href="#FileBlockInfo-196"><span class="linenos">196</span></a>
</span><span id="FileBlockInfo-197"><a href="#FileBlockInfo-197"><span class="linenos">197</span></a>    <span class="k">def</span> <span class="nf">is_file_log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-198"><a href="#FileBlockInfo-198"><span class="linenos">198</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is the file log block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-199"><a href="#FileBlockInfo-199"><span class="linenos">199</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span id="FileBlockInfo-200"><a href="#FileBlockInfo-200"><span class="linenos">200</span></a>
</span><span id="FileBlockInfo-201"><a href="#FileBlockInfo-201"><span class="linenos">201</span></a>    <span class="k">def</span> <span class="nf">is_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-202"><a href="#FileBlockInfo-202"><span class="linenos">202</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data block or 3D data block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-203"><a href="#FileBlockInfo-203"><span class="linenos">203</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="FileBlockInfo-204"><a href="#FileBlockInfo-204"><span class="linenos">204</span></a>
</span><span id="FileBlockInfo-205"><a href="#FileBlockInfo-205"><span class="linenos">205</span></a>    <span class="k">def</span> <span class="nf">is_3d_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-206"><a href="#FileBlockInfo-206"><span class="linenos">206</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a 3D data block (i.e. data series)&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-207"><a href="#FileBlockInfo-207"><span class="linenos">207</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
</span><span id="FileBlockInfo-208"><a href="#FileBlockInfo-208"><span class="linenos">208</span></a>
</span><span id="FileBlockInfo-209"><a href="#FileBlockInfo-209"><span class="linenos">209</span></a>    <span class="k">def</span> <span class="nf">is_data_status_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block_info</span><span class="p">):</span>
</span><span id="FileBlockInfo-210"><a href="#FileBlockInfo-210"><span class="linenos">210</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data status block and a match to the data_block_info argument.</span>
</span><span id="FileBlockInfo-211"><a href="#FileBlockInfo-211"><span class="linenos">211</span></a>
</span><span id="FileBlockInfo-212"><a href="#FileBlockInfo-212"><span class="linenos">212</span></a><span class="sd">        This function is used to match a data status block (contains metadata for data block) with its associated data</span>
</span><span id="FileBlockInfo-213"><a href="#FileBlockInfo-213"><span class="linenos">213</span></a><span class="sd">        block (contains array data).</span>
</span><span id="FileBlockInfo-214"><a href="#FileBlockInfo-214"><span class="linenos">214</span></a>
</span><span id="FileBlockInfo-215"><a href="#FileBlockInfo-215"><span class="linenos">215</span></a><span class="sd">        Args:</span>
</span><span id="FileBlockInfo-216"><a href="#FileBlockInfo-216"><span class="linenos">216</span></a><span class="sd">            data_block_info (FileBlockInfo):  data block being tested as a match.</span>
</span><span id="FileBlockInfo-217"><a href="#FileBlockInfo-217"><span class="linenos">217</span></a>
</span><span id="FileBlockInfo-218"><a href="#FileBlockInfo-218"><span class="linenos">218</span></a><span class="sd">        Returns:</span>
</span><span id="FileBlockInfo-219"><a href="#FileBlockInfo-219"><span class="linenos">219</span></a><span class="sd">            is_match (bool): True if FileBlockInfo is data status block and input argument is matching data block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-220"><a href="#FileBlockInfo-220"><span class="linenos">220</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">():</span>
</span><span id="FileBlockInfo-221"><a href="#FileBlockInfo-221"><span class="linenos">221</span></a>            <span class="k">return</span> <span class="n">data_block_info</span><span class="o">.</span><span class="n">type</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="n">data_block_info</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</span><span id="FileBlockInfo-222"><a href="#FileBlockInfo-222"><span class="linenos">222</span></a>
</span><span id="FileBlockInfo-223"><a href="#FileBlockInfo-223"><span class="linenos">223</span></a>    <span class="k">def</span> <span class="nf">get_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-224"><a href="#FileBlockInfo-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a friendly string label that describes the block type&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-225"><a href="#FileBlockInfo-225"><span class="linenos">225</span></a>        <span class="k">return</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="FileBlockInfo-226"><a href="#FileBlockInfo-226"><span class="linenos">226</span></a>
</span><span id="FileBlockInfo-227"><a href="#FileBlockInfo-227"><span class="linenos">227</span></a>    <span class="k">def</span> <span class="nf">get_data_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo-228"><a href="#FileBlockInfo-228"><span class="linenos">228</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;If block is a data block, this function will return an shorthand key to reference that data.</span>
</span><span id="FileBlockInfo-229"><a href="#FileBlockInfo-229"><span class="linenos">229</span></a>
</span><span id="FileBlockInfo-230"><a href="#FileBlockInfo-230"><span class="linenos">230</span></a><span class="sd">        e.g. t: transmission, a: absorption, sm: sample, rf: reference, smph: sample phase etc. If the block is not</span>
</span><span id="FileBlockInfo-231"><a href="#FileBlockInfo-231"><span class="linenos">231</span></a><span class="sd">        a data block, it will return None.&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo-232"><a href="#FileBlockInfo-232"><span class="linenos">232</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="FileBlockInfo-233"><a href="#FileBlockInfo-233"><span class="linenos">233</span></a>            <span class="k">return</span> <span class="n">get_data_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="FileBlockInfo-234"><a href="#FileBlockInfo-234"><span class="linenos">234</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="FileBlockInfo-235"><a href="#FileBlockInfo-235"><span class="linenos">235</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Contains type, size and location information about an OPUS file block.</p>

<p>This information is parsed from the directory block of an OPUS file and provides the information needed to parse the
block.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>block_type:</strong>  six integer tuple that describes the type of data in the file block</li>
<li><strong>size:</strong>  size of block in number of bytes</li>
<li><strong>start:</strong>  pointer to start location of the block within the file.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>type:</strong>  six integer tuple that describes the type of data in the file block</li>
<li><strong>size:</strong>  size of block in number of bytes</li>
<li><strong>start:</strong>  pointer to start location of the block within the file</li>
<li><strong>keys:</strong>  tuple of three char keys contained in parameter blocks. This attribute is set by the OPUSFile class only
when the block is parameter block. This enables grouping parameters by block if desired.</li>
<li><strong>bytes:</strong>  raw bytes of file block (currently only set for unknown blocks)</li>
</ul>
</div>


                            <div id="FileBlockInfo.__init__" class="classattr">
                                        <input id="FileBlockInfo.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">FileBlockInfo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">block_type</span><span class="p">:</span> <span class="nb">tuple</span>, </span><span class="param"><span class="n">size</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">start</span><span class="p">:</span> <span class="nb">int</span></span>)</span>

                <label class="view-source-button" for="FileBlockInfo.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.__init__-172"><a href="#FileBlockInfo.__init__-172"><span class="linenos">172</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_type</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="FileBlockInfo.__init__-173"><a href="#FileBlockInfo.__init__-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">block_type</span>
</span><span id="FileBlockInfo.__init__-174"><a href="#FileBlockInfo.__init__-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="FileBlockInfo.__init__-175"><a href="#FileBlockInfo.__init__-175"><span class="linenos">175</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
</span></pre></div>


    

                            </div>
                            <div id="FileBlockInfo.keys" class="classattr">
                                <div class="attr variable">
            <span class="name">keys</span><span class="annotation">: tuple</span>

        
    </div>
    <a class="headerlink" href="#FileBlockInfo.keys"></a>
    
    

                            </div>
                            <div id="FileBlockInfo.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span>

        
    </div>
    <a class="headerlink" href="#FileBlockInfo.type"></a>
    
    

                            </div>
                            <div id="FileBlockInfo.size" class="classattr">
                                <div class="attr variable">
            <span class="name">size</span>

        
    </div>
    <a class="headerlink" href="#FileBlockInfo.size"></a>
    
    

                            </div>
                            <div id="FileBlockInfo.start" class="classattr">
                                <div class="attr variable">
            <span class="name">start</span>

        
    </div>
    <a class="headerlink" href="#FileBlockInfo.start"></a>
    
    

                            </div>
                            <div id="FileBlockInfo.is_data_status" class="classattr">
                                        <input id="FileBlockInfo.is_data_status-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_data_status</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_data_status-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_data_status"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_data_status-181"><a href="#FileBlockInfo.is_data_status-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">is_data_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_data_status-182"><a href="#FileBlockInfo.is_data_status-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data status parameter block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_data_status-183"><a href="#FileBlockInfo.is_data_status-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is a data status parameter block</p>
</div>


                            </div>
                            <div id="FileBlockInfo.is_rf_param" class="classattr">
                                        <input id="FileBlockInfo.is_rf_param-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_rf_param</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_rf_param-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_rf_param"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_rf_param-185"><a href="#FileBlockInfo.is_rf_param-185"><span class="linenos">185</span></a>    <span class="k">def</span> <span class="nf">is_rf_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_rf_param-186"><a href="#FileBlockInfo.is_rf_param-186"><span class="linenos">186</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a parameter block associated with the reference measurement&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_rf_param-187"><a href="#FileBlockInfo.is_rf_param-187"><span class="linenos">187</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is a parameter block associated with the reference measurement</p>
</div>


                            </div>
                            <div id="FileBlockInfo.is_param" class="classattr">
                                        <input id="FileBlockInfo.is_param-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_param</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_param-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_param"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_param-189"><a href="#FileBlockInfo.is_param-189"><span class="linenos">189</span></a>    <span class="k">def</span> <span class="nf">is_param</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_param-190"><a href="#FileBlockInfo.is_param-190"><span class="linenos">190</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a parameter block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_param-191"><a href="#FileBlockInfo.is_param-191"><span class="linenos">191</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is a parameter block</p>
</div>


                            </div>
                            <div id="FileBlockInfo.is_directory" class="classattr">
                                        <input id="FileBlockInfo.is_directory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_directory</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_directory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_directory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_directory-193"><a href="#FileBlockInfo.is_directory-193"><span class="linenos">193</span></a>    <span class="k">def</span> <span class="nf">is_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_directory-194"><a href="#FileBlockInfo.is_directory-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is the directory block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_directory-195"><a href="#FileBlockInfo.is_directory-195"><span class="linenos">195</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is the directory block</p>
</div>


                            </div>
                            <div id="FileBlockInfo.is_file_log" class="classattr">
                                        <input id="FileBlockInfo.is_file_log-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_file_log</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_file_log-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_file_log"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_file_log-197"><a href="#FileBlockInfo.is_file_log-197"><span class="linenos">197</span></a>    <span class="k">def</span> <span class="nf">is_file_log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_file_log-198"><a href="#FileBlockInfo.is_file_log-198"><span class="linenos">198</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is the file log block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_file_log-199"><a href="#FileBlockInfo.is_file_log-199"><span class="linenos">199</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is the file log block</p>
</div>


                            </div>
                            <div id="FileBlockInfo.is_data" class="classattr">
                                        <input id="FileBlockInfo.is_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_data</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_data-201"><a href="#FileBlockInfo.is_data-201"><span class="linenos">201</span></a>    <span class="k">def</span> <span class="nf">is_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_data-202"><a href="#FileBlockInfo.is_data-202"><span class="linenos">202</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data block or 3D data block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_data-203"><a href="#FileBlockInfo.is_data-203"><span class="linenos">203</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is a data block or 3D data block</p>
</div>


                            </div>
                            <div id="FileBlockInfo.is_3d_data" class="classattr">
                                        <input id="FileBlockInfo.is_3d_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_3d_data</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_3d_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_3d_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_3d_data-205"><a href="#FileBlockInfo.is_3d_data-205"><span class="linenos">205</span></a>    <span class="k">def</span> <span class="nf">is_3d_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_3d_data-206"><a href="#FileBlockInfo.is_3d_data-206"><span class="linenos">206</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a 3D data block (i.e. data series)&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_3d_data-207"><a href="#FileBlockInfo.is_3d_data-207"><span class="linenos">207</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is a 3D data block (i.e. data series)</p>
</div>


                            </div>
                            <div id="FileBlockInfo.is_data_status_match" class="classattr">
                                        <input id="FileBlockInfo.is_data_status_match-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_data_status_match</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data_block_info</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.is_data_status_match-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.is_data_status_match"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.is_data_status_match-209"><a href="#FileBlockInfo.is_data_status_match-209"><span class="linenos">209</span></a>    <span class="k">def</span> <span class="nf">is_data_status_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_block_info</span><span class="p">):</span>
</span><span id="FileBlockInfo.is_data_status_match-210"><a href="#FileBlockInfo.is_data_status_match-210"><span class="linenos">210</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns True if FileBlockInfo is a data status block and a match to the data_block_info argument.</span>
</span><span id="FileBlockInfo.is_data_status_match-211"><a href="#FileBlockInfo.is_data_status_match-211"><span class="linenos">211</span></a>
</span><span id="FileBlockInfo.is_data_status_match-212"><a href="#FileBlockInfo.is_data_status_match-212"><span class="linenos">212</span></a><span class="sd">        This function is used to match a data status block (contains metadata for data block) with its associated data</span>
</span><span id="FileBlockInfo.is_data_status_match-213"><a href="#FileBlockInfo.is_data_status_match-213"><span class="linenos">213</span></a><span class="sd">        block (contains array data).</span>
</span><span id="FileBlockInfo.is_data_status_match-214"><a href="#FileBlockInfo.is_data_status_match-214"><span class="linenos">214</span></a>
</span><span id="FileBlockInfo.is_data_status_match-215"><a href="#FileBlockInfo.is_data_status_match-215"><span class="linenos">215</span></a><span class="sd">        Args:</span>
</span><span id="FileBlockInfo.is_data_status_match-216"><a href="#FileBlockInfo.is_data_status_match-216"><span class="linenos">216</span></a><span class="sd">            data_block_info (FileBlockInfo):  data block being tested as a match.</span>
</span><span id="FileBlockInfo.is_data_status_match-217"><a href="#FileBlockInfo.is_data_status_match-217"><span class="linenos">217</span></a>
</span><span id="FileBlockInfo.is_data_status_match-218"><a href="#FileBlockInfo.is_data_status_match-218"><span class="linenos">218</span></a><span class="sd">        Returns:</span>
</span><span id="FileBlockInfo.is_data_status_match-219"><a href="#FileBlockInfo.is_data_status_match-219"><span class="linenos">219</span></a><span class="sd">            is_match (bool): True if FileBlockInfo is data status block and input argument is matching data block&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.is_data_status_match-220"><a href="#FileBlockInfo.is_data_status_match-220"><span class="linenos">220</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">():</span>
</span><span id="FileBlockInfo.is_data_status_match-221"><a href="#FileBlockInfo.is_data_status_match-221"><span class="linenos">221</span></a>            <span class="k">return</span> <span class="n">data_block_info</span><span class="o">.</span><span class="n">type</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="n">data_block_info</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if FileBlockInfo is a data status block and a match to the data_block_info argument.</p>

<p>This function is used to match a data status block (contains metadata for data block) with its associated data
block (contains array data).</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>data_block_info (FileBlockInfo):</strong>   data block being tested as a match.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>is_match (bool): True if FileBlockInfo is data status block and input argument is matching data block</p>
</blockquote>
</div>


                            </div>
                            <div id="FileBlockInfo.get_label" class="classattr">
                                        <input id="FileBlockInfo.get_label-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_label</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.get_label-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.get_label"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.get_label-223"><a href="#FileBlockInfo.get_label-223"><span class="linenos">223</span></a>    <span class="k">def</span> <span class="nf">get_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.get_label-224"><a href="#FileBlockInfo.get_label-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a friendly string label that describes the block type&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.get_label-225"><a href="#FileBlockInfo.get_label-225"><span class="linenos">225</span></a>        <span class="k">return</span> <span class="n">get_block_type_label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a friendly string label that describes the block type</p>
</div>


                            </div>
                            <div id="FileBlockInfo.get_data_key" class="classattr">
                                        <input id="FileBlockInfo.get_data_key-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_data_key</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FileBlockInfo.get_data_key-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileBlockInfo.get_data_key"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileBlockInfo.get_data_key-227"><a href="#FileBlockInfo.get_data_key-227"><span class="linenos">227</span></a>    <span class="k">def</span> <span class="nf">get_data_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileBlockInfo.get_data_key-228"><a href="#FileBlockInfo.get_data_key-228"><span class="linenos">228</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;If block is a data block, this function will return an shorthand key to reference that data.</span>
</span><span id="FileBlockInfo.get_data_key-229"><a href="#FileBlockInfo.get_data_key-229"><span class="linenos">229</span></a>
</span><span id="FileBlockInfo.get_data_key-230"><a href="#FileBlockInfo.get_data_key-230"><span class="linenos">230</span></a><span class="sd">        e.g. t: transmission, a: absorption, sm: sample, rf: reference, smph: sample phase etc. If the block is not</span>
</span><span id="FileBlockInfo.get_data_key-231"><a href="#FileBlockInfo.get_data_key-231"><span class="linenos">231</span></a><span class="sd">        a data block, it will return None.&#39;&#39;&#39;</span>
</span><span id="FileBlockInfo.get_data_key-232"><a href="#FileBlockInfo.get_data_key-232"><span class="linenos">232</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="FileBlockInfo.get_data_key-233"><a href="#FileBlockInfo.get_data_key-233"><span class="linenos">233</span></a>            <span class="k">return</span> <span class="n">get_data_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</span><span id="FileBlockInfo.get_data_key-234"><a href="#FileBlockInfo.get_data_key-234"><span class="linenos">234</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="FileBlockInfo.get_data_key-235"><a href="#FileBlockInfo.get_data_key-235"><span class="linenos">235</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>If block is a data block, this function will return an shorthand key to reference that data.</p>

<p>e.g. t: transmission, a: absorption, sm: sample, rf: reference, smph: sample phase etc. If the block is not
a data block, it will return None.</p>
</div>


                            </div>
                            <div id="FileBlockInfo.bytes" class="classattr">
                                <div class="attr variable">
            <span class="name">bytes</span>

        
    </div>
    <a class="headerlink" href="#FileBlockInfo.bytes"></a>
    
    

                            </div>
                </section>
                <section id="Data">
                            <input id="Data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Data</span>:

                <label class="view-source-button" for="Data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Data-238"><a href="#Data-238"><span class="linenos">238</span></a><span class="k">class</span> <span class="nc">Data</span><span class="p">:</span>
</span><span id="Data-239"><a href="#Data-239"><span class="linenos">239</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing array data and associated parameter/metadata from an OPUS file.</span>
</span><span id="Data-240"><a href="#Data-240"><span class="linenos">240</span></a>
</span><span id="Data-241"><a href="#Data-241"><span class="linenos">241</span></a><span class="sd">    Args:</span>
</span><span id="Data-242"><a href="#Data-242"><span class="linenos">242</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: `read_opus_file_bytes`</span>
</span><span id="Data-243"><a href="#Data-243"><span class="linenos">243</span></a><span class="sd">        data_info: `FileBlockInfo` instance of a data block</span>
</span><span id="Data-244"><a href="#Data-244"><span class="linenos">244</span></a><span class="sd">        data_status_info: `FileBlockInfo` instance of a data status block which contains metadata about the data_info</span>
</span><span id="Data-245"><a href="#Data-245"><span class="linenos">245</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="Data-246"><a href="#Data-246"><span class="linenos">246</span></a>
</span><span id="Data-247"><a href="#Data-247"><span class="linenos">247</span></a><span class="sd">    Attributes:</span>
</span><span id="Data-248"><a href="#Data-248"><span class="linenos">248</span></a><span class="sd">        params: `Parameter` class with metadata associated with the data block such as first x point: `fxp`, last x</span>
</span><span id="Data-249"><a href="#Data-249"><span class="linenos">249</span></a><span class="sd">            point: `lxp`, number of points: `npt`, date: `dat`, time: `tim` etc.</span>
</span><span id="Data-250"><a href="#Data-250"><span class="linenos">250</span></a><span class="sd">        y: 1D `numpy` array containing y values of data block</span>
</span><span id="Data-251"><a href="#Data-251"><span class="linenos">251</span></a><span class="sd">        x: 1D `numpy` array containing x values of data block. Units of x array are given by `dxu` parameter.</span>
</span><span id="Data-252"><a href="#Data-252"><span class="linenos">252</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="Data-253"><a href="#Data-253"><span class="linenos">253</span></a>
</span><span id="Data-254"><a href="#Data-254"><span class="linenos">254</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="Data-255"><a href="#Data-255"><span class="linenos">255</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm⁻¹) units regardless of what units the x array was originally</span>
</span><span id="Data-256"><a href="#Data-256"><span class="linenos">256</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="Data-257"><a href="#Data-257"><span class="linenos">257</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="Data-258"><a href="#Data-258"><span class="linenos">258</span></a><span class="sd">        **wl:** Returns the x array in wavelength (µm) units regardless of what units the x array was originally</span>
</span><span id="Data-259"><a href="#Data-259"><span class="linenos">259</span></a><span class="sd">            saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="Data-260"><a href="#Data-260"><span class="linenos">260</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="Data-261"><a href="#Data-261"><span class="linenos">261</span></a><span class="sd">        **f:** Returns the x array in modulation frequency units (Hz) regardless of what units the x array was</span>
</span><span id="Data-262"><a href="#Data-262"><span class="linenos">262</span></a><span class="sd">            originally saved in. This is only valid for spectral data blocks such as sample, reference, transmission,</span>
</span><span id="Data-263"><a href="#Data-263"><span class="linenos">263</span></a><span class="sd">            etc., not interferogram or phase blocks.  </span>
</span><span id="Data-264"><a href="#Data-264"><span class="linenos">264</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter block).  </span>
</span><span id="Data-265"><a href="#Data-265"><span class="linenos">265</span></a><span class="sd">        **xxx:** the various three char parameter keys from the `params` attribute can be directly called from the </span>
</span><span id="Data-266"><a href="#Data-266"><span class="linenos">266</span></a><span class="sd">            `Data` class for convenience. Common parameters include `dxu` (x units), `mxy` (max y value), `mny` (min y</span>
</span><span id="Data-267"><a href="#Data-267"><span class="linenos">267</span></a><span class="sd">            value), etc.  </span>
</span><span id="Data-268"><a href="#Data-268"><span class="linenos">268</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="Data-269"><a href="#Data-269"><span class="linenos">269</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">)</span>
</span><span id="Data-270"><a href="#Data-270"><span class="linenos">270</span></a>
</span><span id="Data-271"><a href="#Data-271"><span class="linenos">271</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">data_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">,</span> <span class="n">data_status_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">):</span>
</span><span id="Data-272"><a href="#Data-272"><span class="linenos">272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="Data-273"><a href="#Data-273"><span class="linenos">273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="p">[</span><span class="n">data_status_info</span><span class="p">])</span>
</span><span id="Data-274"><a href="#Data-274"><span class="linenos">274</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">parse_data_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dpf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dpf</span><span class="p">)</span>
</span><span id="Data-275"><a href="#Data-275"><span class="linenos">275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="Data-276"><a href="#Data-276"><span class="linenos">276</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="Data-277"><a href="#Data-277"><span class="linenos">277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="Data-278"><a href="#Data-278"><span class="linenos">278</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Data-279"><a href="#Data-279"><span class="linenos">279</span></a>
</span><span id="Data-280"><a href="#Data-280"><span class="linenos">280</span></a>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Data-281"><a href="#Data-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wn&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="Data-282"><a href="#Data-282"><span class="linenos">282</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wn</span><span class="p">()</span>
</span><span id="Data-283"><a href="#Data-283"><span class="linenos">283</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;wl&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="Data-284"><a href="#Data-284"><span class="linenos">284</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_wl</span><span class="p">()</span>
</span><span id="Data-285"><a href="#Data-285"><span class="linenos">285</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;WN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;LGW&#39;</span><span class="p">):</span>
</span><span id="Data-286"><a href="#Data-286"><span class="linenos">286</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_freq</span><span class="p">()</span>
</span><span id="Data-287"><a href="#Data-287"><span class="linenos">287</span></a>        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Data-288"><a href="#Data-288"><span class="linenos">288</span></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</span><span id="Data-289"><a href="#Data-289"><span class="linenos">289</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;datetime&#39;</span><span class="p">:</span>
</span><span id="Data-290"><a href="#Data-290"><span class="linenos">290</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">datetime</span>
</span><span id="Data-291"><a href="#Data-291"><span class="linenos">291</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Data-292"><a href="#Data-292"><span class="linenos">292</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; is not a valid attribute for Data: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">)</span>
</span><span id="Data-293"><a href="#Data-293"><span class="linenos">293</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="Data-294"><a href="#Data-294"><span class="linenos">294</span></a>
</span><span id="Data-295"><a href="#Data-295"><span class="linenos">295</span></a>    <span class="k">def</span> <span class="nf">_get_wn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Data-296"><a href="#Data-296"><span class="linenos">296</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="Data-297"><a href="#Data-297"><span class="linenos">297</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-298"><a href="#Data-298"><span class="linenos">298</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="Data-299"><a href="#Data-299"><span class="linenos">299</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-300"><a href="#Data-300"><span class="linenos">300</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="Data-301"><a href="#Data-301"><span class="linenos">301</span></a>            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="Data-302"><a href="#Data-302"><span class="linenos">302</span></a>
</span><span id="Data-303"><a href="#Data-303"><span class="linenos">303</span></a>    <span class="k">def</span> <span class="nf">_get_wl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Data-304"><a href="#Data-304"><span class="linenos">304</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;WN&#39;</span><span class="p">:</span>
</span><span id="Data-305"><a href="#Data-305"><span class="linenos">305</span></a>            <span class="k">return</span> <span class="mf">10000.</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-306"><a href="#Data-306"><span class="linenos">306</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;MI&#39;</span><span class="p">:</span>
</span><span id="Data-307"><a href="#Data-307"><span class="linenos">307</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
</span><span id="Data-308"><a href="#Data-308"><span class="linenos">308</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dxu</span> <span class="o">==</span> <span class="s1">&#39;LGW&#39;</span><span class="p">:</span>
</span><span id="Data-309"><a href="#Data-309"><span class="linenos">309</span></a>            <span class="k">return</span> <span class="mi">10000</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span id="Data-310"><a href="#Data-310"><span class="linenos">310</span></a>    
</span><span id="Data-311"><a href="#Data-311"><span class="linenos">311</span></a>    <span class="k">def</span> <span class="nf">_get_freq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Data-312"><a href="#Data-312"><span class="linenos">312</span></a>        <span class="n">vel</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vel</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7900</span>  <span class="c1"># cm/s</span>
</span><span id="Data-313"><a href="#Data-313"><span class="linenos">313</span></a>        <span class="k">return</span> <span class="n">vel</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">wn</span>
</span></pre></div>


            <div class="docstring"><p>Class containing array data and associated parameter/metadata from an OPUS file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filebytes:</strong>  raw bytes from OPUS file. see: <code>read_opus_file_bytes</code></li>
<li><strong>data_info:</strong>  <code><a href="#FileBlockInfo">FileBlockInfo</a></code> instance of a data block</li>
<li><strong>data_status_info:</strong>  <code><a href="#FileBlockInfo">FileBlockInfo</a></code> instance of a data status block which contains metadata about the data_info
block. This block is a parameter block.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>params:</strong>  <code>Parameter</code> class with metadata associated with the data block such as first x point: <code>fxp</code>, last x
point: <code>lxp</code>, number of points: <code>npt</code>, date: <code>dat</code>, time: <code>tim</code> etc.</li>
<li><strong>y:</strong>  1D <code>numpy</code> array containing y values of data block</li>
<li><strong>x:</strong>  1D <code>numpy</code> array containing x values of data block. Units of x array are given by <code>dxu</code> parameter.</li>
<li><strong>label:</strong>  human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</li>
</ul>

<h6 id="extended-attributes">Extended Attributes:</h6>

<blockquote>
  <p><strong>wn:</strong> Returns the x array in wavenumber (cm⁻¹) units regardless of what units the x array was originally
      saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks. <br />
  <strong>wl:</strong> Returns the x array in wavelength (µm) units regardless of what units the x array was originally
      saved in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks. <br />
  <strong>f:</strong> Returns the x array in modulation frequency units (Hz) regardless of what units the x array was
      originally saved in. This is only valid for spectral data blocks such as sample, reference, transmission,
      etc., not interferogram or phase blocks. <br />
  <strong>datetime:</strong> Returns a <code>datetime</code> class of when the data was taken (extracted from data status parameter block). <br />
  <strong>xxx:</strong> the various three char parameter keys from the <code><a href="#Data.params">params</a></code> attribute can be directly called from the 
      <code><a href="#Data">Data</a></code> class for convenience. Common parameters include <code>dxu</code> (x units), <code>mxy</code> (max y value), <code>mny</code> (min y
      value), etc.</p>
</blockquote>
</div>


                            <div id="Data.__init__" class="classattr">
                                        <input id="Data.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Data</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span>,</span><span class="param">	<span class="n">data_info</span><span class="p">:</span> <span class="n"><a href="#FileBlockInfo">FileBlockInfo</a></span>,</span><span class="param">	<span class="n">data_status_info</span><span class="p">:</span> <span class="n"><a href="#FileBlockInfo">FileBlockInfo</a></span></span>)</span>

                <label class="view-source-button" for="Data.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Data.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Data.__init__-271"><a href="#Data.__init__-271"><span class="linenos">271</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">data_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">,</span> <span class="n">data_status_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">):</span>
</span><span id="Data.__init__-272"><a href="#Data.__init__-272"><span class="linenos">272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="Data.__init__-273"><a href="#Data.__init__-273"><span class="linenos">273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="p">[</span><span class="n">data_status_info</span><span class="p">])</span>
</span><span id="Data.__init__-274"><a href="#Data.__init__-274"><span class="linenos">274</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">parse_data_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dpf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dpf</span><span class="p">)</span>
</span><span id="Data.__init__-275"><a href="#Data.__init__-275"><span class="linenos">275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="Data.__init__-276"><a href="#Data.__init__-276"><span class="linenos">276</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="Data.__init__-277"><a href="#Data.__init__-277"><span class="linenos">277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span><span id="Data.__init__-278"><a href="#Data.__init__-278"><span class="linenos">278</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="mi">0</span>
</span></pre></div>


    

                            </div>
                            <div id="Data.params" class="classattr">
                                <div class="attr variable">
            <span class="name">params</span>

        
    </div>
    <a class="headerlink" href="#Data.params"></a>
    
    

                            </div>
                            <div id="Data.y" class="classattr">
                                <div class="attr variable">
            <span class="name">y</span>

        
    </div>
    <a class="headerlink" href="#Data.y"></a>
    
    

                            </div>
                            <div id="Data.x" class="classattr">
                                <div class="attr variable">
            <span class="name">x</span>

        
    </div>
    <a class="headerlink" href="#Data.x"></a>
    
    

                            </div>
                            <div id="Data.label" class="classattr">
                                <div class="attr variable">
            <span class="name">label</span>

        
    </div>
    <a class="headerlink" href="#Data.label"></a>
    
    

                            </div>
                            <div id="Data.vel" class="classattr">
                                <div class="attr variable">
            <span class="name">vel</span>

        
    </div>
    <a class="headerlink" href="#Data.vel"></a>
    
    

                            </div>
                </section>
                <section id="Data3D">
                            <input id="Data3D-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Data3D</span><wbr>(<span class="base"><a href="#Data">Data</a></span>):

                <label class="view-source-button" for="Data3D-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Data3D"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Data3D-316"><a href="#Data3D-316"><span class="linenos">316</span></a><span class="k">class</span> <span class="nc">Data3D</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
</span><span id="Data3D-317"><a href="#Data3D-317"><span class="linenos">317</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing 3D array data (series of spectra) and associated parameter/metadata from an OPUS file.</span>
</span><span id="Data3D-318"><a href="#Data3D-318"><span class="linenos">318</span></a>
</span><span id="Data3D-319"><a href="#Data3D-319"><span class="linenos">319</span></a><span class="sd">    Args:</span>
</span><span id="Data3D-320"><a href="#Data3D-320"><span class="linenos">320</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: read_opus_file_bytes</span>
</span><span id="Data3D-321"><a href="#Data3D-321"><span class="linenos">321</span></a><span class="sd">        data_info: FileBlockInfo instance of a 3D data block</span>
</span><span id="Data3D-322"><a href="#Data3D-322"><span class="linenos">322</span></a><span class="sd">        data_status_info: FileBlockInfo instance of a data status block which contains metadata about the data_info</span>
</span><span id="Data3D-323"><a href="#Data3D-323"><span class="linenos">323</span></a><span class="sd">            block. This block is a parameter block.</span>
</span><span id="Data3D-324"><a href="#Data3D-324"><span class="linenos">324</span></a>
</span><span id="Data3D-325"><a href="#Data3D-325"><span class="linenos">325</span></a><span class="sd">    Attributes:</span>
</span><span id="Data3D-326"><a href="#Data3D-326"><span class="linenos">326</span></a><span class="sd">        params: Parameter class with metadata associated with the data block such as first x point (fxp), last x point</span>
</span><span id="Data3D-327"><a href="#Data3D-327"><span class="linenos">327</span></a><span class="sd">            (lxp), number of points (npt), date (dat), time (tim) etc.</span>
</span><span id="Data3D-328"><a href="#Data3D-328"><span class="linenos">328</span></a><span class="sd">        y: 2D numpy array containing y values of data block</span>
</span><span id="Data3D-329"><a href="#Data3D-329"><span class="linenos">329</span></a><span class="sd">        x: 1D numpy array containing x values of data block. Units of x array are given by .dxu attribute.</span>
</span><span id="Data3D-330"><a href="#Data3D-330"><span class="linenos">330</span></a><span class="sd">        num_spectra: number of spectra in the series (i.e. length of y)</span>
</span><span id="Data3D-331"><a href="#Data3D-331"><span class="linenos">331</span></a><span class="sd">        label: human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</span>
</span><span id="Data3D-332"><a href="#Data3D-332"><span class="linenos">332</span></a>
</span><span id="Data3D-333"><a href="#Data3D-333"><span class="linenos">333</span></a><span class="sd">    Extended Attributes:</span>
</span><span id="Data3D-334"><a href="#Data3D-334"><span class="linenos">334</span></a><span class="sd">        **wn:** Returns the x array in wavenumber (cm⁻¹) units regardless of what units the x array was originally saved</span>
</span><span id="Data3D-335"><a href="#Data3D-335"><span class="linenos">335</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="Data3D-336"><a href="#Data3D-336"><span class="linenos">336</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="Data3D-337"><a href="#Data3D-337"><span class="linenos">337</span></a><span class="sd">        **wl:** Returns the x array in wavelength (µm) units regardless of what units the x array was originally saved</span>
</span><span id="Data3D-338"><a href="#Data3D-338"><span class="linenos">338</span></a><span class="sd">            in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not</span>
</span><span id="Data3D-339"><a href="#Data3D-339"><span class="linenos">339</span></a><span class="sd">            interferogram or phase blocks.  </span>
</span><span id="Data3D-340"><a href="#Data3D-340"><span class="linenos">340</span></a><span class="sd">        **datetime:** Returns a `datetime` class of when the data was taken (extracted from data status parameter</span>
</span><span id="Data3D-341"><a href="#Data3D-341"><span class="linenos">341</span></a><span class="sd">            block).  </span>
</span><span id="Data3D-342"><a href="#Data3D-342"><span class="linenos">342</span></a><span class="sd">        **xxx:** the various three char parameter keys from the &quot;params&quot; attribute can be directly called from the data</span>
</span><span id="Data3D-343"><a href="#Data3D-343"><span class="linenos">343</span></a><span class="sd">            class for convenience. Several of these parameters return arrays, rather than singular values because they</span>
</span><span id="Data3D-344"><a href="#Data3D-344"><span class="linenos">344</span></a><span class="sd">            are recorded for every spectra in the series, e.g. `npt`, `mny`, `mxy`, `tim`, `nsn`.  </span>
</span><span id="Data3D-345"><a href="#Data3D-345"><span class="linenos">345</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="Data3D-346"><a href="#Data3D-346"><span class="linenos">346</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_key&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;num_spectra&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">)</span>
</span><span id="Data3D-347"><a href="#Data3D-347"><span class="linenos">347</span></a>
</span><span id="Data3D-348"><a href="#Data3D-348"><span class="linenos">348</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">data_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">,</span> <span class="n">data_status_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">):</span>
</span><span id="Data3D-349"><a href="#Data3D-349"><span class="linenos">349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="Data3D-350"><a href="#Data3D-350"><span class="linenos">350</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="p">[</span><span class="n">data_status_info</span><span class="p">])</span>
</span><span id="Data3D-351"><a href="#Data3D-351"><span class="linenos">351</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">parse_3d_data_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dpf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dpf</span><span class="p">)</span>
</span><span id="Data3D-352"><a href="#Data3D-352"><span class="linenos">352</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][:,</span> <span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="Data3D-353"><a href="#Data3D-353"><span class="linenos">353</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="Data3D-354"><a href="#Data3D-354"><span class="linenos">354</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_spectra</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_blocks&#39;</span><span class="p">]</span>
</span><span id="Data3D-355"><a href="#Data3D-355"><span class="linenos">355</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Data3D-356"><a href="#Data3D-356"><span class="linenos">356</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_size&#39;</span><span class="p">,</span> <span class="s1">&#39;info_size&#39;</span><span class="p">]:</span>
</span><span id="Data3D-357"><a href="#Data3D-357"><span class="linenos">357</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</span><span id="Data3D-358"><a href="#Data3D-358"><span class="linenos">358</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Class containing 3D array data (series of spectra) and associated parameter/metadata from an OPUS file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filebytes:</strong>  raw bytes from OPUS file. see: read_opus_file_bytes</li>
<li><strong>data_info:</strong>  FileBlockInfo instance of a 3D data block</li>
<li><strong>data_status_info:</strong>  FileBlockInfo instance of a data status block which contains metadata about the data_info
block. This block is a parameter block.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>params:</strong>  Parameter class with metadata associated with the data block such as first x point (fxp), last x point
(lxp), number of points (npt), date (dat), time (tim) etc.</li>
<li><strong>y:</strong>  2D numpy array containing y values of data block</li>
<li><strong>x:</strong>  1D numpy array containing x values of data block. Units of x array are given by .dxu attribute.</li>
<li><strong>num_spectra:</strong>  number of spectra in the series (i.e. length of y)</li>
<li><strong>label:</strong>  human-readable string label describing the data block (e.g. Sample Spectrum, Absorbance, etc.)</li>
</ul>

<h6 id="extended-attributes">Extended Attributes:</h6>

<blockquote>
  <p><strong>wn:</strong> Returns the x array in wavenumber (cm⁻¹) units regardless of what units the x array was originally saved
      in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks. <br />
  <strong>wl:</strong> Returns the x array in wavelength (µm) units regardless of what units the x array was originally saved
      in. This is only valid for spectral data blocks such as sample, reference, transmission, etc., not
      interferogram or phase blocks. <br />
  <strong>datetime:</strong> Returns a <code>datetime</code> class of when the data was taken (extracted from data status parameter
      block). <br />
  <strong>xxx:</strong> the various three char parameter keys from the "params" attribute can be directly called from the data
      class for convenience. Several of these parameters return arrays, rather than singular values because they
      are recorded for every spectra in the series, e.g. <code>npt</code>, <code>mny</code>, <code>mxy</code>, <code>tim</code>, <code>nsn</code>.</p>
</blockquote>
</div>


                            <div id="Data3D.__init__" class="classattr">
                                        <input id="Data3D.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Data3D</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span>,</span><span class="param">	<span class="n">data_info</span><span class="p">:</span> <span class="n"><a href="#FileBlockInfo">FileBlockInfo</a></span>,</span><span class="param">	<span class="n">data_status_info</span><span class="p">:</span> <span class="n"><a href="#FileBlockInfo">FileBlockInfo</a></span></span>)</span>

                <label class="view-source-button" for="Data3D.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Data3D.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Data3D.__init__-348"><a href="#Data3D.__init__-348"><span class="linenos">348</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">data_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">,</span> <span class="n">data_status_info</span><span class="p">:</span> <span class="n">FileBlockInfo</span><span class="p">):</span>
</span><span id="Data3D.__init__-349"><a href="#Data3D.__init__-349"><span class="linenos">349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span>
</span><span id="Data3D.__init__-350"><a href="#Data3D.__init__-350"><span class="linenos">350</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="p">[</span><span class="n">data_status_info</span><span class="p">])</span>
</span><span id="Data3D.__init__-351"><a href="#Data3D.__init__-351"><span class="linenos">351</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">parse_3d_data_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">data_info</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">dpf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">dpf</span><span class="p">)</span>
</span><span id="Data3D.__init__-352"><a href="#Data3D.__init__-352"><span class="linenos">352</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][:,</span> <span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">]</span>    <span class="c1"># Trim extra values on some spectra</span>
</span><span id="Data3D.__init__-353"><a href="#Data3D.__init__-353"><span class="linenos">353</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">fxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">lxv</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">npt</span><span class="p">)</span>
</span><span id="Data3D.__init__-354"><a href="#Data3D.__init__-354"><span class="linenos">354</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_spectra</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;num_blocks&#39;</span><span class="p">]</span>
</span><span id="Data3D.__init__-355"><a href="#Data3D.__init__-355"><span class="linenos">355</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Data3D.__init__-356"><a href="#Data3D.__init__-356"><span class="linenos">356</span></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_size&#39;</span><span class="p">,</span> <span class="s1">&#39;info_size&#39;</span><span class="p">]:</span>
</span><span id="Data3D.__init__-357"><a href="#Data3D.__init__-357"><span class="linenos">357</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
</span><span id="Data3D.__init__-358"><a href="#Data3D.__init__-358"><span class="linenos">358</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data_info</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Data3D.params" class="classattr">
                                <div class="attr variable">
            <span class="name">params</span>

        
    </div>
    <a class="headerlink" href="#Data3D.params"></a>
    
    

                            </div>
                            <div id="Data3D.y" class="classattr">
                                <div class="attr variable">
            <span class="name">y</span>

        
    </div>
    <a class="headerlink" href="#Data3D.y"></a>
    
    

                            </div>
                            <div id="Data3D.x" class="classattr">
                                <div class="attr variable">
            <span class="name">x</span>

        
    </div>
    <a class="headerlink" href="#Data3D.x"></a>
    
    

                            </div>
                            <div id="Data3D.num_spectra" class="classattr">
                                <div class="attr variable">
            <span class="name">num_spectra</span>

        
    </div>
    <a class="headerlink" href="#Data3D.num_spectra"></a>
    
    

                            </div>
                            <div id="Data3D.label" class="classattr">
                                <div class="attr variable">
            <span class="name">label</span>

        
    </div>
    <a class="headerlink" href="#Data3D.label"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Data">Data</a></dt>
                                <dd id="Data3D.vel" class="variable"><a href="#Data.vel">vel</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Parameters">
                            <input id="Parameters-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Parameters</span>:

                <label class="view-source-button" for="Parameters-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters-361"><a href="#Parameters-361"><span class="linenos">361</span></a><span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
</span><span id="Parameters-362"><a href="#Parameters-362"><span class="linenos">362</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Class containing parameter metadata of an OPUS file.</span>
</span><span id="Parameters-363"><a href="#Parameters-363"><span class="linenos">363</span></a>
</span><span id="Parameters-364"><a href="#Parameters-364"><span class="linenos">364</span></a><span class="sd">    Parameters of an OPUS file are stored as key, val pairs, where the key is always three chars.  For example, the</span>
</span><span id="Parameters-365"><a href="#Parameters-365"><span class="linenos">365</span></a><span class="sd">    beamsplitter is stored in the &quot;bms&quot; attribute, source in &quot;src&quot; etc.  A list of known keys, with friendly label can</span>
</span><span id="Parameters-366"><a href="#Parameters-366"><span class="linenos">366</span></a><span class="sd">    be found in `brukeropus.file.constants.PARAM_LABELS`.  The keys in an OPUS file are not case sensitive, and stored</span>
</span><span id="Parameters-367"><a href="#Parameters-367"><span class="linenos">367</span></a><span class="sd">    in all CAPS (i.e. `BMS`, `SRC`, etc.) but this class uses lower case keys to follow python convention.  The class is</span>
</span><span id="Parameters-368"><a href="#Parameters-368"><span class="linenos">368</span></a><span class="sd">    initialized from a list of parameter `FileBlockInfo`.  The key, val items in blocks of the list are combined into</span>
</span><span id="Parameters-369"><a href="#Parameters-369"><span class="linenos">369</span></a><span class="sd">    one parameter class, so care must be taken not to pass blocks that will overwrite each others keys.  Analagous to a</span>
</span><span id="Parameters-370"><a href="#Parameters-370"><span class="linenos">370</span></a><span class="sd">    dict, the keys, values, and (key, val) can be iterated over using the functions: `keys()`, `values()`, and `items()`</span>
</span><span id="Parameters-371"><a href="#Parameters-371"><span class="linenos">371</span></a><span class="sd">    respectively.</span>
</span><span id="Parameters-372"><a href="#Parameters-372"><span class="linenos">372</span></a>
</span><span id="Parameters-373"><a href="#Parameters-373"><span class="linenos">373</span></a><span class="sd">    Args:</span>
</span><span id="Parameters-374"><a href="#Parameters-374"><span class="linenos">374</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: `brukeropus.file.parser.read_opus_file_bytes`</span>
</span><span id="Parameters-375"><a href="#Parameters-375"><span class="linenos">375</span></a><span class="sd">        param_blocks: list of `FileBlockInfo`; every block in the list should be classified as a parameter block.</span>
</span><span id="Parameters-376"><a href="#Parameters-376"><span class="linenos">376</span></a>
</span><span id="Parameters-377"><a href="#Parameters-377"><span class="linenos">377</span></a><span class="sd">    Attributes:</span>
</span><span id="Parameters-378"><a href="#Parameters-378"><span class="linenos">378</span></a><span class="sd">        xxx: parameter attributes are stored as three char keys. Which keys are generated depends on the list of</span>
</span><span id="Parameters-379"><a href="#Parameters-379"><span class="linenos">379</span></a><span class="sd">            `FileBlockInfo` that is used to initialize the class. If input list contains a single data status</span>
</span><span id="Parameters-380"><a href="#Parameters-380"><span class="linenos">380</span></a><span class="sd">            `FileBlockInfo`, attributes will include: `fxv`, `lxv`, `npt` (first x-val, last x-val, number of points),</span>
</span><span id="Parameters-381"><a href="#Parameters-381"><span class="linenos">381</span></a><span class="sd">            etc. Other blocks produce attributes such as: `bms`, `src`, `apt` (beamsplitter, source, aperture) etc. A</span>
</span><span id="Parameters-382"><a href="#Parameters-382"><span class="linenos">382</span></a><span class="sd">            full list of keys available in a given Parameters instance are given by the `keys()` method.</span>
</span><span id="Parameters-383"><a href="#Parameters-383"><span class="linenos">383</span></a><span class="sd">        datetime: if blocks contain the keys: `dat` (date) and `tim` (time), the `datetime` attribute of this class will</span>
</span><span id="Parameters-384"><a href="#Parameters-384"><span class="linenos">384</span></a><span class="sd">            be set to a python `datetime` object. Currently, only data status blocks are known to have these keys. If</span>
</span><span id="Parameters-385"><a href="#Parameters-385"><span class="linenos">385</span></a><span class="sd">            `dat` and `tim` are not present in the class, the `datetime` attribute will return `None`.</span>
</span><span id="Parameters-386"><a href="#Parameters-386"><span class="linenos">386</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="Parameters-387"><a href="#Parameters-387"><span class="linenos">387</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_params&#39;</span><span class="p">,</span> <span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
</span><span id="Parameters-388"><a href="#Parameters-388"><span class="linenos">388</span></a>
</span><span id="Parameters-389"><a href="#Parameters-389"><span class="linenos">389</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">param_blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Parameters-390"><a href="#Parameters-390"><span class="linenos">390</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="Parameters-391"><a href="#Parameters-391"><span class="linenos">391</span></a>        <span class="k">for</span> <span class="n">block_info</span> <span class="ow">in</span> <span class="n">param_blocks</span><span class="p">:</span>
</span><span id="Parameters-392"><a href="#Parameters-392"><span class="linenos">392</span></a>            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">parse_param_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">block_info</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">block_info</span><span class="o">.</span><span class="n">start</span><span class="p">)}</span>
</span><span id="Parameters-393"><a href="#Parameters-393"><span class="linenos">393</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="Parameters-394"><a href="#Parameters-394"><span class="linenos">394</span></a>            <span class="n">block_info</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="Parameters-395"><a href="#Parameters-395"><span class="linenos">395</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_datetime</span><span class="p">()</span>
</span><span id="Parameters-396"><a href="#Parameters-396"><span class="linenos">396</span></a>
</span><span id="Parameters-397"><a href="#Parameters-397"><span class="linenos">397</span></a>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Parameters-398"><a href="#Parameters-398"><span class="linenos">398</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Parameters-399"><a href="#Parameters-399"><span class="linenos">399</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
</span><span id="Parameters-400"><a href="#Parameters-400"><span class="linenos">400</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parameters-401"><a href="#Parameters-401"><span class="linenos">401</span></a>            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; not a valid attribute. For list of valid parameter keys, use: .keys()&#39;</span>
</span><span id="Parameters-402"><a href="#Parameters-402"><span class="linenos">402</span></a>            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="Parameters-403"><a href="#Parameters-403"><span class="linenos">403</span></a>
</span><span id="Parameters-404"><a href="#Parameters-404"><span class="linenos">404</span></a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span id="Parameters-405"><a href="#Parameters-405"><span class="linenos">405</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="Parameters-406"><a href="#Parameters-406"><span class="linenos">406</span></a>
</span><span id="Parameters-407"><a href="#Parameters-407"><span class="linenos">407</span></a>    <span class="k">def</span> <span class="nf">_set_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-408"><a href="#Parameters-408"><span class="linenos">408</span></a>        <span class="k">if</span> <span class="s1">&#39;dat&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39;tim&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Parameters-409"><a href="#Parameters-409"><span class="linenos">409</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Parameters-410"><a href="#Parameters-410"><span class="linenos">410</span></a>                <span class="n">date_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dat</span>
</span><span id="Parameters-411"><a href="#Parameters-411"><span class="linenos">411</span></a>                <span class="n">time_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tim</span>
</span><span id="Parameters-412"><a href="#Parameters-412"><span class="linenos">412</span></a>                <span class="n">dt_str</span> <span class="o">=</span> <span class="n">date_str</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">time_str</span><span class="p">[:</span><span class="n">time_str</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39; (&#39;</span><span class="p">)]</span>
</span><span id="Parameters-413"><a href="#Parameters-413"><span class="linenos">413</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Parameters-414"><a href="#Parameters-414"><span class="linenos">414</span></a>                    <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">/%m/%Y-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="Parameters-415"><a href="#Parameters-415"><span class="linenos">415</span></a>                    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="Parameters-416"><a href="#Parameters-416"><span class="linenos">416</span></a>                <span class="k">except</span><span class="p">:</span>
</span><span id="Parameters-417"><a href="#Parameters-417"><span class="linenos">417</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="Parameters-418"><a href="#Parameters-418"><span class="linenos">418</span></a>                        <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%Y/%m/</span><span class="si">%d</span><span class="s1">-%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span>
</span><span id="Parameters-419"><a href="#Parameters-419"><span class="linenos">419</span></a>                        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">dt_str</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
</span><span id="Parameters-420"><a href="#Parameters-420"><span class="linenos">420</span></a>                    <span class="k">except</span><span class="p">:</span>
</span><span id="Parameters-421"><a href="#Parameters-421"><span class="linenos">421</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters-422"><a href="#Parameters-422"><span class="linenos">422</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">dt</span>
</span><span id="Parameters-423"><a href="#Parameters-423"><span class="linenos">423</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="Parameters-424"><a href="#Parameters-424"><span class="linenos">424</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters-425"><a href="#Parameters-425"><span class="linenos">425</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parameters-426"><a href="#Parameters-426"><span class="linenos">426</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parameters-427"><a href="#Parameters-427"><span class="linenos">427</span></a>
</span><span id="Parameters-428"><a href="#Parameters-428"><span class="linenos">428</span></a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-429"><a href="#Parameters-429"><span class="linenos">429</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_keys` class of all valid keys in the class (i.e. dict.keys())&#39;&#39;&#39;</span>
</span><span id="Parameters-430"><a href="#Parameters-430"><span class="linenos">430</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="Parameters-431"><a href="#Parameters-431"><span class="linenos">431</span></a>
</span><span id="Parameters-432"><a href="#Parameters-432"><span class="linenos">432</span></a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-433"><a href="#Parameters-433"><span class="linenos">433</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_values` class of all the values in the class (i.e. dict.values())&#39;&#39;&#39;</span>
</span><span id="Parameters-434"><a href="#Parameters-434"><span class="linenos">434</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span><span id="Parameters-435"><a href="#Parameters-435"><span class="linenos">435</span></a>
</span><span id="Parameters-436"><a href="#Parameters-436"><span class="linenos">436</span></a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters-437"><a href="#Parameters-437"><span class="linenos">437</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_items` class of all the values in the class (i.e. dict.items())&#39;&#39;&#39;</span>
</span><span id="Parameters-438"><a href="#Parameters-438"><span class="linenos">438</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Class containing parameter metadata of an OPUS file.</p>

<p>Parameters of an OPUS file are stored as key, val pairs, where the key is always three chars.  For example, the
beamsplitter is stored in the "bms" attribute, source in "src" etc.  A list of known keys, with friendly label can
be found in <code><a href="constants.html#PARAM_LABELS">brukeropus.file.constants.PARAM_LABELS</a></code>.  The keys in an OPUS file are not case sensitive, and stored
in all CAPS (i.e. <code>BMS</code>, <code>SRC</code>, etc.) but this class uses lower case keys to follow python convention.  The class is
initialized from a list of parameter <code><a href="#FileBlockInfo">FileBlockInfo</a></code>.  The key, val items in blocks of the list are combined into
one parameter class, so care must be taken not to pass blocks that will overwrite each others keys.  Analagous to a
dict, the keys, values, and (key, val) can be iterated over using the functions: <code><a href="#Parameters.keys">keys()</a></code>, <code><a href="#Parameters.values">values()</a></code>, and <code><a href="#Parameters.items">items()</a></code>
respectively.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filebytes:</strong>  raw bytes from OPUS file. see: <code><a href="parser.html#read_opus_file_bytes">brukeropus.file.parser.read_opus_file_bytes</a></code></li>
<li><strong>param_blocks:</strong>  list of <code><a href="#FileBlockInfo">FileBlockInfo</a></code>; every block in the list should be classified as a parameter block.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>xxx:</strong>  parameter attributes are stored as three char keys. Which keys are generated depends on the list of
<code><a href="#FileBlockInfo">FileBlockInfo</a></code> that is used to initialize the class. If input list contains a single data status
<code><a href="#FileBlockInfo">FileBlockInfo</a></code>, attributes will include: <code>fxv</code>, <code>lxv</code>, <code>npt</code> (first x-val, last x-val, number of points),
etc. Other blocks produce attributes such as: <code>bms</code>, <code>src</code>, <code>apt</code> (beamsplitter, source, aperture) etc. A
full list of keys available in a given Parameters instance are given by the <code><a href="#Parameters.keys">keys()</a></code> method.</li>
<li><strong>datetime:</strong>  if blocks contain the keys: <code>dat</code> (date) and <code>tim</code> (time), the <code><a href="#Parameters.datetime">datetime</a></code> attribute of this class will
be set to a python <code><a href="#Parameters.datetime">datetime</a></code> object. Currently, only data status blocks are known to have these keys. If
<code>dat</code> and <code>tim</code> are not present in the class, the <code><a href="#Parameters.datetime">datetime</a></code> attribute will return <code>None</code>.</li>
</ul>
</div>


                            <div id="Parameters.__init__" class="classattr">
                                        <input id="Parameters.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Parameters</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span>, </span><span class="param"><span class="n">param_blocks</span><span class="p">:</span> <span class="nb">list</span></span>)</span>

                <label class="view-source-button" for="Parameters.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.__init__-389"><a href="#Parameters.__init__-389"><span class="linenos">389</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">param_blocks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="Parameters.__init__-390"><a href="#Parameters.__init__-390"><span class="linenos">390</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</span><span id="Parameters.__init__-391"><a href="#Parameters.__init__-391"><span class="linenos">391</span></a>        <span class="k">for</span> <span class="n">block_info</span> <span class="ow">in</span> <span class="n">param_blocks</span><span class="p">:</span>
</span><span id="Parameters.__init__-392"><a href="#Parameters.__init__-392"><span class="linenos">392</span></a>            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">parse_param_block</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="n">block_info</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">block_info</span><span class="o">.</span><span class="n">start</span><span class="p">)}</span>
</span><span id="Parameters.__init__-393"><a href="#Parameters.__init__-393"><span class="linenos">393</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="Parameters.__init__-394"><a href="#Parameters.__init__-394"><span class="linenos">394</span></a>            <span class="n">block_info</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="Parameters.__init__-395"><a href="#Parameters.__init__-395"><span class="linenos">395</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_datetime</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Parameters.keys" class="classattr">
                                        <input id="Parameters.keys-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">keys</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parameters.keys-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.keys"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.keys-428"><a href="#Parameters.keys-428"><span class="linenos">428</span></a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters.keys-429"><a href="#Parameters.keys-429"><span class="linenos">429</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_keys` class of all valid keys in the class (i.e. dict.keys())&#39;&#39;&#39;</span>
</span><span id="Parameters.keys-430"><a href="#Parameters.keys-430"><span class="linenos">430</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns a <code>dict_keys</code> class of all valid keys in the class (i.e. dict.keys())</p>
</div>


                            </div>
                            <div id="Parameters.values" class="classattr">
                                        <input id="Parameters.values-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">values</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parameters.values-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.values"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.values-432"><a href="#Parameters.values-432"><span class="linenos">432</span></a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters.values-433"><a href="#Parameters.values-433"><span class="linenos">433</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_values` class of all the values in the class (i.e. dict.values())&#39;&#39;&#39;</span>
</span><span id="Parameters.values-434"><a href="#Parameters.values-434"><span class="linenos">434</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns a <code>dict_values</code> class of all the values in the class (i.e. dict.values())</p>
</div>


                            </div>
                            <div id="Parameters.items" class="classattr">
                                        <input id="Parameters.items-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">items</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parameters.items-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameters.items"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameters.items-436"><a href="#Parameters.items-436"><span class="linenos">436</span></a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parameters.items-437"><a href="#Parameters.items-437"><span class="linenos">437</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Returns a `dict_items` class of all the values in the class (i.e. dict.items())&#39;&#39;&#39;</span>
</span><span id="Parameters.items-438"><a href="#Parameters.items-438"><span class="linenos">438</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns a <code>dict_items</code> class of all the values in the class (i.e. dict.items())</p>
</div>


                            </div>
                            <div id="Parameters.datetime" class="classattr">
                                <div class="attr variable">
            <span class="name">datetime</span>

        
    </div>
    <a class="headerlink" href="#Parameters.datetime"></a>
    
    

                            </div>
                </section>
                <section id="FileDirectory">
                            <input id="FileDirectory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FileDirectory</span>:

                <label class="view-source-button" for="FileDirectory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileDirectory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileDirectory-441"><a href="#FileDirectory-441"><span class="linenos">441</span></a><span class="k">class</span> <span class="nc">FileDirectory</span><span class="p">:</span>
</span><span id="FileDirectory-442"><a href="#FileDirectory-442"><span class="linenos">442</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;Contains type and pointer information for all blocks of data in an OPUS file.</span>
</span><span id="FileDirectory-443"><a href="#FileDirectory-443"><span class="linenos">443</span></a>
</span><span id="FileDirectory-444"><a href="#FileDirectory-444"><span class="linenos">444</span></a><span class="sd">    `FileDirectory` information is decoded from the raw file bytes of an OPUS file. First the header is read which</span>
</span><span id="FileDirectory-445"><a href="#FileDirectory-445"><span class="linenos">445</span></a><span class="sd">    provides the start location of the directory block, number of blocks in file, and maximum number of blocks the file</span>
</span><span id="FileDirectory-446"><a href="#FileDirectory-446"><span class="linenos">446</span></a><span class="sd">    supports. Then it decodes the block pointer information from each entry of the file&#39;s directory block. Rather than</span>
</span><span id="FileDirectory-447"><a href="#FileDirectory-447"><span class="linenos">447</span></a><span class="sd">    store all file blocks in a single list (as it is done in the OPUS file directory), this class sorts the blocks into</span>
</span><span id="FileDirectory-448"><a href="#FileDirectory-448"><span class="linenos">448</span></a><span class="sd">    categories: `data`, `data_status`, `params`, `rf_params`, `directory`, and `file_log`.  It also pairs the data</span>
</span><span id="FileDirectory-449"><a href="#FileDirectory-449"><span class="linenos">449</span></a><span class="sd">    blocks with their corresponding `data_status` block to simplify grouping y data with the parameters that are used to</span>
</span><span id="FileDirectory-450"><a href="#FileDirectory-450"><span class="linenos">450</span></a><span class="sd">    generate x data and other data block specific metadata.</span>
</span><span id="FileDirectory-451"><a href="#FileDirectory-451"><span class="linenos">451</span></a>
</span><span id="FileDirectory-452"><a href="#FileDirectory-452"><span class="linenos">452</span></a><span class="sd">    Args:</span>
</span><span id="FileDirectory-453"><a href="#FileDirectory-453"><span class="linenos">453</span></a><span class="sd">        filebytes: raw bytes from OPUS file. see: `brukeropus.file.parser.read_opus_file_bytes`</span>
</span><span id="FileDirectory-454"><a href="#FileDirectory-454"><span class="linenos">454</span></a>
</span><span id="FileDirectory-455"><a href="#FileDirectory-455"><span class="linenos">455</span></a><span class="sd">    Attributes:</span>
</span><span id="FileDirectory-456"><a href="#FileDirectory-456"><span class="linenos">456</span></a><span class="sd">        start: pointer to start location of the directory block</span>
</span><span id="FileDirectory-457"><a href="#FileDirectory-457"><span class="linenos">457</span></a><span class="sd">        max_blocks: maximum number of blocks supported by file</span>
</span><span id="FileDirectory-458"><a href="#FileDirectory-458"><span class="linenos">458</span></a><span class="sd">        num_blocks: total number of blocks in the file</span>
</span><span id="FileDirectory-459"><a href="#FileDirectory-459"><span class="linenos">459</span></a><span class="sd">        data_blocks: list of `FileBlockInfo` that contain array data (e.g. sample, reference, phase)</span>
</span><span id="FileDirectory-460"><a href="#FileDirectory-460"><span class="linenos">460</span></a><span class="sd">        data_status_blocks: list of `FileBlockInfo` that contain metadata specific to a data block (units, etc.)</span>
</span><span id="FileDirectory-461"><a href="#FileDirectory-461"><span class="linenos">461</span></a><span class="sd">        param_blocks: list of `FileBlockInfo` that contain metadata about the measurement sample</span>
</span><span id="FileDirectory-462"><a href="#FileDirectory-462"><span class="linenos">462</span></a><span class="sd">        rf_param_blocks: list of `FileBlockInfo` that contain metatdata about the reference measurement</span>
</span><span id="FileDirectory-463"><a href="#FileDirectory-463"><span class="linenos">463</span></a><span class="sd">        directory_block: `FileBlockInfo` for directory block that contains all the block info in the file</span>
</span><span id="FileDirectory-464"><a href="#FileDirectory-464"><span class="linenos">464</span></a><span class="sd">        file_log_block: `FileBlockInfo` of the file log (changes, etc.)</span>
</span><span id="FileDirectory-465"><a href="#FileDirectory-465"><span class="linenos">465</span></a><span class="sd">        data_and_status_block_pairs: (data: `FileBlockInfo`, data_status: `FileBlockInfo`) which pairs the data status</span>
</span><span id="FileDirectory-466"><a href="#FileDirectory-466"><span class="linenos">466</span></a><span class="sd">            parameter block (time, x units, y units, etc.) with the data block it informs</span>
</span><span id="FileDirectory-467"><a href="#FileDirectory-467"><span class="linenos">467</span></a><span class="sd">        unknown_blocks: list of `FileBlockInfo` with an unrecognized type (i.e. not sure how to parse)</span>
</span><span id="FileDirectory-468"><a href="#FileDirectory-468"><span class="linenos">468</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="FileDirectory-469"><a href="#FileDirectory-469"><span class="linenos">469</span></a>
</span><span id="FileDirectory-470"><a href="#FileDirectory-470"><span class="linenos">470</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;max_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;num_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;data_status_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;param_blocks&#39;</span><span class="p">,</span>
</span><span id="FileDirectory-471"><a href="#FileDirectory-471"><span class="linenos">471</span></a>                 <span class="s1">&#39;rf_param_blocks&#39;</span><span class="p">,</span> <span class="s1">&#39;directory_block&#39;</span><span class="p">,</span> <span class="s1">&#39;file_log_block&#39;</span><span class="p">,</span> <span class="s1">&#39;data_and_status_block_pairs&#39;</span><span class="p">,</span>
</span><span id="FileDirectory-472"><a href="#FileDirectory-472"><span class="linenos">472</span></a>                 <span class="s1">&#39;unknown_blocks&#39;</span><span class="p">)</span>
</span><span id="FileDirectory-473"><a href="#FileDirectory-473"><span class="linenos">473</span></a>
</span><span id="FileDirectory-474"><a href="#FileDirectory-474"><span class="linenos">474</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="FileDirectory-475"><a href="#FileDirectory-475"><span class="linenos">475</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_blocks</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span> <span class="o">=</span> <span class="n">parse_header</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="FileDirectory-476"><a href="#FileDirectory-476"><span class="linenos">476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory-477"><a href="#FileDirectory-477"><span class="linenos">477</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory-478"><a href="#FileDirectory-478"><span class="linenos">478</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory-479"><a href="#FileDirectory-479"><span class="linenos">479</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory-480"><a href="#FileDirectory-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">directory_block</span><span class="p">:</span> <span class="n">FileBlockInfo</span>
</span><span id="FileDirectory-481"><a href="#FileDirectory-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">file_log_block</span><span class="p">:</span> <span class="n">FileBlockInfo</span>
</span><span id="FileDirectory-482"><a href="#FileDirectory-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory-483"><a href="#FileDirectory-483"><span class="linenos">483</span></a>        <span class="k">for</span> <span class="n">block_type</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">start</span> <span class="ow">in</span> <span class="n">parse_directory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span><span class="p">):</span>
</span><span id="FileDirectory-484"><a href="#FileDirectory-484"><span class="linenos">484</span></a>            <span class="n">block</span> <span class="o">=</span> <span class="n">FileBlockInfo</span><span class="p">(</span><span class="n">block_type</span><span class="o">=</span><span class="n">block_type</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">)</span>
</span><span id="FileDirectory-485"><a href="#FileDirectory-485"><span class="linenos">485</span></a>            <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">():</span>
</span><span id="FileDirectory-486"><a href="#FileDirectory-486"><span class="linenos">486</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory-487"><a href="#FileDirectory-487"><span class="linenos">487</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_rf_param</span><span class="p">():</span>
</span><span id="FileDirectory-488"><a href="#FileDirectory-488"><span class="linenos">488</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory-489"><a href="#FileDirectory-489"><span class="linenos">489</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_param</span><span class="p">():</span>
</span><span id="FileDirectory-490"><a href="#FileDirectory-490"><span class="linenos">490</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">param_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory-491"><a href="#FileDirectory-491"><span class="linenos">491</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_directory</span><span class="p">():</span>
</span><span id="FileDirectory-492"><a href="#FileDirectory-492"><span class="linenos">492</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">directory_block</span> <span class="o">=</span> <span class="n">block</span>
</span><span id="FileDirectory-493"><a href="#FileDirectory-493"><span class="linenos">493</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_file_log</span><span class="p">():</span>
</span><span id="FileDirectory-494"><a href="#FileDirectory-494"><span class="linenos">494</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">file_log_block</span> <span class="o">=</span> <span class="n">block</span>
</span><span id="FileDirectory-495"><a href="#FileDirectory-495"><span class="linenos">495</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="FileDirectory-496"><a href="#FileDirectory-496"><span class="linenos">496</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory-497"><a href="#FileDirectory-497"><span class="linenos">497</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="FileDirectory-498"><a href="#FileDirectory-498"><span class="linenos">498</span></a>                <span class="n">block</span><span class="o">.</span><span class="n">bytes</span> <span class="o">=</span> <span class="n">filebytes</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">start</span><span class="p">:</span><span class="n">block</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">block</span><span class="o">.</span><span class="n">size</span><span class="p">]</span>
</span><span id="FileDirectory-499"><a href="#FileDirectory-499"><span class="linenos">499</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory-500"><a href="#FileDirectory-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory-501"><a href="#FileDirectory-501"><span class="linenos">501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pair_data_and_status_blocks</span><span class="p">()</span>
</span><span id="FileDirectory-502"><a href="#FileDirectory-502"><span class="linenos">502</span></a>
</span><span id="FileDirectory-503"><a href="#FileDirectory-503"><span class="linenos">503</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileDirectory-504"><a href="#FileDirectory-504"><span class="linenos">504</span></a>        <span class="n">data_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">get_data_key</span><span class="p">()</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="p">]</span>
</span><span id="FileDirectory-505"><a href="#FileDirectory-505"><span class="linenos">505</span></a>        <span class="n">data_str</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_keys</span><span class="p">)</span>
</span><span id="FileDirectory-506"><a href="#FileDirectory-506"><span class="linenos">506</span></a>        <span class="k">return</span> <span class="s1">&#39;File Directory: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; total blocks; data blocks: (&#39;</span> <span class="o">+</span> <span class="n">data_str</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="FileDirectory-507"><a href="#FileDirectory-507"><span class="linenos">507</span></a>
</span><span id="FileDirectory-508"><a href="#FileDirectory-508"><span class="linenos">508</span></a>    <span class="k">def</span> <span class="nf">_pair_data_and_status_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FileDirectory-509"><a href="#FileDirectory-509"><span class="linenos">509</span></a>        <span class="k">for</span> <span class="n">data_block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="p">:</span>
</span><span id="FileDirectory-510"><a href="#FileDirectory-510"><span class="linenos">510</span></a>            <span class="n">status_matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">block</span> <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span> <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data_status_match</span><span class="p">(</span><span class="n">data_block</span><span class="p">)]</span>
</span><span id="FileDirectory-511"><a href="#FileDirectory-511"><span class="linenos">511</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">status_matches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FileDirectory-512"><a href="#FileDirectory-512"><span class="linenos">512</span></a>                <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Warning: No data status block match for data block: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">data_block</span><span class="p">)</span> \
</span><span id="FileDirectory-513"><a href="#FileDirectory-513"><span class="linenos">513</span></a>                    <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">data block will be ignored.&#39;</span>
</span><span id="FileDirectory-514"><a href="#FileDirectory-514"><span class="linenos">514</span></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="FileDirectory-515"><a href="#FileDirectory-515"><span class="linenos">515</span></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">status_matches</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FileDirectory-516"><a href="#FileDirectory-516"><span class="linenos">516</span></a>                <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Warning: Multiple data status block matches for data block: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">data_block</span><span class="p">)</span> \
</span><span id="FileDirectory-517"><a href="#FileDirectory-517"><span class="linenos">517</span></a>                    <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">Matches:&#39;</span> <span class="o">+</span> <span class="s1">&#39;; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">match</span><span class="p">)</span> <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">status_matches</span><span class="p">])</span> \
</span><span id="FileDirectory-518"><a href="#FileDirectory-518"><span class="linenos">518</span></a>                    <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">data block will be ignored.&#39;</span>
</span><span id="FileDirectory-519"><a href="#FileDirectory-519"><span class="linenos">519</span></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="FileDirectory-520"><a href="#FileDirectory-520"><span class="linenos">520</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="FileDirectory-521"><a href="#FileDirectory-521"><span class="linenos">521</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">data_block</span><span class="p">,</span> <span class="n">status_matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span></pre></div>


            <div class="docstring"><p>Contains type and pointer information for all blocks of data in an OPUS file.</p>

<p><code><a href="#FileDirectory">FileDirectory</a></code> information is decoded from the raw file bytes of an OPUS file. First the header is read which
provides the start location of the directory block, number of blocks in file, and maximum number of blocks the file
supports. Then it decodes the block pointer information from each entry of the file's directory block. Rather than
store all file blocks in a single list (as it is done in the OPUS file directory), this class sorts the blocks into
categories: <code>data</code>, <code>data_status</code>, <code>params</code>, <code>rf_params</code>, <code>directory</code>, and <code>file_log</code>.  It also pairs the data
blocks with their corresponding <code>data_status</code> block to simplify grouping y data with the parameters that are used to
generate x data and other data block specific metadata.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>filebytes:</strong>  raw bytes from OPUS file. see: <code><a href="parser.html#read_opus_file_bytes">brukeropus.file.parser.read_opus_file_bytes</a></code></li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>start:</strong>  pointer to start location of the directory block</li>
<li><strong>max_blocks:</strong>  maximum number of blocks supported by file</li>
<li><strong>num_blocks:</strong>  total number of blocks in the file</li>
<li><strong>data_blocks:</strong>  list of <code><a href="#FileBlockInfo">FileBlockInfo</a></code> that contain array data (e.g. sample, reference, phase)</li>
<li><strong>data_status_blocks:</strong>  list of <code><a href="#FileBlockInfo">FileBlockInfo</a></code> that contain metadata specific to a data block (units, etc.)</li>
<li><strong>param_blocks:</strong>  list of <code><a href="#FileBlockInfo">FileBlockInfo</a></code> that contain metadata about the measurement sample</li>
<li><strong>rf_param_blocks:</strong>  list of <code><a href="#FileBlockInfo">FileBlockInfo</a></code> that contain metatdata about the reference measurement</li>
<li><strong>directory_block:</strong>  <code><a href="#FileBlockInfo">FileBlockInfo</a></code> for directory block that contains all the block info in the file</li>
<li><strong>file_log_block:</strong>  <code><a href="#FileBlockInfo">FileBlockInfo</a></code> of the file log (changes, etc.)</li>
<li><strong>data_and_status_block_pairs:</strong>  (data: <code><a href="#FileBlockInfo">FileBlockInfo</a></code>, data_status: <code><a href="#FileBlockInfo">FileBlockInfo</a></code>) which pairs the data status
parameter block (time, x units, y units, etc.) with the data block it informs</li>
<li><strong>unknown_blocks:</strong>  list of <code><a href="#FileBlockInfo">FileBlockInfo</a></code> with an unrecognized type (i.e. not sure how to parse)</li>
</ul>
</div>


                            <div id="FileDirectory.__init__" class="classattr">
                                        <input id="FileDirectory.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">FileDirectory</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span></span>)</span>

                <label class="view-source-button" for="FileDirectory.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FileDirectory.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FileDirectory.__init__-474"><a href="#FileDirectory.__init__-474"><span class="linenos">474</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filebytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="FileDirectory.__init__-475"><a href="#FileDirectory.__init__-475"><span class="linenos">475</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_blocks</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span> <span class="o">=</span> <span class="n">parse_header</span><span class="p">(</span><span class="n">filebytes</span><span class="p">)</span>
</span><span id="FileDirectory.__init__-476"><a href="#FileDirectory.__init__-476"><span class="linenos">476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory.__init__-477"><a href="#FileDirectory.__init__-477"><span class="linenos">477</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory.__init__-478"><a href="#FileDirectory.__init__-478"><span class="linenos">478</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory.__init__-479"><a href="#FileDirectory.__init__-479"><span class="linenos">479</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory.__init__-480"><a href="#FileDirectory.__init__-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">directory_block</span><span class="p">:</span> <span class="n">FileBlockInfo</span>
</span><span id="FileDirectory.__init__-481"><a href="#FileDirectory.__init__-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">file_log_block</span><span class="p">:</span> <span class="n">FileBlockInfo</span>
</span><span id="FileDirectory.__init__-482"><a href="#FileDirectory.__init__-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory.__init__-483"><a href="#FileDirectory.__init__-483"><span class="linenos">483</span></a>        <span class="k">for</span> <span class="n">block_type</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">start</span> <span class="ow">in</span> <span class="n">parse_directory</span><span class="p">(</span><span class="n">filebytes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_blocks</span><span class="p">):</span>
</span><span id="FileDirectory.__init__-484"><a href="#FileDirectory.__init__-484"><span class="linenos">484</span></a>            <span class="n">block</span> <span class="o">=</span> <span class="n">FileBlockInfo</span><span class="p">(</span><span class="n">block_type</span><span class="o">=</span><span class="n">block_type</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">)</span>
</span><span id="FileDirectory.__init__-485"><a href="#FileDirectory.__init__-485"><span class="linenos">485</span></a>            <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data_status</span><span class="p">():</span>
</span><span id="FileDirectory.__init__-486"><a href="#FileDirectory.__init__-486"><span class="linenos">486</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_status_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory.__init__-487"><a href="#FileDirectory.__init__-487"><span class="linenos">487</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_rf_param</span><span class="p">():</span>
</span><span id="FileDirectory.__init__-488"><a href="#FileDirectory.__init__-488"><span class="linenos">488</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">rf_param_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory.__init__-489"><a href="#FileDirectory.__init__-489"><span class="linenos">489</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_param</span><span class="p">():</span>
</span><span id="FileDirectory.__init__-490"><a href="#FileDirectory.__init__-490"><span class="linenos">490</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">param_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory.__init__-491"><a href="#FileDirectory.__init__-491"><span class="linenos">491</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_directory</span><span class="p">():</span>
</span><span id="FileDirectory.__init__-492"><a href="#FileDirectory.__init__-492"><span class="linenos">492</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">directory_block</span> <span class="o">=</span> <span class="n">block</span>
</span><span id="FileDirectory.__init__-493"><a href="#FileDirectory.__init__-493"><span class="linenos">493</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_file_log</span><span class="p">():</span>
</span><span id="FileDirectory.__init__-494"><a href="#FileDirectory.__init__-494"><span class="linenos">494</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">file_log_block</span> <span class="o">=</span> <span class="n">block</span>
</span><span id="FileDirectory.__init__-495"><a href="#FileDirectory.__init__-495"><span class="linenos">495</span></a>            <span class="k">elif</span> <span class="n">block</span><span class="o">.</span><span class="n">is_data</span><span class="p">():</span>
</span><span id="FileDirectory.__init__-496"><a href="#FileDirectory.__init__-496"><span class="linenos">496</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">data_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory.__init__-497"><a href="#FileDirectory.__init__-497"><span class="linenos">497</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="FileDirectory.__init__-498"><a href="#FileDirectory.__init__-498"><span class="linenos">498</span></a>                <span class="n">block</span><span class="o">.</span><span class="n">bytes</span> <span class="o">=</span> <span class="n">filebytes</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">start</span><span class="p">:</span><span class="n">block</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">block</span><span class="o">.</span><span class="n">size</span><span class="p">]</span>
</span><span id="FileDirectory.__init__-499"><a href="#FileDirectory.__init__-499"><span class="linenos">499</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">unknown_blocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</span><span id="FileDirectory.__init__-500"><a href="#FileDirectory.__init__-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">data_and_status_block_pairs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FileDirectory.__init__-501"><a href="#FileDirectory.__init__-501"><span class="linenos">501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pair_data_and_status_blocks</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="FileDirectory.data_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">data_blocks</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.data_blocks"></a>
    
    

                            </div>
                            <div id="FileDirectory.data_status_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">data_status_blocks</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.data_status_blocks"></a>
    
    

                            </div>
                            <div id="FileDirectory.param_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">param_blocks</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.param_blocks"></a>
    
    

                            </div>
                            <div id="FileDirectory.rf_param_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">rf_param_blocks</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.rf_param_blocks"></a>
    
    

                            </div>
                            <div id="FileDirectory.directory_block" class="classattr">
                                <div class="attr variable">
            <span class="name">directory_block</span><span class="annotation">: <a href="#FileBlockInfo">FileBlockInfo</a></span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.directory_block"></a>
    
    

                            </div>
                            <div id="FileDirectory.file_log_block" class="classattr">
                                <div class="attr variable">
            <span class="name">file_log_block</span><span class="annotation">: <a href="#FileBlockInfo">FileBlockInfo</a></span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.file_log_block"></a>
    
    

                            </div>
                            <div id="FileDirectory.unknown_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">unknown_blocks</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.unknown_blocks"></a>
    
    

                            </div>
                            <div id="FileDirectory.data_and_status_block_pairs" class="classattr">
                                <div class="attr variable">
            <span class="name">data_and_status_block_pairs</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.data_and_status_block_pairs"></a>
    
    

                            </div>
                            <div id="FileDirectory.max_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">max_blocks</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.max_blocks"></a>
    
    

                            </div>
                            <div id="FileDirectory.num_blocks" class="classattr">
                                <div class="attr variable">
            <span class="name">num_blocks</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.num_blocks"></a>
    
    

                            </div>
                            <div id="FileDirectory.start" class="classattr">
                                <div class="attr variable">
            <span class="name">start</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.start"></a>
    
    

                            </div>
                            <div id="FileDirectory.version" class="classattr">
                                <div class="attr variable">
            <span class="name">version</span>

        
    </div>
    <a class="headerlink" href="#FileDirectory.version"></a>
    
    

                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>